const e=(e,t)=>{if(!e)throw new Error(t)},t=!("undefined"==typeof process||!process.version);let i=null;const s=e=>t?async(...t)=>{(await async function(){return i||(i=(await import("debug")).default),i}())(e)(t)}:(...t)=>{const i=globalThis.__PUPPETEER_DEBUG;i&&("*"===i||(i.endsWith("*")?e.startsWith(i):e===i))&&console.log(`${e}:`,...t)};class a{constructor(){var e;this.eventsMap=new Map,this.emitter={all:e=(e=this.eventsMap)||new Map,on:function(t,i){var s=e.get(t);s&&s.push(i)||e.set(t,[i])},off:function(t,i){var s=e.get(t);s&&s.splice(s.indexOf(i)>>>0,1)},emit:function(t,i){(e.get(t)||[]).slice().map((function(e){e(i)})),(e.get("*")||[]).slice().map((function(e){e(t,i)}))}}}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeListener(e,t){return this.off(e,t),this}addListener(e,t){return this.on(e,t),this}emit(e,t){return this.emitter.emit(e,t),this.eventListenersCount(e)>0}once(e,t){const i=s=>{t(s),this.off(e,i)};return this.on(e,i)}listenerCount(e){return this.eventListenersCount(e)}removeAllListeners(e){return e?this.eventsMap.delete(e):this.eventsMap.clear(),this}eventListenersCount(e){var t;return(null===(t=this.eventsMap.get(e))||void 0===t?void 0:t.length)||0}}class n extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class o extends n{}class r extends n{constructor(){super(...arguments),this.originalMessage=""}}Object.freeze({TimeoutError:o,ProtocolError:r});var c,h,d,l,f,u,w,y,p,m,g,k,v,b,C=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},M=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const _=s("puppeteer:protocol:SEND ►"),E=s("puppeteer:protocol:RECV ◀"),I={Disconnected:Symbol("Connection.Disconnected")};class P extends a{constructor(e,t,i=0){super(),c.add(this),h.set(this,void 0),d.set(this,void 0),l.set(this,void 0),f.set(this,0),u.set(this,new Map),w.set(this,!1),y.set(this,new Map),p.set(this,new Set),C(this,h,e,"f"),C(this,l,i,"f"),C(this,d,t,"f"),M(this,d,"f").onmessage=this.onMessage.bind(this),M(this,d,"f").onclose=M(this,c,"m",m).bind(this)}static fromSession(e){return e.connection()}get _closed(){return M(this,w,"f")}get _sessions(){return M(this,u,"f")}session(e){return M(this,u,"f").get(e)||null}url(){return M(this,h,"f")}send(e,...t){const i=t.length?t[0]:void 0,s=this._rawSend({method:e,params:i});return new Promise(((t,i)=>{M(this,y,"f").set(s,{resolve:t,reject:i,error:new r,method:e})}))}_rawSend(e){var t;const i=C(this,f,(t=M(this,f,"f"),++t),"f"),s=JSON.stringify(Object.assign({},e,{id:i}));return _(s),M(this,d,"f").send(s),i}async onMessage(e){M(this,l,"f")&&await new Promise((e=>setTimeout(e,M(this,l,"f")))),E(e);const t=JSON.parse(e);if("Target.attachedToTarget"===t.method){const e=t.params.sessionId,i=new x(this,t.params.targetInfo.type,e);M(this,u,"f").set(e,i),this.emit("sessionattached",i);const s=M(this,u,"f").get(t.sessionId);s&&s.emit("sessionattached",i)}else if("Target.detachedFromTarget"===t.method){const e=M(this,u,"f").get(t.params.sessionId);if(e){e._onClosed(),M(this,u,"f").delete(t.params.sessionId),this.emit("sessiondetached",e);const i=M(this,u,"f").get(t.sessionId);i&&i.emit("sessiondetached",e)}}if(t.sessionId){const e=M(this,u,"f").get(t.sessionId);e&&e._onMessage(t)}else if(t.id){const e=M(this,y,"f").get(t.id);e&&(M(this,y,"f").delete(t.id),t.error?e.reject(W(e.error,e.method,t)):e.resolve(t.result))}else this.emit(t.method,t.params)}dispose(){M(this,c,"m",m).call(this),M(this,d,"f").close()}isAutoAttached(e){return!M(this,p,"f").has(e)}async createSession(e){M(this,p,"f").add(e.targetId);const{sessionId:t}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0}),i=M(this,u,"f").get(t);if(!i)throw new Error("CDPSession creation failed.");return i}}h=new WeakMap,d=new WeakMap,l=new WeakMap,f=new WeakMap,u=new WeakMap,w=new WeakMap,y=new WeakMap,p=new WeakMap,c=new WeakSet,m=function(){if(!M(this,w,"f")){C(this,w,!0,"f"),M(this,d,"f").onmessage=void 0,M(this,d,"f").onclose=void 0;for(const e of M(this,y,"f").values())e.reject(F(e.error,`Protocol error (${e.method}): Target closed.`));M(this,y,"f").clear();for(const e of M(this,u,"f").values())e._onClosed();M(this,u,"f").clear(),this.emit(I.Disconnected)}};const T={Disconnected:Symbol("CDPSession.Disconnected")};class x extends a{constructor(e,t,i){super(),g.set(this,void 0),k.set(this,void 0),v.set(this,new Map),b.set(this,void 0),C(this,b,e,"f"),C(this,k,t,"f"),C(this,g,i,"f")}connection(){return M(this,b,"f")}send(e,...t){if(!M(this,b,"f"))return Promise.reject(new Error(`Protocol error (${e}): Session closed. Most likely the ${M(this,k,"f")} has been closed.`));const i=t.length?t[0]:void 0,s=M(this,b,"f")._rawSend({sessionId:M(this,g,"f"),method:e,params:i});return new Promise(((t,i)=>{M(this,v,"f").set(s,{resolve:t,reject:i,error:new r,method:e})}))}_onMessage(t){const i=t.id?M(this,v,"f").get(t.id):void 0;t.id&&i?(M(this,v,"f").delete(t.id),t.error?i.reject(W(i.error,i.method,t)):i.resolve(t.result)):(e(!t.id),this.emit(t.method,t.params))}async detach(){if(!M(this,b,"f"))throw new Error(`Session already detached. Most likely the ${M(this,k,"f")} has been closed.`);await M(this,b,"f").send("Target.detachFromTarget",{sessionId:M(this,g,"f")})}_onClosed(){for(const e of M(this,v,"f").values())e.reject(F(e.error,`Protocol error (${e.method}): Target closed.`));M(this,v,"f").clear(),C(this,b,void 0,"f"),this.emit(T.Disconnected)}id(){return M(this,g,"f")}}function W(e,t,i){let s=`Protocol error (${t}): ${i.error.message}`;return"data"in i.error&&(s+=` ${i.error.data}`),F(e,s,i.error.message)}function F(e,t,i){return e.message=t,e.originalMessage=null!=i?i:e.originalMessage,e}g=new WeakMap,k=new WeakMap,v=new WeakMap,b=new WeakMap;var S,N,R,q,D=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},A=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class K{constructor(e,t,i){S.set(this,void 0),N.set(this,!1),R.set(this,void 0),q.set(this,void 0),D(this,R,e,"f"),D(this,S,t,"f"),D(this,q,i,"f")}get _client(){return A(this,S,"f")}get _disposed(){return A(this,N,"f")}get _remoteObject(){return A(this,q,"f")}get _context(){return A(this,R,"f")}executionContext(){return A(this,R,"f")}async evaluate(e,...t){return await this.executionContext().evaluate(e,this,...t)}async evaluateHandle(e,...t){return await this.executionContext().evaluateHandle(e,this,...t)}async getProperty(e){return await this.evaluateHandle(((e,t)=>e[t]),e)}async getProperties(){e(A(this,q,"f").objectId);const t=await A(this,S,"f").send("Runtime.getProperties",{objectId:A(this,q,"f").objectId,ownProperties:!0}),i=new Map;for(const e of t.result)e.enumerable&&e.value&&i.set(e.name,be(A(this,R,"f"),e.value));return i}async jsonValue(){return A(this,q,"f").objectId?we((await A(this,S,"f").send("Runtime.callFunctionOn",{functionDeclaration:"function() { return this; }",objectId:A(this,q,"f").objectId,returnByValue:!0,awaitPromise:!0})).result):we(A(this,q,"f"))}asElement(){return null}async dispose(){A(this,N,"f")||(D(this,N,!0,"f"),await ye(A(this,S,"f"),A(this,q,"f")))}toString(){return A(this,q,"f").objectId?"JSHandle@"+(A(this,q,"f").subtype||A(this,q,"f").type):"JSHandle:"+we(A(this,q,"f"))}remoteObject(){return A(this,q,"f")}}async function O(e,t,i,s){const{nodes:a}=await e.send("Accessibility.queryAXTree",{objectId:t._remoteObject.objectId,accessibleName:i,role:s});return a.filter((e=>!e.role||"StaticText"!==e.role.value))}S=new WeakMap,N=new WeakMap,R=new WeakMap,q=new WeakMap;const j=e=>e.replace(/ +/g," ").trim(),$=new Set(["name","role"]),L=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g;function B(t){const i={},s=t.replace(L,((t,s,a,n)=>(s=s.trim(),e(function(e){return $.has(e)}(s),`Unknown aria attribute "${s}" in selector`),i[s]=j(n),"")));return s&&!i.name&&(i.name=j(s)),i}const H=async(e,t)=>{const i=e.executionContext(),{name:s,role:a}=B(t),n=await O(i._client,e,s,a);return n[0]&&n[0].backendDOMNodeId?i._adoptBackendNodeId(n[0].backendDOMNodeId):null},U=async(e,t)=>{const i=e.executionContext(),{name:s,role:a}=B(t),n=await O(i._client,e,s,a);return Promise.all(n.map((e=>i._adoptBackendNodeId(e.backendDOMNodeId))))},z={queryOne:H,waitFor:async(e,t,i)=>{const s={name:"ariaQuerySelector",pptrFunction:async t=>{const s=i.root||await e._document();return await H(s,t)}};return await e._waitForSelectorInPage(((e,t)=>globalThis.ariaQuerySelector(t)),t,i,s)},queryAll:U,queryAllArray:async(e,t)=>{const i=await U(e,t);return e.executionContext().evaluateHandle(((...e)=>e),...i)}};function V(e){const t={};if(e.queryOne){const i=e.queryOne;t.queryOne=async(e,t)=>{const s=await e.evaluateHandle(i,t);return s.asElement()||(await s.dispose(),null)},t.waitFor=(e,t,s)=>e._waitForSelectorInPage(i,t,s)}if(e.queryAll){const i=e.queryAll;t.queryAll=async(e,t)=>{const s=await e.evaluateHandle(i,t),a=await s.getProperties();await s.dispose();const n=[];for(const e of a.values()){const t=e.asElement();t&&n.push(t)}return n},t.queryAllArray=async(e,t)=>{const s=await e.evaluateHandle(i,t);return await s.evaluateHandle((e=>Array.from(e)))}}return t}const G=V({queryOne:(e,t)=>{if(!("querySelector"in e))throw new Error(`Could not invoke \`querySelector\` on node of type ${e.nodeName}.`);return e.querySelector(t)},queryAll:(e,t)=>{if(!("querySelectorAll"in e))throw new Error(`Could not invoke \`querySelectorAll\` on node of type ${e.nodeName}.`);return[...e.querySelectorAll(t)]}}),J=V({queryOne:(e,t)=>{let i=null;const s=e=>{const a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);do{const n=a.currentNode;n.shadowRoot&&s(n.shadowRoot),n instanceof ShadowRoot||n!==e&&!i&&n.matches(t)&&(i=n)}while(!i&&a.nextNode())};return e instanceof Document&&(e=e.documentElement),s(e),i},queryAll:(e,t)=>{const i=[],s=e=>{const a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);do{const n=a.currentNode;n.shadowRoot&&s(n.shadowRoot),n instanceof ShadowRoot||n!==e&&n.matches(t)&&i.push(n)}while(a.nextNode())};return e instanceof Document&&(e=e.documentElement),s(e),i}}),X=new Map([["aria",z],["pierce",J]]),Q=new Map(X);function Y(e){if(!/^[a-zA-Z]+\//.test(e))return{updatedSelector:e,queryHandler:G};const t=e.indexOf("/"),i=e.slice(0,t),s=e.slice(t+1),a=Q.get(i);if(!a)throw new Error(`Query set to use "${i}", but no query handler of that name was found`);return{updatedSelector:s,queryHandler:a}}var Z,ee,te,ie,se,ae,ne,oe,re,ce=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},he=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const de=(e,t,i)=>e.map((e=>({x:e.x+t,y:e.y+i})));class le extends K{constructor(e,t,i,s,a,n){super(e,t,i),Z.add(this),ee.set(this,void 0),te.set(this,void 0),ie.set(this,void 0),ce(this,ee,s,"f"),ce(this,te,a,"f"),ce(this,ie,n,"f")}async waitForSelector(t,i={}){const s=this._context.frame();e(s);const a=await s._secondaryWorld.executionContext(),n=await a._adoptElementHandle(this),o=await s._secondaryWorld.waitForSelector(t,{...i,root:n});if(await n.dispose(),!o)return null;const r=await s._mainWorld.executionContext(),c=await r._adoptElementHandle(o);return await o.dispose(),c}async waitForXPath(t,i={}){const s=this._context.frame();e(s);const a=await s._secondaryWorld.executionContext(),n=await a._adoptElementHandle(this);if(!(t=t.startsWith("//")?"."+t:t).startsWith(".//"))throw await n.dispose(),new Error("Unsupported xpath expression: "+t);const o=await s._secondaryWorld.waitForXPath(t,{...i,root:n});if(await n.dispose(),!o)return null;const r=await s._mainWorld.executionContext(),c=await r._adoptElementHandle(o);return await o.dispose(),c}asElement(){return this}async contentFrame(){const e=await this._client.send("DOM.describeNode",{objectId:this._remoteObject.objectId});return"string"!=typeof e.node.frameId?null:he(this,ie,"f").frame(e.node.frameId)}async clickablePoint(e){const[t,i]=await Promise.all([this._client.send("DOM.getContentQuads",{objectId:this._remoteObject.objectId}).catch(fe),he(this,te,"f")._client().send("Page.getLayoutMetrics")]);if(!t||!t.quads.length)throw new Error("Node is either not clickable or not an HTMLElement");const{clientWidth:s,clientHeight:a}=i.cssLayoutViewport||i.layoutViewport,{offsetX:n,offsetY:o}=await he(this,Z,"m",ae).call(this,he(this,ee,"f")),r=t.quads.map((e=>he(this,Z,"m",oe).call(this,e))).map((e=>de(e,n,o))).map((e=>he(this,Z,"m",re).call(this,e,s,a))).filter((e=>function(e){let t=0;for(let i=0;i<e.length;++i){const s=e[i],a=e[(i+1)%e.length];t+=(s.x*a.y-a.x*s.y)/2}return Math.abs(t)}(e)>1));if(!r.length)throw new Error("Node is either not clickable or not an HTMLElement");const c=r[0];if(e){let t=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER;for(const e of c)e.x<t&&(t=e.x),e.y<i&&(i=e.y);if(t!==Number.MAX_SAFE_INTEGER&&i!==Number.MAX_SAFE_INTEGER)return{x:t+e.x,y:i+e.y}}let h=0,d=0;for(const e of c)h+=e.x,d+=e.y;return{x:h/4,y:d/4}}async hover(){await he(this,Z,"m",se).call(this);const{x:e,y:t}=await this.clickablePoint();await he(this,te,"f").mouse.move(e,t)}async click(e={}){await he(this,Z,"m",se).call(this);const{x:t,y:i}=await this.clickablePoint(e.offset);await he(this,te,"f").mouse.click(t,i,e)}async drag(t){e(he(this,te,"f").isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await he(this,Z,"m",se).call(this);const i=await this.clickablePoint();return await he(this,te,"f").mouse.drag(i,t)}async dragEnter(e={items:[],dragOperationsMask:1}){await he(this,Z,"m",se).call(this);const t=await this.clickablePoint();await he(this,te,"f").mouse.dragEnter(t,e)}async dragOver(e={items:[],dragOperationsMask:1}){await he(this,Z,"m",se).call(this);const t=await this.clickablePoint();await he(this,te,"f").mouse.dragOver(t,e)}async drop(e={items:[],dragOperationsMask:1}){await he(this,Z,"m",se).call(this);const t=await this.clickablePoint();await he(this,te,"f").mouse.drop(t,e)}async dragAndDrop(e,t){await he(this,Z,"m",se).call(this);const i=await this.clickablePoint(),s=await e.clickablePoint();await he(this,te,"f").mouse.dragAndDrop(i,s,t)}async select(...t){for(const i of t)e(ge(i),'Values must be strings. Found value "'+i+'" of type "'+typeof i+'"');return this.evaluate(((e,t)=>{const i=new Set(t);if(!(e instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const s=new Set;if(e.multiple)for(const t of e.options)t.selected=i.has(t.value),t.selected&&s.add(t.value);else{for(const t of e.options)t.selected=!1;for(const t of e.options)if(i.has(t.value)){t.selected=!0,s.add(t.value);break}}return e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),[...s.values()]}),t)}async uploadFile(...t){const i=await this.evaluate((e=>e.multiple));let s;e(t.length<=1||i,"Multiple file uploads only work with <input type=file multiple>");try{s=await import("path")}catch(e){if(e instanceof TypeError)throw new Error("JSHandle#uploadFile can only be used in Node-like environments.");throw e}const a=t.map((e=>s.win32.isAbsolute(e)||s.posix.isAbsolute(e)?e:s.resolve(e))),{objectId:n}=this._remoteObject,{node:o}=await this._client.send("DOM.describeNode",{objectId:n}),{backendNodeId:r}=o;0===a.length?await this.evaluate((e=>{e.files=(new DataTransfer).files,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))})):await this._client.send("DOM.setFileInputFiles",{objectId:n,files:a,backendNodeId:r})}async tap(){await he(this,Z,"m",se).call(this);const{x:e,y:t}=await this.clickablePoint();await he(this,te,"f").touchscreen.tap(e,t)}async focus(){await this.evaluate((e=>{if(!(e instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return e.focus()}))}async type(e,t){await this.focus(),await he(this,te,"f").keyboard.type(e,t)}async press(e,t){await this.focus(),await he(this,te,"f").keyboard.press(e,t)}async boundingBox(){const e=await he(this,Z,"m",ne).call(this);if(!e)return null;const{offsetX:t,offsetY:i}=await he(this,Z,"m",ae).call(this,he(this,ee,"f")),s=e.model.border,a=Math.min(s[0],s[2],s[4],s[6]),n=Math.min(s[1],s[3],s[5],s[7]);return{x:a+t,y:n+i,width:Math.max(s[0],s[2],s[4],s[6])-a,height:Math.max(s[1],s[3],s[5],s[7])-n}}async boxModel(){const e=await he(this,Z,"m",ne).call(this);if(!e)return null;const{offsetX:t,offsetY:i}=await he(this,Z,"m",ae).call(this,he(this,ee,"f")),{content:s,padding:a,border:n,margin:o,width:r,height:c}=e.model;return{content:de(he(this,Z,"m",oe).call(this,s),t,i),padding:de(he(this,Z,"m",oe).call(this,a),t,i),border:de(he(this,Z,"m",oe).call(this,n),t,i),margin:de(he(this,Z,"m",oe).call(this,o),t,i),width:r,height:c}}async screenshot(t={}){let i=!1,s=await this.boundingBox();e(s,"Node is either not visible or not an HTMLElement");const a=he(this,te,"f").viewport();if(a&&(s.width>a.width||s.height>a.height)){const e={width:Math.max(a.width,Math.ceil(s.width)),height:Math.max(a.height,Math.ceil(s.height))};await he(this,te,"f").setViewport(Object.assign({},a,e)),i=!0}await he(this,Z,"m",se).call(this),s=await this.boundingBox(),e(s,"Node is either not visible or not an HTMLElement"),e(0!==s.width,"Node has 0 width."),e(0!==s.height,"Node has 0 height.");const n=await this._client.send("Page.getLayoutMetrics"),{pageX:o,pageY:r}=n.cssVisualViewport||n.layoutViewport,c=Object.assign({},s);c.x+=o,c.y+=r;const h=await he(this,te,"f").screenshot(Object.assign({},{clip:c},t));return i&&a&&await he(this,te,"f").setViewport(a),h}async $(t){const{updatedSelector:i,queryHandler:s}=Y(t);return e(s.queryOne,"Cannot handle queries for a single element with the given selector"),await s.queryOne(this,i)}async $$(t){const{updatedSelector:i,queryHandler:s}=Y(t);return e(s.queryAll,"Cannot handle queries for a multiple element with the given selector"),await s.queryAll(this,i)}async $eval(e,t,...i){const s=await this.$(e);if(!s)throw new Error(`Error: failed to find element matching selector "${e}"`);const a=await s.evaluate(t,...i);return await s.dispose(),a}async $$eval(t,i,...s){const{updatedSelector:a,queryHandler:n}=Y(t);e(n.queryAllArray);const o=await n.queryAllArray(this,a),r=await o.evaluate(i,...s);return await o.dispose(),r}async $x(e){const t=await this.evaluateHandle(((e,t)=>{const i=(e.ownerDocument||document).evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),s=[];let a;for(;a=i.iterateNext();)s.push(a);return s}),e),i=await t.getProperties();await t.dispose();const s=[];for(const e of i.values()){const t=e.asElement();t&&s.push(t)}return s}async isIntersectingViewport(e){const{threshold:t=0}=null!=e?e:{};return await this.evaluate((async(e,t)=>{const i=await new Promise((t=>{const i=new IntersectionObserver((e=>{t(e[0].intersectionRatio),i.disconnect()}));i.observe(e)}));return 1===t?1===i:i>t}),t)}}ee=new WeakMap,te=new WeakMap,ie=new WeakMap,Z=new WeakSet,se=async function(){const e=await this.evaluate((async e=>e.isConnected?e.nodeType!==Node.ELEMENT_NODE?"Node is not of type HTMLElement":void 0:"Node is detached from document"));if(e)throw new Error(e);try{await this._client.send("DOM.scrollIntoViewIfNeeded",{objectId:this._remoteObject.objectId})}catch(e){await this.evaluate((async(e,t)=>{t&&1===await(async()=>await new Promise((t=>{const i=new IntersectionObserver((e=>{t(e[0].intersectionRatio),i.disconnect()}));i.observe(e)})))()||e.scrollIntoView({block:"center",inline:"center",behavior:"instant"})}),he(this,te,"f").isJavaScriptEnabled())}},ae=async function(e){let t=0,i=0,s=e;for(;s&&s.parentFrame();){const e=s.parentFrame();if(!s.isOOPFrame()||!e){s=e;continue}const{backendNodeId:a}=await e._client().send("DOM.getFrameOwner",{frameId:s._id}),n=await e._client().send("DOM.getBoxModel",{backendNodeId:a});if(!n)break;const o=n.model.content,r=he(this,Z,"m",oe).call(this,o)[0];t+=r.x,i+=r.y,s=e}return{offsetX:t,offsetY:i}},ne=function(){const e={objectId:this._remoteObject.objectId};return this._client.send("DOM.getBoxModel",e).catch((e=>fe(e)))},oe=function(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},{x:e[6],y:e[7]}]},re=function(e,t,i){return e.map((e=>({x:Math.min(Math.max(e.x,0),t),y:Math.min(Math.max(e.y,0),i)})))};const fe=s("puppeteer:error");function ue(e){if(e.exception)return e.exception.description||e.exception.value;let t=e.text;if(e.stackTrace)for(const i of e.stackTrace.callFrames){const e=i.url+":"+i.lineNumber+":"+i.columnNumber;t+=`\n    at ${i.functionName||"<anonymous>"} (${e})`}return t}function we(t){if(e(!t.objectId,"Cannot extract value when objectId is given"),t.unserializableValue){if("bigint"===t.type&&"undefined"!=typeof BigInt)return BigInt(t.unserializableValue.replace("n",""));switch(t.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+t.unserializableValue)}}return t.value}async function ye(e,t){t.objectId&&await e.send("Runtime.releaseObject",{objectId:t.objectId}).catch((e=>{fe(e)}))}function pe(e,t,i){return e.on(t,i),{emitter:e,eventName:t,handler:i}}function me(e){for(const t of e)t.emitter.removeListener(t.eventName,t.handler);e.length=0}const ge=e=>"string"==typeof e||e instanceof String,ke=e=>"number"==typeof e||e instanceof Number;async function ve(e,t,i,s,a){let n,r,c;const h=new Promise(((e,t)=>{r=e,c=t})),d=pe(e,t,(async e=>{await i(e)&&r(e)}));function l(){me([d]),clearTimeout(n)}s&&(n=setTimeout((()=>{c(new o("Timeout exceeded while waiting for event"))}),s));const f=await Promise.race([h,a]).then((e=>(l(),e)),(e=>{throw l(),e}));if(We(f))throw f;return f}function be(e,t){const i=e.frame();if("node"===t.subtype&&i){const s=i._frameManager;return new le(e,e._client,t,i,s.page(),s)}return new K(e,e._client,t)}function Ce(t,...i){return ge(t)?(e(0===i.length,"Cannot evaluate a string with arguments"),t):`(${t})(${i.map((function(e){return Object.is(e,void 0)?"undefined":JSON.stringify(e)})).join(",")})`}function Me(e,t){return Ce((function(e,t){const i=window,s=i[t];i[t]=(...i)=>{const a=window[t];let n=a.callbacks;n||(n=new Map,a.callbacks=n);const o=(a.lastSeq||0)+1;a.lastSeq=o;const r=new Promise(((e,t)=>n.set(o,{resolve:e,reject:t})));return s(JSON.stringify({type:e,name:t,seq:o,args:i})),r}}),e,t)}function _e(e,t){return`\n    (() => {\n      ${t?`const predicateQueryHandler = ${t};`:""}\n      const checkWaitForOptions = ${function(e,t,i){if(!e)return i;if(!t&&!i)return e;const s=e.nodeType===Node.TEXT_NODE?e.parentElement:e,a=window.getComputedStyle(s),n=a&&"hidden"!==a.visibility&&function(){const e=s.getBoundingClientRect();return!!(e.top||e.bottom||e.width||e.height)}();return t===n||i===!n?e:null}};\n      return (${e})(...args)\n    })() `}async function Ee(e,t,i){let s;const a=new o(`waiting for ${t} failed: timeout ${i}ms exceeded`),n=new Promise(((e,t)=>s=t));let r=null;i&&(r=setTimeout((()=>s(a)),i));try{return await Promise.race([e,n])}finally{r&&clearTimeout(r)}}let Ie=null;async function Pe(){return Ie||(Ie=await import("fs")),Ie}async function Te(e,t){const i=[];if(t){let s;try{s=(await Pe()).promises}catch(e){if(e instanceof TypeError)throw new Error("Cannot write to a path outside of a Node-like environment.");throw e}const a=await s.open(t,"w+");for await(const t of e)i.push(t),await a.writeFile(t);await a.close()}else for await(const t of e)i.push(t);try{return Buffer.concat(i)}catch(e){return null}}async function xe(e,i){if(!t)throw new Error("Cannot create a stream outside of Node.js environment.");const{Readable:s}=await import("stream");let a=!1;return new s({async read(t){if(a)return;const s=await e.send("IO.read",{handle:i,size:t});this.push(s.data,s.base64Encoded?"base64":void 0),s.eof&&(a=!0,await e.send("IO.close",{handle:i}),this.push(null))}})}function We(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}function Fe(e,t=5e3){let i=e=>{},s=e=>{};const a=new Promise(((e,t)=>{i=e,s=t})),n=setTimeout((()=>{s(new Error(e))}),t);return{promise:a,resolve:e=>{clearTimeout(n),i(e)},reject:e=>{clearTimeout(n),s(e)}}}var Se,Ne,Re,qe,De,Ae,Ke,Oe,je,$e,Le,Be,He,Ue=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},ze=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Ve{constructor(e){Se.set(this,void 0),Ue(this,Se,e,"f")}async snapshot(e={}){var t,i;const{interestingOnly:s=!0,root:a=null}=e,{nodes:n}=await ze(this,Se,"f").send("Accessibility.getFullAXTree");let o;if(a){const{node:e}=await ze(this,Se,"f").send("DOM.describeNode",{objectId:a._remoteObject.objectId});o=e.backendNodeId}const r=Ge.createTree(n);let c=r;if(o&&(c=r.find((e=>e.payload.backendDOMNodeId===o)),!c))return null;if(!s)return null!==(t=this.serializeTree(c)[0])&&void 0!==t?t:null;const h=new Set;return this.collectInterestingNodes(h,r,!1),h.has(c)&&null!==(i=this.serializeTree(c,h)[0])&&void 0!==i?i:null}serializeTree(e,t){const i=[];for(const s of e.children)i.push(...this.serializeTree(s,t));if(t&&!t.has(e))return i;const s=e.serialize();return i.length&&(s.children=i),[s]}collectInterestingNodes(e,t,i){if(t.isInteresting(i)&&e.add(t),!t.isLeafNode()){i=i||t.isControl();for(const s of t.children)this.collectInterestingNodes(e,s,i)}}}Se=new WeakMap;class Ge{constructor(e){Ne.add(this),this.children=[],Re.set(this,!1),qe.set(this,!1),De.set(this,!1),Ae.set(this,!1),Ke.set(this,void 0),Oe.set(this,void 0),je.set(this,void 0),$e.set(this,void 0),this.payload=e,Ue(this,Ke,this.payload.name?this.payload.name.value:"","f"),Ue(this,Oe,this.payload.role?this.payload.role.value:"Unknown","f"),Ue(this,je,this.payload.ignored,"f");for(const e of this.payload.properties||[])"editable"===e.name&&(Ue(this,Re,"richtext"===e.value.value,"f"),Ue(this,qe,!0,"f")),"focusable"===e.name&&Ue(this,De,e.value.value,"f"),"hidden"===e.name&&Ue(this,Ae,e.value.value,"f")}find(e){if(e(this))return this;for(const t of this.children){const i=t.find(e);if(i)return i}return null}isLeafNode(){if(!this.children.length)return!0;if(ze(this,Ne,"m",Le).call(this)||ze(this,Ne,"m",Be).call(this))return!0;switch(ze(this,Oe,"f")){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!(ze(this,Ne,"m",He).call(this)||(!ze(this,De,"f")||!ze(this,Ke,"f"))&&("heading"!==ze(this,Oe,"f")||!ze(this,Ke,"f")))}isControl(){switch(ze(this,Oe,"f")){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(e){return"Ignored"!==ze(this,Oe,"f")&&!ze(this,Ae,"f")&&!ze(this,je,"f")&&(!(!ze(this,De,"f")&&!ze(this,Re,"f"))||!!this.isControl()||!e&&this.isLeafNode()&&!!ze(this,Ke,"f"))}serialize(){const e=new Map;for(const t of this.payload.properties||[])e.set(t.name.toLowerCase(),t.value.value);this.payload.name&&e.set("name",this.payload.name.value),this.payload.value&&e.set("value",this.payload.value.value),this.payload.description&&e.set("description",this.payload.description.value);const t={role:ze(this,Oe,"f")},i=["name","value","description","keyshortcuts","roledescription","valuetext"];for(const a of i)e.has(a)&&(t[a]=(s=a,e.get(s)));var s;const a=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],n=t=>e.get(t);for(const e of a)"focused"===e&&"RootWebArea"===ze(this,Oe,"f")||n(e)&&(t[e]=n(e));const o=["checked","pressed"];for(const i of o){if(!e.has(i))continue;const s=e.get(i);t[i]="mixed"===s?"mixed":"true"===s}const r=["level","valuemax","valuemin"],c=t=>e.get(t);for(const i of r)e.has(i)&&(t[i]=c(i));const h=["autocomplete","haspopup","invalid","orientation"],d=t=>e.get(t);for(const e of h){const i=d(e);i&&"false"!==i&&(t[e]=d(e))}return t}static createTree(e){const t=new Map;for(const i of e)t.set(i.nodeId,new Ge(i));for(const e of t.values())for(const i of e.payload.childIds||[])e.children.push(t.get(i));return t.values().next().value}}Re=new WeakMap,qe=new WeakMap,De=new WeakMap,Ae=new WeakMap,Ke=new WeakMap,Oe=new WeakMap,je=new WeakMap,$e=new WeakMap,Ne=new WeakSet,Le=function(){return!(ze(this,Re,"f")||!ze(this,qe,"f")&&"textbox"!==ze(this,Oe,"f")&&"searchbox"!==ze(this,Oe,"f"))},Be=function(){const e=ze(this,Oe,"f");return"LineBreak"===e||"text"===e||"InlineTextBox"===e},He=function e(){if(void 0===ze(this,$e,"f")){Ue(this,$e,!1,"f");for(const t of this.children)if(ze(t,De,"f")||ze(t,Ne,"m",e).call(t)){Ue(this,$e,!0,"f");break}}return ze(this,$e,"f")};var Je,Xe,Qe,Ye,Ze=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},et=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class tt{constructor(e,t,i,s){Je.set(this,void 0),Xe.set(this,void 0),Qe.set(this,void 0),Ye.set(this,void 0),Ze(this,Je,e,"f"),Ze(this,Xe,t,"f"),Ze(this,Qe,i,"f"),Ze(this,Ye,s,"f")}type(){return et(this,Je,"f")}text(){return et(this,Xe,"f")}args(){return et(this,Qe,"f")}location(){var e;return null!==(e=et(this,Ye,"f")[0])&&void 0!==e?e:{}}stackTrace(){return et(this,Ye,"f")}}Je=new WeakMap,Xe=new WeakMap,Qe=new WeakMap,Ye=new WeakMap;var it,st,at=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const nt=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;class ot{constructor(e,t,i){it.add(this),this._client=e,this._world=i,this._contextId=t.id,this._contextName=t.name}frame(){return this._world?this._world.frame():null}async evaluate(e,...t){return await at(this,it,"m",st).call(this,!0,e,...t)}async evaluateHandle(e,...t){return at(this,it,"m",st).call(this,!1,e,...t)}async queryObjects(t){return e(!t._disposed,"Prototype JSHandle is disposed!"),e(t._remoteObject.objectId,"Prototype JSHandle must not be referencing primitive value"),be(this,(await this._client.send("Runtime.queryObjects",{prototypeObjectId:t._remoteObject.objectId})).objects)}async _adoptBackendNodeId(e){const{object:t}=await this._client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:this._contextId});return be(this,t)}async _adoptElementHandle(t){e(t.executionContext()!==this,"Cannot adopt handle that already belongs to this execution context"),e(this._world,"Cannot adopt handle without DOMWorld");const i=await this._client.send("DOM.describeNode",{objectId:t._remoteObject.objectId});return await this._adoptBackendNodeId(i.node.backendNodeId)}}it=new WeakSet,st=async function(e,t,...i){const s="//# sourceURL=pptr://__puppeteer_evaluation_script__";if(ge(t)){const i=this._contextId,a=t,n=nt.test(a)?a:a+"\n"+s,{exceptionDetails:o,result:r}=await this._client.send("Runtime.evaluate",{expression:n,contextId:i,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(c);if(o)throw new Error("Evaluation failed: "+ue(o));return e?we(r):be(this,r)}if("function"!=typeof t)throw new Error(`Expected to get |string| or |function| as the first argument, but got "${t}" instead.`);let a,n=t.toString();try{new Function("("+n+")")}catch(e){n=n.startsWith("async ")?"async function "+n.substring("async ".length):"function "+n;try{new Function("("+n+")")}catch(e){throw new Error("Passed function is not well-serializable!")}}try{a=this._client.send("Runtime.callFunctionOn",{functionDeclaration:n+"\n"+s+"\n",executionContextId:this._contextId,arguments:i.map(function(e){if("bigint"==typeof e)return{unserializableValue:`${e.toString()}n`};if(Object.is(e,-0))return{unserializableValue:"-0"};if(Object.is(e,1/0))return{unserializableValue:"Infinity"};if(Object.is(e,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(e,NaN))return{unserializableValue:"NaN"};const t=e&&e instanceof K?e:null;if(t){if(t._context!==this)throw new Error("JSHandles can be evaluated only in the context they were created!");if(t._disposed)throw new Error("JSHandle is disposed!");return t._remoteObject.unserializableValue?{unserializableValue:t._remoteObject.unserializableValue}:t._remoteObject.objectId?{objectId:t._remoteObject.objectId}:{value:t._remoteObject.value}}return{value:e}}.bind(this)),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Recursive objects are not allowed."),e}const{exceptionDetails:o,result:r}=await a.catch(c);if(o)throw new Error("Evaluation failed: "+ue(o));return e?we(r):be(this,r);function c(e){if(e.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(e.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed"))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e}};var rt,ct,ht,dt,lt,ft,ut,wt,yt,pt,mt,gt,kt,vt,bt,Ct,Mt,_t,Et,It,Pt,Tt,xt=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Wt=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Ft{constructor(e){rt.set(this,void 0),ct.set(this,void 0),xt(this,rt,new St(e),"f"),xt(this,ct,new Nt(e),"f")}async startJSCoverage(e={}){return await Wt(this,rt,"f").start(e)}async stopJSCoverage(){return await Wt(this,rt,"f").stop()}async startCSSCoverage(e={}){return await Wt(this,ct,"f").start(e)}async stopCSSCoverage(){return await Wt(this,ct,"f").stop()}}rt=new WeakMap,ct=new WeakMap;class St{constructor(e){ht.add(this),dt.set(this,void 0),lt.set(this,!1),ft.set(this,new Map),ut.set(this,new Map),wt.set(this,[]),yt.set(this,!1),pt.set(this,!1),mt.set(this,!1),xt(this,dt,e,"f")}async start(t={}){e(!Wt(this,lt,"f"),"JSCoverage is already enabled");const{resetOnNavigation:i=!0,reportAnonymousScripts:s=!1,includeRawScriptCoverage:a=!1}=t;xt(this,yt,i,"f"),xt(this,pt,s,"f"),xt(this,mt,a,"f"),xt(this,lt,!0,"f"),Wt(this,ft,"f").clear(),Wt(this,ut,"f").clear(),xt(this,wt,[pe(Wt(this,dt,"f"),"Debugger.scriptParsed",Wt(this,ht,"m",kt).bind(this)),pe(Wt(this,dt,"f"),"Runtime.executionContextsCleared",Wt(this,ht,"m",gt).bind(this))],"f"),await Promise.all([Wt(this,dt,"f").send("Profiler.enable"),Wt(this,dt,"f").send("Profiler.startPreciseCoverage",{callCount:Wt(this,mt,"f"),detailed:!0}),Wt(this,dt,"f").send("Debugger.enable"),Wt(this,dt,"f").send("Debugger.setSkipAllPauses",{skip:!0})])}async stop(){e(Wt(this,lt,"f"),"JSCoverage is not enabled"),xt(this,lt,!1,"f");const t=await Promise.all([Wt(this,dt,"f").send("Profiler.takePreciseCoverage"),Wt(this,dt,"f").send("Profiler.stopPreciseCoverage"),Wt(this,dt,"f").send("Profiler.disable"),Wt(this,dt,"f").send("Debugger.disable")]);me(Wt(this,wt,"f"));const i=[],s=t[0];for(const e of s.result){let t=Wt(this,ft,"f").get(e.scriptId);!t&&Wt(this,pt,"f")&&(t="debugger://VM"+e.scriptId);const s=Wt(this,ut,"f").get(e.scriptId);if(void 0===s||void 0===t)continue;const a=[];for(const t of e.functions)a.push(...t.ranges);const n=Rt(a);Wt(this,mt,"f")?i.push({url:t,ranges:n,text:s,rawScriptCoverage:e}):i.push({url:t,ranges:n,text:s})}return i}}dt=new WeakMap,lt=new WeakMap,ft=new WeakMap,ut=new WeakMap,wt=new WeakMap,yt=new WeakMap,pt=new WeakMap,mt=new WeakMap,ht=new WeakSet,gt=function(){Wt(this,yt,"f")&&(Wt(this,ft,"f").clear(),Wt(this,ut,"f").clear())},kt=async function(e){if("pptr://__puppeteer_evaluation_script__"!==e.url&&(e.url||Wt(this,pt,"f")))try{const t=await Wt(this,dt,"f").send("Debugger.getScriptSource",{scriptId:e.scriptId});Wt(this,ft,"f").set(e.scriptId,e.url),Wt(this,ut,"f").set(e.scriptId,t.scriptSource)}catch(e){fe(e)}};class Nt{constructor(e){vt.add(this),bt.set(this,void 0),Ct.set(this,!1),Mt.set(this,new Map),_t.set(this,new Map),Et.set(this,[]),It.set(this,!1),xt(this,bt,e,"f")}async start(t={}){e(!Wt(this,Ct,"f"),"CSSCoverage is already enabled");const{resetOnNavigation:i=!0}=t;xt(this,It,i,"f"),xt(this,Ct,!0,"f"),Wt(this,Mt,"f").clear(),Wt(this,_t,"f").clear(),xt(this,Et,[pe(Wt(this,bt,"f"),"CSS.styleSheetAdded",Wt(this,vt,"m",Tt).bind(this)),pe(Wt(this,bt,"f"),"Runtime.executionContextsCleared",Wt(this,vt,"m",Pt).bind(this))],"f"),await Promise.all([Wt(this,bt,"f").send("DOM.enable"),Wt(this,bt,"f").send("CSS.enable"),Wt(this,bt,"f").send("CSS.startRuleUsageTracking")])}async stop(){e(Wt(this,Ct,"f"),"CSSCoverage is not enabled"),xt(this,Ct,!1,"f");const t=await Wt(this,bt,"f").send("CSS.stopRuleUsageTracking");await Promise.all([Wt(this,bt,"f").send("CSS.disable"),Wt(this,bt,"f").send("DOM.disable")]),me(Wt(this,Et,"f"));const i=new Map;for(const e of t.ruleUsage){let t=i.get(e.styleSheetId);t||(t=[],i.set(e.styleSheetId,t)),t.push({startOffset:e.startOffset,endOffset:e.endOffset,count:e.used?1:0})}const s=[];for(const t of Wt(this,Mt,"f").keys()){const a=Wt(this,Mt,"f").get(t);e(void 0!==a,`Stylesheet URL is undefined (styleSheetId=${t})`);const n=Wt(this,_t,"f").get(t);e(void 0!==n,`Stylesheet text is undefined (styleSheetId=${t})`);const o=Rt(i.get(t)||[]);s.push({url:a,ranges:o,text:n})}return s}}function Rt(e){const t=[];for(const i of e)t.push({offset:i.startOffset,type:0,range:i}),t.push({offset:i.endOffset,type:1,range:i});t.sort(((e,t)=>{if(e.offset!==t.offset)return e.offset-t.offset;if(e.type!==t.type)return t.type-e.type;const i=e.range.endOffset-e.range.startOffset,s=t.range.endOffset-t.range.startOffset;return 0===e.type?s-i:i-s}));const i=[],s=[];let a=0;for(const e of t){if(i.length&&a<e.offset&&i[i.length-1]>0){const t=s[s.length-1];t&&t.end===a?t.end=e.offset:s.push({start:a,end:e.offset})}a=e.offset,0===e.type?i.push(e.range.count):i.pop()}return s.filter((e=>e.end-e.start>1))}bt=new WeakMap,Ct=new WeakMap,Mt=new WeakMap,_t=new WeakMap,Et=new WeakMap,It=new WeakMap,vt=new WeakSet,Pt=function(){Wt(this,It,"f")&&(Wt(this,Mt,"f").clear(),Wt(this,_t,"f").clear())},Tt=async function(e){const t=e.header;if(t.sourceURL)try{const e=await Wt(this,bt,"f").send("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});Wt(this,Mt,"f").set(t.styleSheetId,t.sourceURL),Wt(this,_t,"f").set(t.styleSheetId,e.text)}catch(e){fe(e)}};var qt,Dt,At,Kt,Ot,jt=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},$t=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Lt{constructor(e,t,i,s=""){qt.set(this,void 0),Dt.set(this,void 0),At.set(this,void 0),Kt.set(this,void 0),Ot.set(this,!1),jt(this,qt,e,"f"),jt(this,Dt,t,"f"),jt(this,At,i,"f"),jt(this,Kt,s,"f")}type(){return $t(this,Dt,"f")}message(){return $t(this,At,"f")}defaultValue(){return $t(this,Kt,"f")}async accept(t){e(!$t(this,Ot,"f"),"Cannot accept dialog which is already handled!"),jt(this,Ot,!0,"f"),await $t(this,qt,"f").send("Page.handleJavaScriptDialog",{accept:!0,promptText:t})}async dismiss(){e(!$t(this,Ot,"f"),"Cannot dismiss dialog which is already handled!"),jt(this,Ot,!0,"f"),await $t(this,qt,"f").send("Page.handleJavaScriptDialog",{accept:!1})}}qt=new WeakMap,Dt=new WeakMap,At=new WeakMap,Kt=new WeakMap,Ot=new WeakMap;var Bt,Ht,Ut,zt=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Vt=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Gt{constructor(e){Bt.set(this,void 0),Ht.set(this,!1),Ut.set(this,!1),zt(this,Bt,e,"f")}async emulateViewport(e){const t=e.isMobile||!1,i=e.width,s=e.height,a=e.deviceScaleFactor||1,n=e.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},o=e.hasTouch||!1;await Promise.all([Vt(this,Bt,"f").send("Emulation.setDeviceMetricsOverride",{mobile:t,width:i,height:s,deviceScaleFactor:a,screenOrientation:n}),Vt(this,Bt,"f").send("Emulation.setTouchEmulationEnabled",{enabled:o})]);const r=Vt(this,Ht,"f")!==t||Vt(this,Ut,"f")!==o;return zt(this,Ht,t,"f"),zt(this,Ut,o,"f"),r}}Bt=new WeakMap,Ht=new WeakMap,Ut=new WeakMap;var Jt,Xt,Qt,Yt=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Zt=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class ei{constructor(e,t){Jt.set(this,void 0),Xt.set(this,void 0),Qt.set(this,!1),Yt(this,Jt,e,"f"),Yt(this,Xt,"selectSingle"!==t.mode,"f")}isMultiple(){return Zt(this,Xt,"f")}async accept(t){e(!Zt(this,Qt,"f"),"Cannot accept FileChooser which is already handled!"),Yt(this,Qt,!0,"f"),await Zt(this,Jt,"f").uploadFile(...t)}cancel(){e(!Zt(this,Qt,"f"),"Cannot cancel FileChooser which is already handled!"),Yt(this,Qt,!0,"f")}}Jt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap;var ti,ii,si,ai,ni,oi,ri,ci,hi,di,li,fi,ui,wi,yi,pi,mi,gi,ki,vi,bi,Ci=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Mi=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class _i{constructor(e,t,i,s,a,n){ti.add(this),this._failureText=null,this._response=null,this._fromMemoryCache=!1,ii.set(this,void 0),si.set(this,void 0),ai.set(this,void 0),ni.set(this,!1),oi.set(this,void 0),ri.set(this,void 0),ci.set(this,void 0),hi.set(this,void 0),di.set(this,{}),li.set(this,void 0),fi.set(this,void 0),ui.set(this,null),wi.set(this,null),yi.set(this,{action:bi.None}),pi.set(this,void 0),mi.set(this,void 0),Ci(this,ii,e,"f"),this._requestId=a.requestId,Ci(this,si,a.requestId===a.loaderId&&"Document"===a.type,"f"),this._interceptionId=i,Ci(this,ai,s,"f"),Ci(this,oi,a.request.url,"f"),Ci(this,ri,(a.type||"other").toLowerCase(),"f"),Ci(this,ci,a.request.method,"f"),Ci(this,hi,a.request.postData,"f"),Ci(this,li,t,"f"),this._redirectChain=n,Ci(this,fi,{},"f"),Ci(this,pi,[],"f"),Ci(this,mi,a.initiator,"f");for(const[e,t]of Object.entries(a.request.headers))Mi(this,di,"f")[e.toLowerCase()]=t}get client(){return Mi(this,ii,"f")}url(){return Mi(this,oi,"f")}continueRequestOverrides(){return e(Mi(this,ai,"f"),"Request Interception is not enabled!"),Mi(this,fi,"f")}responseForRequest(){return e(Mi(this,ai,"f"),"Request Interception is not enabled!"),Mi(this,ui,"f")}abortErrorReason(){return e(Mi(this,ai,"f"),"Request Interception is not enabled!"),Mi(this,wi,"f")}interceptResolutionState(){return Mi(this,ai,"f")?Mi(this,ni,"f")?{action:bi.AlreadyHandled}:{...Mi(this,yi,"f")}:{action:bi.Disabled}}isInterceptResolutionHandled(){return Mi(this,ni,"f")}enqueueInterceptAction(e){Mi(this,pi,"f").push(e)}async finalizeInterceptions(){await Mi(this,pi,"f").reduce(((e,t)=>e.then(t)),Promise.resolve());const{action:e}=this.interceptResolutionState();switch(e){case"abort":return Mi(this,ti,"m",vi).call(this,Mi(this,wi,"f"));case"respond":if(null===Mi(this,ui,"f"))throw new Error("Response is missing for the interception");return Mi(this,ti,"m",ki).call(this,Mi(this,ui,"f"));case"continue":return Mi(this,ti,"m",gi).call(this,Mi(this,fi,"f"))}}resourceType(){return Mi(this,ri,"f")}method(){return Mi(this,ci,"f")}postData(){return Mi(this,hi,"f")}headers(){return Mi(this,di,"f")}response(){return this._response}frame(){return Mi(this,li,"f")}isNavigationRequest(){return Mi(this,si,"f")}initiator(){return Mi(this,mi,"f")}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async continue(t={},i){if(!Mi(this,oi,"f").startsWith("data:")){if(e(Mi(this,ai,"f"),"Request Interception is not enabled!"),e(!Mi(this,ni,"f"),"Request is already handled!"),void 0===i)return Mi(this,ti,"m",gi).call(this,t);if(Ci(this,fi,t,"f"),void 0===Mi(this,yi,"f").priority||i>Mi(this,yi,"f").priority)Ci(this,yi,{action:bi.Continue,priority:i},"f");else if(i===Mi(this,yi,"f").priority){if("abort"===Mi(this,yi,"f").action||"respond"===Mi(this,yi,"f").action)return;Mi(this,yi,"f").action=bi.Continue}}}async respond(t,i){if(!Mi(this,oi,"f").startsWith("data:")){if(e(Mi(this,ai,"f"),"Request Interception is not enabled!"),e(!Mi(this,ni,"f"),"Request is already handled!"),void 0===i)return Mi(this,ti,"m",ki).call(this,t);if(Ci(this,ui,t,"f"),void 0===Mi(this,yi,"f").priority||i>Mi(this,yi,"f").priority)Ci(this,yi,{action:bi.Respond,priority:i},"f");else if(i===Mi(this,yi,"f").priority){if("abort"===Mi(this,yi,"f").action)return;Mi(this,yi,"f").action=bi.Respond}}}async abort(t="failed",i){if(Mi(this,oi,"f").startsWith("data:"))return;const s=Ei[t];if(e(s,"Unknown error code: "+t),e(Mi(this,ai,"f"),"Request Interception is not enabled!"),e(!Mi(this,ni,"f"),"Request is already handled!"),void 0===i)return Mi(this,ti,"m",vi).call(this,s);Ci(this,wi,s,"f"),(void 0===Mi(this,yi,"f").priority||i>=Mi(this,yi,"f").priority)&&Ci(this,yi,{action:bi.Abort,priority:i},"f")}}ii=new WeakMap,si=new WeakMap,ai=new WeakMap,ni=new WeakMap,oi=new WeakMap,ri=new WeakMap,ci=new WeakMap,hi=new WeakMap,di=new WeakMap,li=new WeakMap,fi=new WeakMap,ui=new WeakMap,wi=new WeakMap,yi=new WeakMap,pi=new WeakMap,mi=new WeakMap,ti=new WeakSet,gi=async function(e={}){const{url:t,method:i,postData:s,headers:a}=e;Ci(this,ni,!0,"f");const n=s?Buffer.from(s).toString("base64"):void 0;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await Mi(this,ii,"f").send("Fetch.continueRequest",{requestId:this._interceptionId,url:t,method:i,postData:n,headers:a?Ii(a):void 0}).catch((e=>(Ci(this,ni,!1,"f"),Pi(e))))},ki=async function(e){Ci(this,ni,!0,"f");const t=e.body&&ge(e.body)?Buffer.from(e.body):e.body||null,i={};if(e.headers)for(const t of Object.keys(e.headers)){const s=e.headers[t];i[t.toLowerCase()]=Array.isArray(s)?s.map((e=>String(e))):String(s)}e.contentType&&(i["content-type"]=e.contentType),t&&!("content-length"in i)&&(i["content-length"]=String(Buffer.byteLength(t)));const s=e.status||200;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await Mi(this,ii,"f").send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:s,responsePhrase:Ti[s],responseHeaders:Ii(i),body:t?t.toString("base64"):void 0}).catch((e=>(Ci(this,ni,!1,"f"),Pi(e))))},vi=async function(e){if(Ci(this,ni,!0,"f"),void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await Mi(this,ii,"f").send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(Pi)},function(e){e.Abort="abort",e.Respond="respond",e.Continue="continue",e.Disabled="disabled",e.None="none",e.AlreadyHandled="already-handled"}(bi||(bi={}));const Ei={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function Ii(e){const t=[];for(const i in e){const s=e[i];if(!Object.is(s,void 0)){const e=Array.isArray(s)?s:[s];t.push(...e.map((e=>({name:i,value:e+""}))))}}return t}async function Pi(e){if(["Invalid header"].includes(e.originalMessage))throw e;fe(e)}const Ti={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};var xi,Wi,Fi,Si,Ni,Ri,qi=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Di=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Ai{constructor(e){xi.set(this,void 0),Wi.set(this,void 0),Fi.set(this,void 0),Si.set(this,void 0),Ni.set(this,void 0),Ri.set(this,void 0),qi(this,xi,e.subjectName,"f"),qi(this,Wi,e.issuer,"f"),qi(this,Fi,e.validFrom,"f"),qi(this,Si,e.validTo,"f"),qi(this,Ni,e.protocol,"f"),qi(this,Ri,e.sanList,"f")}issuer(){return Di(this,Wi,"f")}validFrom(){return Di(this,Fi,"f")}validTo(){return Di(this,Si,"f")}protocol(){return Di(this,Ni,"f")}subjectName(){return Di(this,xi,"f")}subjectAlternativeNames(){return Di(this,Ri,"f")}}xi=new WeakMap,Wi=new WeakMap,Fi=new WeakMap,Si=new WeakMap,Ni=new WeakMap,Ri=new WeakMap;var Ki,Oi,ji,$i,Li,Bi,Hi,Ui,zi,Vi,Gi,Ji,Xi,Qi,Yi,Zi,es=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},ts=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class is{constructor(e,t,i,s){Ki.add(this),Oi.set(this,void 0),ji.set(this,void 0),$i.set(this,null),Li.set(this,void 0),Bi.set(this,(()=>{})),Hi.set(this,void 0),Ui.set(this,void 0),zi.set(this,void 0),Vi.set(this,void 0),Gi.set(this,void 0),Ji.set(this,void 0),Xi.set(this,{}),Qi.set(this,void 0),Yi.set(this,void 0),es(this,Oi,e,"f"),es(this,ji,t,"f"),es(this,Li,new Promise((e=>{es(this,Bi,e,"f")})),"f"),es(this,Hi,{ip:i.remoteIPAddress,port:i.remotePort},"f"),es(this,zi,ts(this,Ki,"m",Zi).call(this,s)||i.statusText,"f"),es(this,Vi,t.url(),"f"),es(this,Gi,!!i.fromDiskCache,"f"),es(this,Ji,!!i.fromServiceWorker,"f"),es(this,Ui,s?s.statusCode:i.status,"f");const a=s?s.headers:i.headers;for(const[e,t]of Object.entries(a))ts(this,Xi,"f")[e.toLowerCase()]=t;es(this,Qi,i.securityDetails?new Ai(i.securityDetails):null,"f"),es(this,Yi,i.timing||null,"f")}_resolveBody(e){return e?ts(this,Bi,"f").call(this,e):ts(this,Bi,"f").call(this)}remoteAddress(){return ts(this,Hi,"f")}url(){return ts(this,Vi,"f")}ok(){return 0===ts(this,Ui,"f")||ts(this,Ui,"f")>=200&&ts(this,Ui,"f")<=299}status(){return ts(this,Ui,"f")}statusText(){return ts(this,zi,"f")}headers(){return ts(this,Xi,"f")}securityDetails(){return ts(this,Qi,"f")}timing(){return ts(this,Yi,"f")}buffer(){return ts(this,$i,"f")||es(this,$i,ts(this,Li,"f").then((async e=>{if(e)throw e;try{const e=await ts(this,Oi,"f").send("Network.getResponseBody",{requestId:ts(this,ji,"f")._requestId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")}catch(e){if(e instanceof r&&"No resource with given identifier found"===e.originalMessage)throw new r("Could not load body for this request. This might happen if the request is a preflight request.");throw e}})),"f"),ts(this,$i,"f")}async text(){return(await this.buffer()).toString("utf8")}async json(){const e=await this.text();return JSON.parse(e)}request(){return ts(this,ji,"f")}fromCache(){return ts(this,Gi,"f")||ts(this,ji,"f")._fromMemoryCache}fromServiceWorker(){return ts(this,Ji,"f")}frame(){return ts(this,ji,"f").frame()}}Oi=new WeakMap,ji=new WeakMap,$i=new WeakMap,Li=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,Ui=new WeakMap,zi=new WeakMap,Vi=new WeakMap,Gi=new WeakMap,Ji=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,Ki=new WeakSet,Zi=function(e){if(!e||!e.headersText)return;const t=e.headersText.split("\r",1)[0];if(!t)return;const i=t.match(/[^ ]* [^ ]* (.*)/);if(!i)return;return i[1]||void 0};var ss,as,ns,os,rs,cs,hs=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class ds{constructor(){ss.set(this,new Map),as.set(this,new Map),ns.set(this,new Map),os.set(this,new Map),rs.set(this,new Map),cs.set(this,new Map)}forget(e){hs(this,ss,"f").delete(e),hs(this,as,"f").delete(e),hs(this,cs,"f").delete(e),hs(this,rs,"f").delete(e),hs(this,os,"f").delete(e)}responseExtraInfo(e){return hs(this,os,"f").has(e)||hs(this,os,"f").set(e,[]),hs(this,os,"f").get(e)}queuedRedirectInfo(e){return hs(this,rs,"f").has(e)||hs(this,rs,"f").set(e,[]),hs(this,rs,"f").get(e)}queueRedirectInfo(e,t){this.queuedRedirectInfo(e).push(t)}takeQueuedRedirectInfo(e){return this.queuedRedirectInfo(e).shift()}numRequestsInProgress(){return[...hs(this,ns,"f")].filter((([,e])=>!e.response())).length}storeRequestWillBeSent(e,t){hs(this,ss,"f").set(e,t)}getRequestWillBeSent(e){return hs(this,ss,"f").get(e)}forgetRequestWillBeSent(e){hs(this,ss,"f").delete(e)}getRequestPaused(e){return hs(this,as,"f").get(e)}forgetRequestPaused(e){hs(this,as,"f").delete(e)}storeRequestPaused(e,t){hs(this,as,"f").set(e,t)}getRequest(e){return hs(this,ns,"f").get(e)}storeRequest(e,t){hs(this,ns,"f").set(e,t)}forgetRequest(e){hs(this,ns,"f").delete(e)}getQueuedEventGroup(e){return hs(this,cs,"f").get(e)}queueEventGroup(e,t){hs(this,cs,"f").set(e,t)}forgetQueuedEventGroup(e){hs(this,cs,"f").delete(e)}}ss=new WeakMap,as=new WeakMap,ns=new WeakMap,os=new WeakMap,rs=new WeakMap,cs=new WeakMap;var ls,fs,us,ws,ys,ps,ms,gs,ks,vs,bs,Cs,Ms,_s,Es,Is,Ps,Ts,xs,Ws,Fs,Ss,Ns,Rs,qs,Ds,As,Ks,Os,js,$s,Ls,Bs=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Hs=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Us={Request:Symbol("NetworkManager.Request"),RequestServedFromCache:Symbol("NetworkManager.RequestServedFromCache"),Response:Symbol("NetworkManager.Response"),RequestFailed:Symbol("NetworkManager.RequestFailed"),RequestFinished:Symbol("NetworkManager.RequestFinished")};class zs extends a{constructor(e,t,i){super(),ls.add(this),fs.set(this,void 0),us.set(this,void 0),ws.set(this,void 0),ys.set(this,new ds),ps.set(this,{}),ms.set(this,void 0),gs.set(this,new Set),ks.set(this,!1),vs.set(this,!1),bs.set(this,!1),Cs.set(this,{offline:!1,upload:-1,download:-1,latency:0}),Ms.set(this,void 0),Bs(this,fs,e,"f"),Bs(this,us,t,"f"),Bs(this,ws,i,"f"),Hs(this,fs,"f").on("Fetch.requestPaused",Hs(this,ls,"m",Ws).bind(this)),Hs(this,fs,"f").on("Fetch.authRequired",Hs(this,ls,"m",xs).bind(this)),Hs(this,fs,"f").on("Network.requestWillBeSent",Hs(this,ls,"m",Ts).bind(this)),Hs(this,fs,"f").on("Network.requestServedFromCache",Hs(this,ls,"m",Ns).bind(this)),Hs(this,fs,"f").on("Network.responseReceived",Hs(this,ls,"m",Ds).bind(this)),Hs(this,fs,"f").on("Network.loadingFinished",Hs(this,ls,"m",Os).bind(this)),Hs(this,fs,"f").on("Network.loadingFailed",Hs(this,ls,"m",$s).bind(this)),Hs(this,fs,"f").on("Network.responseReceivedExtraInfo",Hs(this,ls,"m",As).bind(this))}initialize(){return Hs(this,Ms,"f")||(Bs(this,Ms,Fe("NetworkManager initialization timed out",3e4),"f"),Promise.all([Hs(this,us,"f")?Hs(this,fs,"f").send("Security.setIgnoreCertificateErrors",{ignore:!0}):null,Hs(this,fs,"f").send("Network.enable")]).then((()=>{var e;null===(e=Hs(this,Ms,"f"))||void 0===e||e.resolve()})).catch((e=>{var t;return null===(t=Hs(this,Ms,"f"))||void 0===t?void 0:t.reject(e)}))),Hs(this,Ms,"f").promise}async authenticate(e){Bs(this,ms,e,"f"),await Hs(this,ls,"m",Es).call(this)}async setExtraHTTPHeaders(t){Bs(this,ps,{},"f");for(const i of Object.keys(t)){const s=t[i];e(ge(s),`Expected value of header "${i}" to be String, but "${typeof s}" is found.`),Hs(this,ps,"f")[i.toLowerCase()]=s}await Hs(this,fs,"f").send("Network.setExtraHTTPHeaders",{headers:Hs(this,ps,"f")})}extraHTTPHeaders(){return Object.assign({},Hs(this,ps,"f"))}numRequestsInProgress(){return Hs(this,ys,"f").numRequestsInProgress()}async setOfflineMode(e){Hs(this,Cs,"f").offline=e,await Hs(this,ls,"m",_s).call(this)}async emulateNetworkConditions(e){Hs(this,Cs,"f").upload=e?e.upload:-1,Hs(this,Cs,"f").download=e?e.download:-1,Hs(this,Cs,"f").latency=e?e.latency:0,await Hs(this,ls,"m",_s).call(this)}async setUserAgent(e,t){await Hs(this,fs,"f").send("Network.setUserAgentOverride",{userAgent:e,userAgentMetadata:t})}async setCacheEnabled(e){Bs(this,bs,!e,"f"),await Hs(this,ls,"m",Ps).call(this)}async setRequestInterception(e){Bs(this,ks,e,"f"),await Hs(this,ls,"m",Es).call(this)}}fs=new WeakMap,us=new WeakMap,ws=new WeakMap,ys=new WeakMap,ps=new WeakMap,ms=new WeakMap,gs=new WeakMap,ks=new WeakMap,vs=new WeakMap,bs=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,ls=new WeakSet,_s=async function(){await Hs(this,fs,"f").send("Network.emulateNetworkConditions",{offline:Hs(this,Cs,"f").offline,latency:Hs(this,Cs,"f").latency,uploadThroughput:Hs(this,Cs,"f").upload,downloadThroughput:Hs(this,Cs,"f").download})},Es=async function(){const e=Hs(this,ks,"f")||!!Hs(this,ms,"f");e!==Hs(this,vs,"f")&&(Bs(this,vs,e,"f"),e?await Promise.all([Hs(this,ls,"m",Ps).call(this),Hs(this,fs,"f").send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([Hs(this,ls,"m",Ps).call(this),Hs(this,fs,"f").send("Fetch.disable")]))},Is=function(){return Hs(this,bs,"f")},Ps=async function(){await Hs(this,fs,"f").send("Network.setCacheDisabled",{cacheDisabled:Hs(this,ls,"m",Is).call(this)})},Ts=function(e){if(!Hs(this,ks,"f")||e.request.url.startsWith("data:"))Hs(this,ls,"m",Ss).call(this,e,void 0);else{const{requestId:t}=e;Hs(this,ys,"f").storeRequestWillBeSent(t,e);const i=Hs(this,ys,"f").getRequestPaused(t);if(i){const{requestId:s}=i;Hs(this,ls,"m",Fs).call(this,e,i),Hs(this,ls,"m",Ss).call(this,e,s),Hs(this,ys,"f").forgetRequestPaused(t)}}},xs=function(e){let t="Default";Hs(this,gs,"f").has(e.requestId)?t="CancelAuth":Hs(this,ms,"f")&&(t="ProvideCredentials",Hs(this,gs,"f").add(e.requestId));const{username:i,password:s}=Hs(this,ms,"f")||{username:void 0,password:void 0};Hs(this,fs,"f").send("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:i,password:s}}).catch(fe)},Ws=function(e){!Hs(this,ks,"f")&&Hs(this,vs,"f")&&Hs(this,fs,"f").send("Fetch.continueRequest",{requestId:e.requestId}).catch(fe);const{networkId:t,requestId:i}=e;if(!t)return;const s=(()=>{const i=Hs(this,ys,"f").getRequestWillBeSent(t);if(!i||i.request.url===e.request.url&&i.request.method===e.request.method)return i;Hs(this,ys,"f").forgetRequestWillBeSent(t)})();s?(Hs(this,ls,"m",Fs).call(this,s,e),Hs(this,ls,"m",Ss).call(this,s,i)):Hs(this,ys,"f").storeRequestPaused(t,e)},Fs=function(e,t){e.request.headers={...e.request.headers,...t.request.headers}},Ss=function(e,t){let i=[];if(e.redirectResponse){let s=null;if(e.redirectHasExtraInfo&&(s=Hs(this,ys,"f").responseExtraInfo(e.requestId).shift(),!s))return void Hs(this,ys,"f").queueRedirectInfo(e.requestId,{event:e,fetchRequestId:t});const a=Hs(this,ys,"f").getRequest(e.requestId);a&&(Hs(this,ls,"m",Rs).call(this,a,e.redirectResponse,s),i=a._redirectChain)}const s=e.frameId?Hs(this,ws,"f").frame(e.frameId):null,a=new _i(Hs(this,fs,"f"),s,t,Hs(this,ks,"f"),e,i);Hs(this,ys,"f").storeRequest(e.requestId,a),this.emit(Us.Request,a),a.finalizeInterceptions()},Ns=function(e){const t=Hs(this,ys,"f").getRequest(e.requestId);t&&(t._fromMemoryCache=!0),this.emit(Us.RequestServedFromCache,t)},Rs=function(e,t,i){const s=new is(Hs(this,fs,"f"),e,t,i);e._response=s,e._redirectChain.push(e),s._resolveBody(new Error("Response body is unavailable for redirect responses")),Hs(this,ls,"m",Ks).call(this,e,!1),this.emit(Us.Response,s),this.emit(Us.RequestFinished,e)},qs=function(e,t){const i=Hs(this,ys,"f").getRequest(e.requestId);if(!i)return;Hs(this,ys,"f").responseExtraInfo(e.requestId).length&&fe(new Error("Unexpected extraInfo events for request "+e.requestId));const s=new is(Hs(this,fs,"f"),i,e.response,t);i._response=s,this.emit(Us.Response,s)},Ds=function(e){const t=Hs(this,ys,"f").getRequest(e.requestId);let i=null;!t||t._fromMemoryCache||!e.hasExtraInfo||(i=Hs(this,ys,"f").responseExtraInfo(e.requestId).shift(),i)?Hs(this,ls,"m",qs).call(this,e,i):Hs(this,ys,"f").queueEventGroup(e.requestId,{responseReceivedEvent:e})},As=function(e){const t=Hs(this,ys,"f").takeQueuedRedirectInfo(e.requestId);if(t)return Hs(this,ys,"f").responseExtraInfo(e.requestId).push(e),void Hs(this,ls,"m",Ss).call(this,t.event,t.fetchRequestId);const i=Hs(this,ys,"f").getQueuedEventGroup(e.requestId);if(i)return Hs(this,ys,"f").forgetQueuedEventGroup(e.requestId),Hs(this,ls,"m",qs).call(this,i.responseReceivedEvent,e),i.loadingFinishedEvent&&Hs(this,ls,"m",js).call(this,i.loadingFinishedEvent),void(i.loadingFailedEvent&&Hs(this,ls,"m",Ls).call(this,i.loadingFailedEvent));Hs(this,ys,"f").responseExtraInfo(e.requestId).push(e)},Ks=function(e,t){const i=e._requestId,s=e._interceptionId;Hs(this,ys,"f").forgetRequest(i),void 0!==s&&Hs(this,gs,"f").delete(s),t&&Hs(this,ys,"f").forget(i)},Os=function(e){const t=Hs(this,ys,"f").getQueuedEventGroup(e.requestId);t?t.loadingFinishedEvent=e:Hs(this,ls,"m",js).call(this,e)},js=function(e){var t;const i=Hs(this,ys,"f").getRequest(e.requestId);i&&(i.response()&&(null===(t=i.response())||void 0===t||t._resolveBody(null)),Hs(this,ls,"m",Ks).call(this,i,!0),this.emit(Us.RequestFinished,i))},$s=function(e){const t=Hs(this,ys,"f").getQueuedEventGroup(e.requestId);t?t.loadingFailedEvent=e:Hs(this,ls,"m",Ls).call(this,e)},Ls=function(e){const t=Hs(this,ys,"f").getRequest(e.requestId);if(!t)return;t._failureText=e.errorText;const i=t.response();i&&i._resolveBody(null),Hs(this,ls,"m",Ks).call(this,t,!0),this.emit(Us.RequestFailed,t)};var Vs,Gs,Js,Xs,Qs,Ys,Zs,ea,ta,ia,sa,aa,na,oa,ra,ca,ha,da,la,fa,ua,wa,ya,pa,ma,ga,ka,va,ba=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Ca=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Ma=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]),_a=()=>{};class Ea{constructor(t,i,s,a){Vs.add(this),Gs.set(this,void 0),Js.set(this,void 0),Xs.set(this,void 0),Qs.set(this,void 0),Ys.set(this,null),Zs.set(this,void 0),ea.set(this,void 0),ta.set(this,_a),ia.set(this,new Promise((e=>{ba(this,ta,e,"f")}))),sa.set(this,_a),aa.set(this,new Promise((e=>{ba(this,sa,e,"f")}))),na.set(this,_a),oa.set(this,new Promise((e=>{ba(this,na,e,"f")}))),ra.set(this,_a),ca.set(this,new Promise((e=>{ba(this,ra,e,"f")}))),ha.set(this,void 0),da.set(this,void 0),la.set(this,void 0),fa.set(this,void 0),Array.isArray(s)?s=s.slice():"string"==typeof s&&(s=[s]),ba(this,ea,i._loaderId,"f"),ba(this,Gs,s.map((t=>{const i=Ma.get(t);return e(i,"Unknown value for options.waitUntil: "+t),i})),"f"),ba(this,Js,t,"f"),ba(this,Xs,i,"f"),ba(this,Qs,a,"f"),ba(this,Zs,[pe(t._client,T.Disconnected,Ca(this,Vs,"m",ya).bind(this,new Error("Navigation failed because browser has disconnected!"))),pe(Ca(this,Js,"f"),Kn.LifecycleEvent,Ca(this,Vs,"m",va).bind(this)),pe(Ca(this,Js,"f"),Kn.FrameNavigatedWithinDocument,Ca(this,Vs,"m",ma).bind(this)),pe(Ca(this,Js,"f"),Kn.FrameNavigated,Ca(this,Vs,"m",ga).bind(this)),pe(Ca(this,Js,"f"),Kn.FrameSwapped,Ca(this,Vs,"m",ka).bind(this)),pe(Ca(this,Js,"f"),Kn.FrameDetached,Ca(this,Vs,"m",wa).bind(this)),pe(Ca(this,Js,"f").networkManager(),Us.Request,Ca(this,Vs,"m",ua).bind(this))],"f"),ba(this,ha,Ca(this,Vs,"m",pa).call(this),"f"),Ca(this,Vs,"m",va).call(this)}async navigationResponse(){return Ca(this,Ys,"f")?Ca(this,Ys,"f").response():null}sameDocumentNavigationPromise(){return Ca(this,ia,"f")}newDocumentNavigationPromise(){return Ca(this,oa,"f")}lifecyclePromise(){return Ca(this,aa,"f")}timeoutOrTerminationPromise(){return Promise.race([Ca(this,ha,"f"),Ca(this,ca,"f")])}dispose(){me(Ca(this,Zs,"f")),void 0!==Ca(this,da,"f")&&clearTimeout(Ca(this,da,"f"))}}Gs=new WeakMap,Js=new WeakMap,Xs=new WeakMap,Qs=new WeakMap,Ys=new WeakMap,Zs=new WeakMap,ea=new WeakMap,ta=new WeakMap,ia=new WeakMap,sa=new WeakMap,aa=new WeakMap,na=new WeakMap,oa=new WeakMap,ra=new WeakMap,ca=new WeakMap,ha=new WeakMap,da=new WeakMap,la=new WeakMap,fa=new WeakMap,Vs=new WeakSet,ua=function(e){e.frame()===Ca(this,Xs,"f")&&e.isNavigationRequest()&&ba(this,Ys,e,"f")},wa=function(e){Ca(this,Xs,"f")!==e?Ca(this,Vs,"m",va).call(this):Ca(this,ra,"f").call(null,new Error("Navigating frame was detached"))},ya=function(e){Ca(this,ra,"f").call(null,e)},pa=async function(){if(!Ca(this,Qs,"f"))return new Promise(_a);const e="Navigation timeout of "+Ca(this,Qs,"f")+" ms exceeded";return await new Promise((e=>ba(this,da,setTimeout(e,Ca(this,Qs,"f")),"f"))),new o(e)},ma=function(e){e===Ca(this,Xs,"f")&&(ba(this,la,!0,"f"),Ca(this,Vs,"m",va).call(this))},ga=function(e){e===Ca(this,Xs,"f")&&Ca(this,Vs,"m",va).call(this)},ka=function(e){e===Ca(this,Xs,"f")&&(ba(this,fa,!0,"f"),Ca(this,Vs,"m",va).call(this))},va=function(){(function e(t,i){for(const e of i)if(!t._lifecycleEvents.has(e))return!1;for(const s of t.childFrames())if(s._hasStartedLoading&&!e(s,i))return!1;return!0})(Ca(this,Xs,"f"),Ca(this,Gs,"f"))&&(Ca(this,sa,"f").call(this),Ca(this,la,"f")&&Ca(this,ta,"f").call(this),(Ca(this,fa,"f")||Ca(this,Xs,"f")._loaderId!==Ca(this,ea,"f"))&&Ca(this,na,"f").call(this))};var Ia,Pa,Ta,xa,Wa,Fa,Sa,Na,Ra,qa,Da,Aa,Ka,Oa,ja,$a,La,Ba,Ha,Ua,za,Va,Ga,Ja,Xa,Qa,Ya,Za,en,tn,sn=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},an=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class nn{constructor(e,t,i,s){Pa.set(this,void 0),Ta.set(this,void 0),xa.set(this,void 0),Wa.set(this,void 0),Fa.set(this,null),Sa.set(this,null),Na.set(this,null),Ra.set(this,!1),qa.set(this,new Set),Da.set(this,new Map),Aa.set(this,new Set),Oa.set(this,null),ja.set(this,(async e=>{let t;if(!this._hasContext())return;const i=await this.executionContext();try{t=JSON.parse(e.payload)}catch{return}const{type:s,name:a,seq:n,args:o}=t;if("internal"===s&&an(this,qa,"f").has(an(nn,Ia,"f",Ka).call(nn,a,i._contextId))&&i._contextId===e.executionContextId)try{const e=this._boundFunctions.get(a);if(!e)throw new Error("Bound function $name is not found");const t=await e(...o);await i.evaluate((function(e,t,i){globalThis[e].callbacks.get(t).resolve(i),globalThis[e].callbacks.delete(t)}),a,n,t)}catch(e){if(e.message.includes("Protocol error"))return;fe(e)}})),sn(this,Ta,e,"f"),sn(this,Pa,t,"f"),sn(this,xa,i,"f"),sn(this,Wa,s,"f"),this._setContext(null),an(this,Ta,"f").on("Runtime.bindingCalled",an(this,ja,"f"))}get _waitTasks(){return an(this,Aa,"f")}get _boundFunctions(){return an(this,Da,"f")}frame(){return an(this,xa,"f")}async _setContext(t){var i;if(t){e(an(this,Na,"f"),`ExecutionContext ${t._contextId} has already been set.`),an(this,qa,"f").clear(),null===(i=an(this,Na,"f"))||void 0===i||i.call(null,t),sn(this,Na,null,"f");for(const e of this._waitTasks)e.rerun()}else sn(this,Fa,null,"f"),sn(this,Sa,new Promise((e=>{sn(this,Na,e,"f")})),"f")}_hasContext(){return!an(this,Na,"f")}_detach(){sn(this,Ra,!0,"f"),an(this,Ta,"f").off("Runtime.bindingCalled",an(this,ja,"f"));for(const e of this._waitTasks)e.terminate(new Error("waitForFunction failed: frame got detached."))}executionContext(){if(an(this,Ra,"f"))throw new Error(`Execution context is not available in detached frame "${an(this,xa,"f").url()}" (are you trying to evaluate?)`);if(null===an(this,Sa,"f"))throw new Error("Execution content promise is missing");return an(this,Sa,"f")}async evaluateHandle(e,...t){return(await this.executionContext()).evaluateHandle(e,...t)}async evaluate(e,...t){return(await this.executionContext()).evaluate(e,...t)}async $(e){const t=await this._document();return await t.$(e)}async $$(e){return(await this._document()).$$(e)}async _document(){return an(this,Fa,"f")||sn(this,Fa,this.executionContext().then((async e=>await e.evaluateHandle((()=>document)))),"f"),an(this,Fa,"f")}async $x(e){const t=await this._document();return await t.$x(e)}async $eval(e,t,...i){return(await this._document()).$eval(e,t,...i)}async $$eval(e,t,...i){const s=await this._document();return await s.$$eval(e,t,...i)}async content(){return await this.evaluate((()=>{let e="";return document.doctype&&(e=(new XMLSerializer).serializeToString(document.doctype)),document.documentElement&&(e+=document.documentElement.outerHTML),e}))}async setContent(e,t={}){const{waitUntil:i=["load"],timeout:s=an(this,Wa,"f").navigationTimeout()}=t;await this.evaluate((e=>{document.open(),document.write(e),document.close()}),e);const a=new Ea(an(this,Pa,"f"),an(this,xa,"f"),i,s),n=await Promise.race([a.timeoutOrTerminationPromise(),a.lifecyclePromise()]);if(a.dispose(),n)throw n}async addScriptTag(e){const{url:t=null,path:i=null,content:s=null,id:a="",type:n=""}=e;if(null!==t)try{const e=await this.executionContext();return await e.evaluateHandle((async function(e,t,i){const s=document.createElement("script");s.src=e,t&&(s.id=t),i&&(s.type=i);const a=new Promise(((e,t)=>{s.onload=e,s.onerror=t}));return document.head.appendChild(s),await a,s}),t,a,n)}catch(e){throw new Error(`Loading script from ${t} failed`)}if(null!==i){let t;try{t=(await import("fs")).promises}catch(e){if(e instanceof TypeError)throw new Error("Can only pass a filepath to addScriptTag in a Node-like environment.");throw e}let s=await t.readFile(i,"utf8");s+="//# sourceURL="+i.replace(/\n/g,"");const r=await this.executionContext();return await r.evaluateHandle(o,s,a,n)}if(null!==s){const e=await this.executionContext();return await e.evaluateHandle(o,s,a,n)}throw new Error("Provide an object with a `url`, `path` or `content` property");function o(e,t,i="text/javascript"){const s=document.createElement("script");s.type=i,s.text=e,t&&(s.id=t);let a=null;if(s.onerror=e=>a=e,document.head.appendChild(s),a)throw a;return s}}async addStyleTag(e){const{url:t=null,path:i=null,content:s=null}=e;if(null!==t)try{const e=await this.executionContext(),i=(await e.evaluateHandle((async function(e){const t=document.createElement("link");t.rel="stylesheet",t.href=e;const i=new Promise(((e,i)=>{t.onload=e,t.onerror=i}));return document.head.appendChild(t),await i,t}),t)).asElement();if(null===i)throw new Error("Style element is not found");return i}catch(e){throw new Error(`Loading style from ${t} failed`)}if(null!==i){let t;try{t=(await Pe()).promises}catch(e){if(e instanceof TypeError)throw new Error("Cannot pass a filepath to addStyleTag in the browser environment.");throw e}let s=await t.readFile(i,"utf8");s+="/*# sourceURL="+i.replace(/\n/g,"")+"*/";const n=await this.executionContext(),o=(await n.evaluateHandle(a,s)).asElement();if(null===o)throw new Error("Style element is not found");return o}if(null!==s){const e=await this.executionContext(),t=(await e.evaluateHandle(a,s)).asElement();if(null===t)throw new Error("Style element is not found");return t}throw new Error("Provide an object with a `url`, `path` or `content` property");async function a(e){const t=document.createElement("style");t.appendChild(document.createTextNode(e));const i=new Promise(((e,i)=>{t.onload=e,t.onerror=i}));return document.head.appendChild(t),await i,t}}async click(t,i){const s=await this.$(t);e(s,`No element found for selector: ${t}`),await s.click(i),await s.dispose()}async focus(t){const i=await this.$(t);e(i,`No element found for selector: ${t}`),await i.focus(),await i.dispose()}async hover(t){const i=await this.$(t);e(i,`No element found for selector: ${t}`),await i.hover(),await i.dispose()}async select(t,...i){const s=await this.$(t);e(s,`No element found for selector: ${t}`);const a=await s.select(...i);return await s.dispose(),a}async tap(t){const i=await this.$(t);e(i,`No element found for selector: ${t}`),await i.tap(),await i.dispose()}async type(t,i,s){const a=await this.$(t);e(a,`No element found for selector: ${t}`),await a.type(i,s),await a.dispose()}async waitForSelector(t,i){const{updatedSelector:s,queryHandler:a}=Y(t);return e(a.waitFor,"Query handler does not support waiting"),await a.waitFor(this,s,i)}async _addBindingToContext(e,t){if(!an(this,qa,"f").has(an(nn,Ia,"f",Ka).call(nn,t,e._contextId)))return an(this,Oa,"f")?(await an(this,Oa,"f"),this._addBindingToContext(e,t)):(sn(this,Oa,(async t=>{const i=Me("internal",t);try{await e._client.send("Runtime.addBinding",{name:t,executionContextName:e._contextName}),await e.evaluate(i)}catch(e){const t=e.message.includes("Execution context was destroyed"),i=e.message.includes("Cannot find context with specified id");return t||i?void 0:void fe(e)}an(this,qa,"f").add(an(nn,Ia,"f",Ka).call(nn,t,e._contextId))})(t),"f"),await an(this,Oa,"f"),void sn(this,Oa,null,"f"))}async _waitForSelectorInPage(e,t,i,s){const{visible:a=!1,hidden:n=!1,timeout:o=an(this,Wa,"f").timeout()}=i,r=a||n?"raf":"mutation",c=`selector \`${t}\`${n?" to be hidden":""}`,h={domWorld:this,predicateBody:_e((async function(e,t,i,s){const a=predicateQueryHandler?await predicateQueryHandler(e,t):e.querySelector(t);return checkWaitForOptions(a,i,s)}),e),predicateAcceptsContextElement:!0,title:c,polling:r,timeout:o,args:[t,a,n],binding:s,root:i.root},d=new rn(h),l=await d.promise;return l.asElement()||(await l.dispose(),null)}async waitForXPath(e,t){const{visible:i=!1,hidden:s=!1,timeout:a=an(this,Wa,"f").timeout()}=t,n=i||s?"raf":"mutation",o=`XPath \`${e}\`${s?" to be hidden":""}`,r={domWorld:this,predicateBody:_e((function(e,t,i,s){const a=document.evaluate(t,e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;return checkWaitForOptions(a,i,s)})),predicateAcceptsContextElement:!0,title:o,polling:n,timeout:a,args:[e,i,s],root:t.root},c=new rn(r),h=await c.promise;return h.asElement()||(await h.dispose(),null)}waitForFunction(e,t={},...i){const{polling:s="raf",timeout:a=an(this,Wa,"f").timeout()}=t;return new rn({domWorld:this,predicateBody:e,predicateAcceptsContextElement:!1,title:"function",polling:s,timeout:a,args:i}).promise}async title(){return this.evaluate((()=>document.title))}}Ia=nn,Pa=new WeakMap,Ta=new WeakMap,xa=new WeakMap,Wa=new WeakMap,Fa=new WeakMap,Sa=new WeakMap,Na=new WeakMap,Ra=new WeakMap,qa=new WeakMap,Da=new WeakMap,Aa=new WeakMap,Oa=new WeakMap,ja=new WeakMap,Ka={value:(e,t)=>`${e}_${t}`};const on=()=>{};class rn{constructor(t){if($a.add(this),La.set(this,void 0),Ba.set(this,void 0),Ha.set(this,void 0),Ua.set(this,void 0),za.set(this,void 0),Va.set(this,void 0),Ga.set(this,void 0),Ja.set(this,0),Xa.set(this,on),Qa.set(this,on),Ya.set(this,void 0),Za.set(this,!1),en.set(this,null),ge(t.polling))e("raf"===t.polling||"mutation"===t.polling,"Unknown polling option: "+t.polling);else{if(!ke(t.polling))throw new Error("Unknown polling options: "+t.polling);e(t.polling>0,"Cannot poll with non-positive interval: "+t.polling)}var i;if(sn(this,La,t.domWorld,"f"),sn(this,Ba,t.polling,"f"),sn(this,Ha,t.timeout,"f"),sn(this,en,t.root||null,"f"),sn(this,Ua,(i=t.predicateBody,ge(i)?`return (${i});`:`return (${i})(...args);`),"f"),sn(this,za,t.predicateAcceptsContextElement,"f"),sn(this,Va,t.args,"f"),sn(this,Ga,t.binding,"f"),sn(this,Ja,0,"f"),an(this,La,"f")._waitTasks.add(this),an(this,Ga,"f")&&an(this,La,"f")._boundFunctions.set(an(this,Ga,"f").name,an(this,Ga,"f").pptrFunction),this.promise=new Promise(((e,t)=>{sn(this,Xa,e,"f"),sn(this,Qa,t,"f")})),t.timeout){const e=new o(`waiting for ${t.title} failed: timeout ${t.timeout}ms exceeded`);sn(this,Ya,setTimeout((()=>this.terminate(e)),t.timeout),"f")}this.rerun()}terminate(e){sn(this,Za,!0,"f"),an(this,Qa,"f").call(this,e),an(this,$a,"m",tn).call(this)}async rerun(){var e;const t=sn(this,Ja,(e=an(this,Ja,"f"),++e),"f");let i=null,s=null;const a=await an(this,La,"f").executionContext();if(!an(this,Za,"f")&&t===an(this,Ja,"f")&&(an(this,Ga,"f")&&await an(this,La,"f")._addBindingToContext(a,an(this,Ga,"f").name),!an(this,Za,"f")&&t===an(this,Ja,"f"))){try{i=await a.evaluateHandle(cn,an(this,en,"f")||null,an(this,Ua,"f"),an(this,za,"f"),an(this,Ba,"f"),an(this,Ha,"f"),...an(this,Va,"f"))}catch(e){s=e}if(an(this,Za,"f")||t!==an(this,Ja,"f"))i&&await i.dispose();else if(s||!await an(this,La,"f").evaluate((e=>!e),i).catch((()=>!0))){if(s){if(s.message.includes("TypeError: binding is not a function"))return this.rerun();if(s.message.includes("Execution context is not available in detached frame"))return void this.terminate(new Error("waitForFunction failed: frame got detached."));if(s.message.includes("Execution context was destroyed"))return;if(s.message.includes("Cannot find context with specified id"))return;an(this,Qa,"f").call(this,s)}else{if(!i)throw new Error("Assertion: result handle is not available");an(this,Xa,"f").call(this,i)}an(this,$a,"m",tn).call(this)}else{if(!i)throw new Error("Assertion: result handle is not available");await i.dispose()}}}}async function cn(e,t,i,s,a,...n){e=e||document;const o=new Function("...args",t);let r=!1;switch(a&&setTimeout((()=>r=!0),a),s){case"raf":return await async function(){let t=e=>{};const s=new Promise((e=>t=e));return await async function s(){if(r)return void t();const a=i?await o(e,...n):await o(...n);a?t(a):requestAnimationFrame(s)}(),s}();case"mutation":return await async function(){const t=i?await o(e,...n):await o(...n);if(t)return Promise.resolve(t);let s=e=>{};const a=new Promise((e=>s=e)),c=new MutationObserver((async()=>{r&&(c.disconnect(),s());const t=i?await o(e,...n):await o(...n);t&&(c.disconnect(),s(t))}));if(!e)throw new Error("Root element is not found.");return c.observe(e,{childList:!0,subtree:!0,attributes:!0}),a}();default:return await async function(t){let s=e=>{};const a=new Promise((e=>s=e));return await async function a(){if(r)return void s();const c=i?await o(e,...n):await o(...n);c?s(c):setTimeout(a,t)}(),a}(s)}}La=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,za=new WeakMap,Va=new WeakMap,Ga=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,Qa=new WeakMap,Ya=new WeakMap,Za=new WeakMap,en=new WeakMap,$a=new WeakSet,tn=function(){void 0!==an(this,Ya,"f")&&clearTimeout(an(this,Ya,"f")),an(this,La,"f")._waitTasks.delete(this)};var hn,dn,ln,fn,un,wn,yn,pn,mn,gn,kn,vn,bn,Cn,Mn,_n,En,In,Pn,Tn,xn,Wn,Fn,Sn,Nn,Rn,qn,Dn=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},An=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Kn={FrameAttached:Symbol("FrameManager.FrameAttached"),FrameNavigated:Symbol("FrameManager.FrameNavigated"),FrameDetached:Symbol("FrameManager.FrameDetached"),FrameSwapped:Symbol("FrameManager.FrameSwapped"),LifecycleEvent:Symbol("FrameManager.LifecycleEvent"),FrameNavigatedWithinDocument:Symbol("FrameManager.FrameNavigatedWithinDocument"),ExecutionContextCreated:Symbol("FrameManager.ExecutionContextCreated"),ExecutionContextDestroyed:Symbol("FrameManager.ExecutionContextDestroyed")};class On extends a{constructor(e,t,i,s){super(),hn.add(this),dn.set(this,void 0),ln.set(this,void 0),fn.set(this,void 0),un.set(this,new Map),wn.set(this,new Map),yn.set(this,new Set),pn.set(this,void 0),mn.set(this,void 0),gn.set(this,new Map),kn.set(this,new Map),Dn(this,mn,e,"f"),Dn(this,dn,t,"f"),Dn(this,ln,new zs(e,i,this),"f"),Dn(this,fn,s,"f"),this.setupEventListeners(An(this,mn,"f"))}get _timeoutSettings(){return An(this,fn,"f")}get _client(){return An(this,mn,"f")}setupEventListeners(e){e.on("Page.frameAttached",(t=>{An(this,hn,"m",_n).call(this,e,t.frameId,t.parentFrameId)})),e.on("Page.frameNavigated",(e=>{An(this,hn,"m",En).call(this,e.frame)})),e.on("Page.navigatedWithinDocument",(e=>{An(this,hn,"m",In).call(this,e.frameId,e.url)})),e.on("Page.frameDetached",(e=>{An(this,hn,"m",Pn).call(this,e.frameId,e.reason)})),e.on("Page.frameStartedLoading",(e=>{An(this,hn,"m",bn).call(this,e.frameId)})),e.on("Page.frameStoppedLoading",(e=>{An(this,hn,"m",Cn).call(this,e.frameId)})),e.on("Runtime.executionContextCreated",(t=>{An(this,hn,"m",Tn).call(this,t.context,e)})),e.on("Runtime.executionContextDestroyed",(t=>{An(this,hn,"m",xn).call(this,t.executionContextId,e)})),e.on("Runtime.executionContextsCleared",(()=>{An(this,hn,"m",Wn).call(this,e)})),e.on("Page.lifecycleEvent",(e=>{An(this,hn,"m",vn).call(this,e)}))}async initialize(e,t=An(this,mn,"f")){var i;try{An(this,gn,"f").has(e)||An(this,gn,"f").set(e,Fe(`Waiting for target frame ${e} failed`));const s=await Promise.all([t.send("Page.enable"),t.send("Page.getFrameTree")]),{frameTree:a}=s[1];An(this,hn,"m",Mn).call(this,t,a),await Promise.all([t.send("Page.setLifecycleEventsEnabled",{enabled:!0}),t.send("Runtime.enable").then((()=>this._ensureIsolatedWorld(t,"__puppeteer_utility_world__"))),t===An(this,mn,"f")?An(this,ln,"f").initialize():Promise.resolve()])}catch(e){if(We(e)&&(e.message.includes("Target closed")||e.message.includes("Session closed")))return;throw e}finally{null===(i=An(this,gn,"f").get(e))||void 0===i||i.resolve(),An(this,gn,"f").delete(e)}}networkManager(){return An(this,ln,"f")}async navigateFrame(e,t,i={}){$n(i);const{referer:s=An(this,ln,"f").extraHTTPHeaders().referer,waitUntil:a=["load"],timeout:n=An(this,fn,"f").navigationTimeout()}=i;let o=!1;const r=new Ea(this,e,a,n);let c=await Promise.race([async function(e,t,i,s){try{const a=await e.send("Page.navigate",{url:t,referrer:i,frameId:s});return o=!!a.loaderId,a.errorText?new Error(`${a.errorText} at ${t}`):null}catch(e){if(We(e))return e;throw e}}(An(this,mn,"f"),t,s,e._id),r.timeoutOrTerminationPromise()]);if(c||(c=await Promise.race([r.timeoutOrTerminationPromise(),o?r.newDocumentNavigationPromise():r.sameDocumentNavigationPromise()])),r.dispose(),c)throw c;return await r.navigationResponse()}async waitForFrameNavigation(e,t={}){$n(t);const{waitUntil:i=["load"],timeout:s=An(this,fn,"f").navigationTimeout()}=t,a=new Ea(this,e,i,s),n=await Promise.race([a.timeoutOrTerminationPromise(),a.sameDocumentNavigationPromise(),a.newDocumentNavigationPromise()]);if(a.dispose(),n)throw n;return await a.navigationResponse()}async onAttachedToTarget(e){if("iframe"!==e._getTargetInfo().type)return;const t=An(this,un,"f").get(e._getTargetInfo().targetId);t&&t._updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._getTargetInfo().targetId,e._session())}async onDetachedFromTarget(e){const t=An(this,un,"f").get(e._targetId);t&&t.isOOPFrame()&&An(this,hn,"m",Fn).call(this,t)}page(){return An(this,dn,"f")}mainFrame(){return e(An(this,pn,"f"),"Requesting main frame too early!"),An(this,pn,"f")}frames(){return Array.from(An(this,un,"f").values())}frame(e){return An(this,un,"f").get(e)||null}async _ensureIsolatedWorld(e,t){const i=`${e.id()}:${t}`;An(this,yn,"f").has(i)||(An(this,yn,"f").add(i),await e.send("Page.addScriptToEvaluateOnNewDocument",{source:"//# sourceURL=pptr://__puppeteer_evaluation_script__",worldName:t}),await Promise.all(this.frames().filter((t=>t._client()===e)).map((i=>e.send("Page.createIsolatedWorld",{frameId:i._id,worldName:t,grantUniveralAccess:!0}).catch(fe)))))}executionContextById(t,i=An(this,mn,"f")){const s=`${i.id()}:${t}`,a=An(this,wn,"f").get(s);return e(a,"INTERNAL ERROR: missing context with id = "+t),a}}dn=new WeakMap,ln=new WeakMap,fn=new WeakMap,un=new WeakMap,wn=new WeakMap,yn=new WeakMap,pn=new WeakMap,mn=new WeakMap,gn=new WeakMap,kn=new WeakMap,hn=new WeakSet,vn=function(e){const t=An(this,un,"f").get(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(Kn.LifecycleEvent,t))},bn=function(e){const t=An(this,un,"f").get(e);t&&t._onLoadingStarted()},Cn=function(e){const t=An(this,un,"f").get(e);t&&(t._onLoadingStopped(),this.emit(Kn.LifecycleEvent,t))},Mn=function e(t,i){if(i.frame.parentId&&An(this,hn,"m",_n).call(this,t,i.frame.id,i.frame.parentId),An(this,hn,"m",En).call(this,i.frame),i.childFrames)for(const s of i.childFrames)An(this,hn,"m",e).call(this,t,s)},_n=function(t,i,s){if(An(this,un,"f").has(i)){const e=An(this,un,"f").get(i);return void(t&&e.isOOPFrame()&&e._updateClient(t))}const a=An(this,un,"f").get(s),n=a=>{e(a,`Parent frame ${s} not found`);const n=new jn(this,a,i,t);An(this,un,"f").set(n._id,n),this.emit(Kn.FrameAttached,n)};if(a)return n(a);if(An(this,gn,"f").has(s))return An(this,kn,"f").has(i)||An(this,kn,"f").set(i,Fe(`Waiting for frame ${i} to attach failed`)),void An(this,gn,"f").get(s).promise.then((()=>{var e;n(An(this,un,"f").get(s)),null===(e=An(this,kn,"f").get(i))||void 0===e||e.resolve(),An(this,kn,"f").delete(i)}));throw new Error(`Parent frame ${s} not found`)},En=function(t){const i=t.id,s=!t.parentId,a=s?An(this,pn,"f"):An(this,un,"f").get(i),n=a=>{if(e(s||a,`Missing frame isMainFrame=${s}, frameId=${i}`),a)for(const e of a.childFrames())An(this,hn,"m",Fn).call(this,e);s&&(a?(An(this,un,"f").delete(a._id),a._id=i):a=new jn(this,null,i,An(this,mn,"f")),An(this,un,"f").set(i,a),Dn(this,pn,a,"f")),e(a),a._navigated(t),this.emit(Kn.FrameNavigated,a)};An(this,kn,"f").has(i)?An(this,kn,"f").get(i).promise.then((()=>{n(s?An(this,pn,"f"):An(this,un,"f").get(i))})):n(a)},In=function(e,t){const i=An(this,un,"f").get(e);i&&(i._navigatedWithinDocument(t),this.emit(Kn.FrameNavigatedWithinDocument,i),this.emit(Kn.FrameNavigated,i))},Pn=function(e,t){const i=An(this,un,"f").get(e);"remove"===t?i&&An(this,hn,"m",Fn).call(this,i):"swap"===t&&this.emit(Kn.FrameSwapped,i)},Tn=function(e,t){const i=e.auxData,s=i&&i.frameId,a="string"==typeof s?An(this,un,"f").get(s):void 0;let n;if(a){if(a._client()!==t)return;e.auxData&&e.auxData.isDefault?n=a._mainWorld:"__puppeteer_utility_world__"!==e.name||a._secondaryWorld._hasContext()||(n=a._secondaryWorld)}const o=new ot((null==a?void 0:a._client())||An(this,mn,"f"),e,n);n&&n._setContext(o);const r=`${t.id()}:${e.id}`;An(this,wn,"f").set(r,o)},xn=function(e,t){const i=`${t.id()}:${e}`,s=An(this,wn,"f").get(i);s&&(An(this,wn,"f").delete(i),s._world&&s._world._setContext(null))},Wn=function(e){for(const[t,i]of An(this,wn,"f").entries())i._client===e&&(i._world&&i._world._setContext(null),An(this,wn,"f").delete(t))},Fn=function e(t){for(const i of t.childFrames())An(this,hn,"m",e).call(this,i);t._detach(),An(this,un,"f").delete(t._id),this.emit(Kn.FrameDetached,t)};class jn{constructor(e,t,i,s){Sn.set(this,void 0),Nn.set(this,""),Rn.set(this,!1),qn.set(this,void 0),this._loaderId="",this._hasStartedLoading=!1,this._lifecycleEvents=new Set,this._frameManager=e,Dn(this,Sn,null!=t?t:null,"f"),Dn(this,Nn,"","f"),this._id=i,Dn(this,Rn,!1,"f"),this._loaderId="",this._childFrames=new Set,An(this,Sn,"f")&&An(this,Sn,"f")._childFrames.add(this),this._updateClient(s)}_updateClient(e){Dn(this,qn,e,"f"),this._mainWorld=new nn(An(this,qn,"f"),this._frameManager,this,this._frameManager._timeoutSettings),this._secondaryWorld=new nn(An(this,qn,"f"),this._frameManager,this,this._frameManager._timeoutSettings)}page(){return this._frameManager.page()}isOOPFrame(){return An(this,qn,"f")!==this._frameManager._client}async goto(e,t={}){return await this._frameManager.navigateFrame(this,e,t)}async waitForNavigation(e={}){return await this._frameManager.waitForFrameNavigation(this,e)}_client(){return An(this,qn,"f")}executionContext(){return this._mainWorld.executionContext()}async evaluateHandle(e,...t){return this._mainWorld.evaluateHandle(e,...t)}async evaluate(e,...t){return this._mainWorld.evaluate(e,...t)}async $(e){return this._mainWorld.$(e)}async $$(e){return this._mainWorld.$$(e)}async $x(e){return this._mainWorld.$x(e)}async $eval(e,t,...i){return this._mainWorld.$eval(e,t,...i)}async $$eval(e,t,...i){return this._mainWorld.$$eval(e,t,...i)}async content(){return this._secondaryWorld.content()}async setContent(e,t={}){return this._secondaryWorld.setContent(e,t)}name(){return this._name||""}url(){return An(this,Nn,"f")}parentFrame(){return An(this,Sn,"f")}childFrames(){return Array.from(this._childFrames)}isDetached(){return An(this,Rn,"f")}async addScriptTag(e){return this._mainWorld.addScriptTag(e)}async addStyleTag(e){return this._mainWorld.addStyleTag(e)}async click(e,t={}){return this._secondaryWorld.click(e,t)}async focus(e){return this._secondaryWorld.focus(e)}async hover(e){return this._secondaryWorld.hover(e)}select(e,...t){return this._secondaryWorld.select(e,...t)}async tap(e){return this._secondaryWorld.tap(e)}async type(e,t,i){return this._mainWorld.type(e,t,i)}waitForTimeout(e){return new Promise((t=>{setTimeout(t,e)}))}async waitForSelector(e,t={}){const i=await this._secondaryWorld.waitForSelector(e,t);if(!i)return null;const s=await this._mainWorld.executionContext(),a=await s._adoptElementHandle(i);return await i.dispose(),a}async waitForXPath(e,t={}){const i=await this._secondaryWorld.waitForXPath(e,t);if(!i)return null;const s=await this._mainWorld.executionContext(),a=await s._adoptElementHandle(i);return await i.dispose(),a}waitForFunction(e,t={},...i){return this._mainWorld.waitForFunction(e,t,...i)}async title(){return this._secondaryWorld.title()}_navigated(e){this._name=e.name,Dn(this,Nn,`${e.url}${e.urlFragment||""}`,"f")}_navigatedWithinDocument(e){Dn(this,Nn,e,"f")}_onLifecycleEvent(e,t){"init"===t&&(this._loaderId=e,this._lifecycleEvents.clear()),this._lifecycleEvents.add(t)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}_detach(){Dn(this,Rn,!0,"f"),this._mainWorld._detach(),this._secondaryWorld._detach(),An(this,Sn,"f")&&An(this,Sn,"f")._childFrames.delete(this),Dn(this,Sn,null,"f")}}function $n(t){e(void 0===t.networkIdleTimeout,"ERROR: networkIdleTimeout option is no longer supported."),e(void 0===t.networkIdleInflight,"ERROR: networkIdleInflight option is no longer supported."),e("networkidle"!==t.waitUntil,'ERROR: "networkidle" option is no longer supported. Use "networkidle2" instead')}Sn=new WeakMap,Nn=new WeakMap,Rn=new WeakMap,qn=new WeakMap;const Ln={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};var Bn,Hn,Un,zn,Vn,Gn,Jn,Xn,Qn,Yn,Zn,eo,to=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},io=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class so{constructor(e){Bn.add(this),Hn.set(this,void 0),Un.set(this,new Set),this._modifiers=0,to(this,Hn,e,"f")}async down(e,t={text:void 0}){const i=io(this,Bn,"m",Vn).call(this,e),s=io(this,Un,"f").has(i.code);io(this,Un,"f").add(i.code),this._modifiers|=io(this,Bn,"m",zn).call(this,i.key);const a=void 0===t.text?i.text:t.text;await io(this,Hn,"f").send("Input.dispatchKeyEvent",{type:a?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:i.keyCode,code:i.code,key:i.key,text:a,unmodifiedText:a,autoRepeat:s,location:i.location,isKeypad:3===i.location})}async up(e){const t=io(this,Bn,"m",Vn).call(this,e);this._modifiers&=~io(this,Bn,"m",zn).call(this,t.key),io(this,Un,"f").delete(t.code),await io(this,Hn,"f").send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:t.key,windowsVirtualKeyCode:t.keyCode,code:t.code,location:t.location})}async sendCharacter(e){await io(this,Hn,"f").send("Input.insertText",{text:e})}charIsKey(e){return!!Ln[e]}async type(e,t={}){const i=t.delay||void 0;for(const t of e)this.charIsKey(t)?await this.press(t,{delay:i}):(i&&await new Promise((e=>setTimeout(e,i))),await this.sendCharacter(t))}async press(e,t={}){const{delay:i=null}=t;await this.down(e,t),i&&await new Promise((e=>setTimeout(e,t.delay))),await this.up(e)}}Hn=new WeakMap,Un=new WeakMap,Bn=new WeakSet,zn=function(e){return"Alt"===e?1:"Control"===e?2:"Meta"===e?4:"Shift"===e?8:0},Vn=function(t){const i=8&this._modifiers,s={key:"",keyCode:0,code:"",text:"",location:0},a=Ln[t];return e(a,`Unknown key: "${t}"`),a.key&&(s.key=a.key),i&&a.shiftKey&&(s.key=a.shiftKey),a.keyCode&&(s.keyCode=a.keyCode),i&&a.shiftKeyCode&&(s.keyCode=a.shiftKeyCode),a.code&&(s.code=a.code),a.location&&(s.location=a.location),1===s.key.length&&(s.text=s.key),a.text&&(s.text=a.text),i&&a.shiftText&&(s.text=a.shiftText),-9&this._modifiers&&(s.text=""),s};class ao{constructor(e,t){Gn.set(this,void 0),Jn.set(this,void 0),Xn.set(this,0),Qn.set(this,0),Yn.set(this,"none"),to(this,Gn,e,"f"),to(this,Jn,t,"f")}async move(e,t,i={}){const{steps:s=1}=i,a=io(this,Xn,"f"),n=io(this,Qn,"f");to(this,Xn,e,"f"),to(this,Qn,t,"f");for(let e=1;e<=s;e++)await io(this,Gn,"f").send("Input.dispatchMouseEvent",{type:"mouseMoved",button:io(this,Yn,"f"),x:a+(io(this,Xn,"f")-a)*(e/s),y:n+(io(this,Qn,"f")-n)*(e/s),modifiers:io(this,Jn,"f")._modifiers})}async click(e,t,i={}){const{delay:s=null}=i;null!==s?(await this.move(e,t),await this.down(i),await new Promise((e=>setTimeout(e,s))),await this.up(i)):(await this.move(e,t),await this.down(i),await this.up(i))}async down(e={}){const{button:t="left",clickCount:i=1}=e;to(this,Yn,t,"f"),await io(this,Gn,"f").send("Input.dispatchMouseEvent",{type:"mousePressed",button:t,x:io(this,Xn,"f"),y:io(this,Qn,"f"),modifiers:io(this,Jn,"f")._modifiers,clickCount:i})}async up(e={}){const{button:t="left",clickCount:i=1}=e;to(this,Yn,"none","f"),await io(this,Gn,"f").send("Input.dispatchMouseEvent",{type:"mouseReleased",button:t,x:io(this,Xn,"f"),y:io(this,Qn,"f"),modifiers:io(this,Jn,"f")._modifiers,clickCount:i})}async wheel(e={}){const{deltaX:t=0,deltaY:i=0}=e;await io(this,Gn,"f").send("Input.dispatchMouseEvent",{type:"mouseWheel",x:io(this,Xn,"f"),y:io(this,Qn,"f"),deltaX:t,deltaY:i,modifiers:io(this,Jn,"f")._modifiers,pointerType:"mouse"})}async drag(e,t){const i=new Promise((e=>{io(this,Gn,"f").once("Input.dragIntercepted",(t=>e(t.data)))}));return await this.move(e.x,e.y),await this.down(),await this.move(t.x,t.y),i}async dragEnter(e,t){await io(this,Gn,"f").send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:io(this,Jn,"f")._modifiers,data:t})}async dragOver(e,t){await io(this,Gn,"f").send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:io(this,Jn,"f")._modifiers,data:t})}async drop(e,t){await io(this,Gn,"f").send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:io(this,Jn,"f")._modifiers,data:t})}async dragAndDrop(e,t,i={}){const{delay:s=null}=i,a=await this.drag(e,t);await this.dragEnter(t,a),await this.dragOver(t,a),s&&await new Promise((e=>setTimeout(e,s))),await this.drop(t,a),await this.up()}}Gn=new WeakMap,Jn=new WeakMap,Xn=new WeakMap,Qn=new WeakMap,Yn=new WeakMap;class no{constructor(e,t){Zn.set(this,void 0),eo.set(this,void 0),to(this,Zn,e,"f"),to(this,eo,t,"f")}async tap(e,t){const i=[{x:Math.round(e),y:Math.round(t)}];await io(this,Zn,"f").send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:i,modifiers:io(this,eo,"f")._modifiers}),await io(this,Zn,"f").send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[],modifiers:io(this,eo,"f")._modifiers})}}Zn=new WeakMap,eo=new WeakMap;const oo={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}};var ro,co,ho=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},lo=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class fo{constructor(){ro.set(this,void 0),co.set(this,void 0),ho(this,ro,null,"f"),ho(this,co,null,"f")}setDefaultTimeout(e){ho(this,ro,e,"f")}setDefaultNavigationTimeout(e){ho(this,co,e,"f")}navigationTimeout(){return null!==lo(this,co,"f")?lo(this,co,"f"):null!==lo(this,ro,"f")?lo(this,ro,"f"):3e4}timeout(){return null!==lo(this,ro,"f")?lo(this,ro,"f"):3e4}}ro=new WeakMap,co=new WeakMap;var uo,wo,yo,po=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},mo=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class go{constructor(e){uo.set(this,void 0),wo.set(this,!1),yo.set(this,void 0),po(this,uo,e,"f")}async start(t={}){e(!mo(this,wo,"f"),"Cannot start recording trace while already recording trace.");const i=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:s,screenshots:a=!1,categories:n=i}=t;a&&n.push("disabled-by-default-devtools.screenshot");const o=n.filter((e=>e.startsWith("-"))).map((e=>e.slice(1))),r=n.filter((e=>!e.startsWith("-")));po(this,yo,s,"f"),po(this,wo,!0,"f"),await mo(this,uo,"f").send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:o,includedCategories:r}})}async stop(){let e,t;const i=new Promise(((i,s)=>{e=i,t=s}));return mo(this,uo,"f").once("Tracing.tracingComplete",(async i=>{try{const t=await xe(mo(this,uo,"f"),i.stream),s=await Te(t,mo(this,yo,"f"));e(null!=s?s:void 0)}catch(e){We(e)?t(e):t(new Error(`Unknown error: ${e}`))}})),await mo(this,uo,"f").send("Tracing.end"),po(this,wo,!1,"f"),i}}uo=new WeakMap,wo=new WeakMap,yo=new WeakMap;var ko,vo,bo,Co,Mo=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},_o=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Eo extends a{constructor(e,t,i,s){let a;super(),ko.set(this,void 0),vo.set(this,void 0),bo.set(this,void 0),Co.set(this,void 0),Mo(this,ko,e,"f"),Mo(this,vo,t,"f"),Mo(this,bo,new Promise((e=>Mo(this,Co,e,"f"))),"f"),_o(this,ko,"f").once("Runtime.executionContextCreated",(async t=>{a=t=>new K(i,e,t);const i=new ot(e,t.context);_o(this,Co,"f").call(this,i)})),_o(this,ko,"f").send("Runtime.enable").catch(fe),_o(this,ko,"f").on("Runtime.consoleAPICalled",(e=>i(e.type,e.args.map(a),e.stackTrace))),_o(this,ko,"f").on("Runtime.exceptionThrown",(e=>s(e.exceptionDetails)))}url(){return _o(this,vo,"f")}async executionContext(){return _o(this,bo,"f")}async evaluate(e,...t){return(await _o(this,bo,"f")).evaluate(e,...t)}async evaluateHandle(e,...t){return(await _o(this,bo,"f")).evaluateHandle(e,...t)}}ko=new WeakMap,vo=new WeakMap,bo=new WeakMap,Co=new WeakMap;var Io,Po,To,xo,Wo,Fo,So,No,Ro,qo,Do,Ao,Ko,Oo,jo,$o,Lo,Bo,Ho,Uo,zo,Vo,Go,Jo,Xo,Qo,Yo,Zo,er,tr,ir,sr,ar,nr,or,rr,cr,hr,dr,lr,fr=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},ur=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class wr extends a{constructor(t,i,s,a){super(),Io.add(this),Po.set(this,!1),To.set(this,void 0),xo.set(this,void 0),Wo.set(this,void 0),Fo.set(this,void 0),So.set(this,new fo),No.set(this,void 0),Ro.set(this,void 0),qo.set(this,void 0),Do.set(this,void 0),Ao.set(this,void 0),Ko.set(this,new Map),Oo.set(this,void 0),jo.set(this,!0),$o.set(this,void 0),Lo.set(this,void 0),Bo.set(this,new Map),Ho.set(this,new Set),Uo.set(this,void 0),zo.set(this,!1),Vo.set(this,new WeakMap),Go.set(this,(e=>{var t;const i=null===(t=e._session())||void 0===t?void 0:t.id();ur(this,qo,"f").onDetachedFromTarget(e);const s=ur(this,Bo,"f").get(i);s&&(ur(this,Bo,"f").delete(i),this.emit("workerdestroyed",s))})),Jo.set(this,(async t=>{if(await ur(this,qo,"f").onAttachedToTarget(t),"worker"===t._getTargetInfo().type){const i=t._session();e(i);const s=new Eo(i,t.url(),ur(this,Io,"m",nr).bind(this),ur(this,Io,"m",ir).bind(this));ur(this,Bo,"f").set(i.id(),s),this.emit("workercreated",s)}t._session()&&ur(this,xo,"f")._targetManager().addTargetInterceptor(t._session(),ur(this,Jo,"f"))})),fr(this,To,t,"f"),fr(this,xo,i,"f"),fr(this,Wo,new so(t),"f"),fr(this,Fo,new ao(t,ur(this,Wo,"f")),"f"),fr(this,No,new no(t,ur(this,Wo,"f")),"f"),fr(this,Ro,new Ve(t),"f"),fr(this,qo,new On(t,this,s,ur(this,So,"f")),"f"),fr(this,Do,new Gt(t),"f"),fr(this,Ao,new go(t),"f"),fr(this,Oo,new Ft(t),"f"),fr(this,Lo,a,"f"),fr(this,$o,null,"f"),ur(this,xo,"f")._targetManager().addTargetInterceptor(ur(this,To,"f"),ur(this,Jo,"f")),ur(this,xo,"f")._targetManager().on("targetGone",ur(this,Go,"f")),ur(this,qo,"f").on(Kn.FrameAttached,(e=>this.emit("frameattached",e))),ur(this,qo,"f").on(Kn.FrameDetached,(e=>this.emit("framedetached",e))),ur(this,qo,"f").on(Kn.FrameNavigated,(e=>this.emit("framenavigated",e)));const n=ur(this,qo,"f").networkManager();n.on(Us.Request,(e=>this.emit("request",e))),n.on(Us.RequestServedFromCache,(e=>this.emit("requestservedfromcache",e))),n.on(Us.Response,(e=>this.emit("response",e))),n.on(Us.RequestFailed,(e=>this.emit("requestfailed",e))),n.on(Us.RequestFinished,(e=>this.emit("requestfinished",e))),fr(this,Ho,new Set,"f"),t.on("Page.domContentEventFired",(()=>this.emit("domcontentloaded"))),t.on("Page.loadEventFired",(()=>this.emit("load"))),t.on("Runtime.consoleAPICalled",(e=>ur(this,Io,"m",sr).call(this,e))),t.on("Runtime.bindingCalled",(e=>ur(this,Io,"m",ar).call(this,e))),t.on("Page.javascriptDialogOpening",(e=>ur(this,Io,"m",or).call(this,e))),t.on("Runtime.exceptionThrown",(e=>ur(this,Io,"m",ir).call(this,e.exceptionDetails))),t.on("Inspector.targetCrashed",(()=>ur(this,Io,"m",Yo).call(this))),t.on("Performance.metrics",(e=>ur(this,Io,"m",er).call(this,e))),t.on("Log.entryAdded",(e=>ur(this,Io,"m",Zo).call(this,e))),t.on("Page.fileChooserOpened",(e=>ur(this,Io,"m",Qo).call(this,e))),ur(this,xo,"f")._isClosedPromise.then((()=>{ur(this,xo,"f")._targetManager().removeTargetInterceptor(ur(this,To,"f"),ur(this,Jo,"f")),ur(this,xo,"f")._targetManager().off("targetGone",ur(this,Go,"f")),this.emit("close"),fr(this,Po,!0,"f")}))}static async _create(e,t,i,s,a){const n=new wr(e,t,i,a);return await ur(n,Io,"m",Xo).call(n),s&&await n.setViewport(s),n}isDragInterceptionEnabled(){return ur(this,zo,"f")}isJavaScriptEnabled(){return ur(this,jo,"f")}on(e,t){if("request"===e){const i=ur(this,Vo,"f").get(t)||(e=>{e.enqueueInterceptAction((()=>t(e)))});return ur(this,Vo,"f").set(t,i),super.on(e,i)}return super.on(e,t)}once(e,t){return super.once(e,t)}off(e,t){return"request"===e&&(t=ur(this,Vo,"f").get(t)||t),super.off(e,t)}async waitForFileChooser(e={}){ur(this,Ho,"f").size||await ur(this,To,"f").send("Page.setInterceptFileChooserDialog",{enabled:!0});const{timeout:t=ur(this,So,"f").timeout()}=e;let i;const s=new Promise((e=>i=e));return ur(this,Ho,"f").add(i),Ee(s,"waiting for file chooser",t).catch((e=>{throw ur(this,Ho,"f").delete(i),e}))}async setGeolocation(e){const{longitude:t,latitude:i,accuracy:s=0}=e;if(t<-180||t>180)throw new Error(`Invalid longitude "${t}": precondition -180 <= LONGITUDE <= 180 failed.`);if(i<-90||i>90)throw new Error(`Invalid latitude "${i}": precondition -90 <= LATITUDE <= 90 failed.`);if(s<0)throw new Error(`Invalid accuracy "${s}": precondition 0 <= ACCURACY failed.`);await ur(this,To,"f").send("Emulation.setGeolocationOverride",{longitude:t,latitude:i,accuracy:s})}target(){return ur(this,xo,"f")}_client(){return ur(this,To,"f")}browser(){return ur(this,xo,"f").browser()}browserContext(){return ur(this,xo,"f").browserContext()}mainFrame(){return ur(this,qo,"f").mainFrame()}get keyboard(){return ur(this,Wo,"f")}get touchscreen(){return ur(this,No,"f")}get coverage(){return ur(this,Oo,"f")}get tracing(){return ur(this,Ao,"f")}get accessibility(){return ur(this,Ro,"f")}frames(){return ur(this,qo,"f").frames()}workers(){return Array.from(ur(this,Bo,"f").values())}async setRequestInterception(e){return ur(this,qo,"f").networkManager().setRequestInterception(e)}async setDragInterception(e){return fr(this,zo,e,"f"),ur(this,To,"f").send("Input.setInterceptDrags",{enabled:e})}setOfflineMode(e){return ur(this,qo,"f").networkManager().setOfflineMode(e)}emulateNetworkConditions(e){return ur(this,qo,"f").networkManager().emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){ur(this,So,"f").setDefaultNavigationTimeout(e)}setDefaultTimeout(e){ur(this,So,"f").setDefaultTimeout(e)}async $(e){return this.mainFrame().$(e)}async $$(e){return this.mainFrame().$$(e)}async evaluateHandle(e,...t){return(await this.mainFrame().executionContext()).evaluateHandle(e,...t)}async queryObjects(e){return(await this.mainFrame().executionContext()).queryObjects(e)}async $eval(e,t,...i){return this.mainFrame().$eval(e,t,...i)}async $$eval(e,t,...i){return this.mainFrame().$$eval(e,t,...i)}async $x(e){return this.mainFrame().$x(e)}async cookies(...e){const t=(await ur(this,To,"f").send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,i=["priority"];return t.map((e=>{for(const t of i)delete e[t];return e}))}async deleteCookie(...e){const t=this.url();for(const i of e){const e=Object.assign({},i);!i.url&&t.startsWith("http")&&(e.url=t),await ur(this,To,"f").send("Network.deleteCookies",e)}}async setCookie(...t){const i=this.url(),s=i.startsWith("http"),a=t.map((t=>{const a=Object.assign({},t);return!a.url&&s&&(a.url=i),e("about:blank"!==a.url,`Blank page can not have cookie "${a.name}"`),e(!String.prototype.startsWith.call(a.url||"","data:"),`Data URL page can not have cookie "${a.name}"`),a}));await this.deleteCookie(...a),a.length&&await ur(this,To,"f").send("Network.setCookies",{cookies:a})}async addScriptTag(e){return this.mainFrame().addScriptTag(e)}async addStyleTag(e){return this.mainFrame().addStyleTag(e)}async exposeFunction(e,t){if(ur(this,Ko,"f").has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);let i;i="function"==typeof t?t:t.default,ur(this,Ko,"f").set(e,i);const s=Me("exposedFun",e);await ur(this,To,"f").send("Runtime.addBinding",{name:e}),await ur(this,To,"f").send("Page.addScriptToEvaluateOnNewDocument",{source:s}),await Promise.all(this.frames().map((e=>e.evaluate(s).catch(fe))))}async authenticate(e){return ur(this,qo,"f").networkManager().authenticate(e)}async setExtraHTTPHeaders(e){return ur(this,qo,"f").networkManager().setExtraHTTPHeaders(e)}async setUserAgent(e,t){return ur(this,qo,"f").networkManager().setUserAgent(e,t)}async metrics(){const e=await ur(this,To,"f").send("Performance.getMetrics");return ur(this,Io,"m",tr).call(this,e.metrics)}url(){return this.mainFrame().url()}async content(){return await ur(this,qo,"f").mainFrame().content()}async setContent(e,t={}){await ur(this,qo,"f").mainFrame().setContent(e,t)}async goto(e,t={}){return await ur(this,qo,"f").mainFrame().goto(e,t)}async reload(e){return(await Promise.all([this.waitForNavigation(e),ur(this,To,"f").send("Page.reload")]))[0]}async waitForNavigation(e={}){return await ur(this,qo,"f").mainFrame().waitForNavigation(e)}async waitForRequest(e,t={}){const{timeout:i=ur(this,So,"f").timeout()}=t;return ve(ur(this,qo,"f").networkManager(),Us.Request,(t=>ge(e)?e===t.url():"function"==typeof e&&!!e(t)),i,ur(this,Io,"m",hr).call(this))}async waitForResponse(e,t={}){const{timeout:i=ur(this,So,"f").timeout()}=t;return ve(ur(this,qo,"f").networkManager(),Us.Response,(async t=>ge(e)?e===t.url():"function"==typeof e&&!!await e(t)),i,ur(this,Io,"m",hr).call(this))}async waitForNetworkIdle(e={}){const{idleTime:t=500,timeout:i=ur(this,So,"f").timeout()}=e,s=ur(this,qo,"f").networkManager();let a;const n=new Promise((e=>{a=e}));let o;const r=new Promise(((e,t)=>{o=t}));let c;const h=()=>a(),d=()=>{c&&clearTimeout(c),o(new Error("abort"))},l=()=>{c&&clearTimeout(c),0===s.numRequestsInProgress()&&(c=setTimeout(h,t))};l();const f=()=>(l(),!1),u=e=>ve(s,e,f,i,r),w=[u(Us.Request),u(Us.Response)];await Promise.race([n,...w,ur(this,Io,"m",hr).call(this)]).then((e=>(d(),e)),(e=>{throw d(),e}))}async waitForFrame(e,t={}){const{timeout:i=ur(this,So,"f").timeout()}=t;let s;s=ge(e)?t=>Promise.resolve(e===t.url()):t=>{const i=e(t);return"boolean"==typeof i?Promise.resolve(i):i};const a=Promise.race([ve(ur(this,qo,"f"),Kn.FrameAttached,s,i,ur(this,Io,"m",hr).call(this)),ve(ur(this,qo,"f"),Kn.FrameNavigated,s,i,ur(this,Io,"m",hr).call(this)),...this.frames().map((async e=>await s(e)?e:await a))]);return a}async goBack(e={}){return ur(this,Io,"m",dr).call(this,-1,e)}async goForward(e={}){return ur(this,Io,"m",dr).call(this,1,e)}async bringToFront(){await ur(this,To,"f").send("Page.bringToFront")}async emulate(e){await Promise.all([this.setViewport(e.viewport),this.setUserAgent(e.userAgent)])}async setJavaScriptEnabled(e){ur(this,jo,"f")!==e&&(fr(this,jo,e,"f"),await ur(this,To,"f").send("Emulation.setScriptExecutionDisabled",{value:!e}))}async setBypassCSP(e){await ur(this,To,"f").send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(t){e("screen"===t||"print"===t||void 0===(null!=t?t:void 0),"Unsupported media type: "+t),await ur(this,To,"f").send("Emulation.setEmulatedMedia",{media:t||""})}async emulateCPUThrottling(t){e(null===t||t>=1,"Throttling rate should be greater or equal to 1"),await ur(this,To,"f").send("Emulation.setCPUThrottlingRate",{rate:null!==t?t:1})}async emulateMediaFeatures(t){if(t||await ur(this,To,"f").send("Emulation.setEmulatedMedia",{}),Array.isArray(t)){for(const i of t){const t=i.name;e(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(t),"Unsupported media feature: "+t)}await ur(this,To,"f").send("Emulation.setEmulatedMedia",{features:t})}}async emulateTimezone(e){try{await ur(this,To,"f").send("Emulation.setTimezoneOverride",{timezoneId:e||""})}catch(t){if(We(t)&&t.message.includes("Invalid timezone"))throw new Error(`Invalid timezone ID: ${e}`);throw t}}async emulateIdleState(e){e?await ur(this,To,"f").send("Emulation.setIdleOverride",{isUserActive:e.isUserActive,isScreenUnlocked:e.isScreenUnlocked}):await ur(this,To,"f").send("Emulation.clearIdleOverride")}async emulateVisionDeficiency(t){const i=new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","tritanopia"]);try{e(!t||i.has(t),`Unsupported vision deficiency: ${t}`),await ur(this,To,"f").send("Emulation.setEmulatedVisionDeficiency",{type:t||"none"})}catch(e){throw e}}async setViewport(e){const t=await ur(this,Do,"f").emulateViewport(e);fr(this,$o,e,"f"),t&&await this.reload()}viewport(){return ur(this,$o,"f")}async evaluate(e,...t){return ur(this,qo,"f").mainFrame().evaluate(e,...t)}async evaluateOnNewDocument(e,...t){const i=Ce(e,...t);await ur(this,To,"f").send("Page.addScriptToEvaluateOnNewDocument",{source:i})}async setCacheEnabled(e=!0){await ur(this,qo,"f").networkManager().setCacheEnabled(e)}async screenshot(t={}){let i="png";if(t.type)i=t.type;else if(t.path){const e=t.path,s=e.slice(e.lastIndexOf(".")+1).toLowerCase();switch(s){case"png":i="png";break;case"jpeg":case"jpg":i="jpeg";break;case"webp":i="webp";break;default:throw new Error(`Unsupported screenshot type for extension \`.${s}\``)}}return t.quality&&(e("jpeg"===i||"webp"===i,"options.quality is unsupported for the "+i+" screenshots"),e("number"==typeof t.quality,"Expected options.quality to be a number but found "+typeof t.quality),e(Number.isInteger(t.quality),"Expected options.quality to be an integer"),e(t.quality>=0&&t.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+t.quality)),e(!t.clip||!t.fullPage,"options.clip and options.fullPage are exclusive"),t.clip&&(e("number"==typeof t.clip.x,"Expected options.clip.x to be a number but found "+typeof t.clip.x),e("number"==typeof t.clip.y,"Expected options.clip.y to be a number but found "+typeof t.clip.y),e("number"==typeof t.clip.width,"Expected options.clip.width to be a number but found "+typeof t.clip.width),e("number"==typeof t.clip.height,"Expected options.clip.height to be a number but found "+typeof t.clip.height),e(0!==t.clip.width,"Expected options.clip.width not to be 0."),e(0!==t.clip.height,"Expected options.clip.height not to be 0.")),ur(this,Lo,"f").postTask((()=>ur(this,Io,"m",lr).call(this,i,t)))}async createPDFStream(t={}){const{scale:i=1,displayHeaderFooter:s=!1,headerTemplate:a="",footerTemplate:n="",printBackground:o=!1,landscape:r=!1,pageRanges:c="",preferCSSPageSize:h=!1,margin:d={},omitBackground:l=!1,timeout:f=3e4}=t;let u=8.5,w=11;if(t.format){const i=oo[t.format.toLowerCase()];e(i,"Unknown paper format: "+t.format),u=i.width,w=i.height}else u=mr(t.width)||u,w=mr(t.height)||w;const y=mr(d.top)||0,p=mr(d.left)||0,m=mr(d.bottom)||0,g=mr(d.right)||0;l&&await ur(this,Io,"m",cr).call(this);const k=ur(this,To,"f").send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:r,displayHeaderFooter:s,headerTemplate:a,footerTemplate:n,printBackground:o,scale:i,paperWidth:u,paperHeight:w,marginTop:y,marginBottom:m,marginLeft:p,marginRight:g,pageRanges:c,preferCSSPageSize:h}),v=await Ee(k,"Page.printToPDF",f);return l&&await ur(this,Io,"m",rr).call(this),e(v.stream,"`stream` is missing from `Page.printToPDF"),xe(ur(this,To,"f"),v.stream)}async pdf(t={}){const{path:i}=t,s=await this.createPDFStream(t),a=await Te(s,i);return e(a,"Could not create buffer"),a}async title(){return this.mainFrame().title()}async close(t={runBeforeUnload:void 0}){const i=ur(this,To,"f").connection();e(i,"Protocol error: Connection closed. Most likely the page has been closed."),t.runBeforeUnload?await ur(this,To,"f").send("Page.close"):(await i.send("Target.closeTarget",{targetId:ur(this,xo,"f")._targetId}),await ur(this,xo,"f")._isClosedPromise)}isClosed(){return ur(this,Po,"f")}get mouse(){return ur(this,Fo,"f")}click(e,t={}){return this.mainFrame().click(e,t)}focus(e){return this.mainFrame().focus(e)}hover(e){return this.mainFrame().hover(e)}select(e,...t){return this.mainFrame().select(e,...t)}tap(e){return this.mainFrame().tap(e)}type(e,t,i){return this.mainFrame().type(e,t,i)}waitForTimeout(e){return this.mainFrame().waitForTimeout(e)}async waitForSelector(e,t={}){return await this.mainFrame().waitForSelector(e,t)}waitForXPath(e,t={}){return this.mainFrame().waitForXPath(e,t)}waitForFunction(e,t={},...i){return this.mainFrame().waitForFunction(e,t,...i)}}Po=new WeakMap,To=new WeakMap,xo=new WeakMap,Wo=new WeakMap,Fo=new WeakMap,So=new WeakMap,No=new WeakMap,Ro=new WeakMap,qo=new WeakMap,Do=new WeakMap,Ao=new WeakMap,Ko=new WeakMap,Oo=new WeakMap,jo=new WeakMap,$o=new WeakMap,Lo=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,Uo=new WeakMap,zo=new WeakMap,Vo=new WeakMap,Go=new WeakMap,Jo=new WeakMap,Io=new WeakSet,Xo=async function(){await Promise.all([ur(this,qo,"f").initialize(ur(this,xo,"f")._targetId),ur(this,To,"f").send("Performance.enable"),ur(this,To,"f").send("Log.enable")])},Qo=async function(t){if(!ur(this,Ho,"f").size)return;const i=ur(this,qo,"f").frame(t.frameId);e(i);const s=await i.executionContext(),a=await s._adoptBackendNodeId(t.backendNodeId),n=Array.from(ur(this,Ho,"f"));ur(this,Ho,"f").clear();const o=new ei(a,t);for(const e of n)e.call(void 0,o)},Yo=function(){this.emit("error",new Error("Page crashed!"))},Zo=function(e){const{level:t,text:i,args:s,source:a,url:n,lineNumber:o}=e.entry;s&&s.map((e=>ye(ur(this,To,"f"),e))),"worker"!==a&&this.emit("console",new tt(t,i,[],[{url:n,lineNumber:o}]))},er=function(e){this.emit("metrics",{title:e.title,metrics:ur(this,Io,"m",tr).call(this,e.metrics)})},tr=function(e){const t={};for(const i of e||[])yr.has(i.name)&&(t[i.name]=i.value);return t},ir=function(e){const t=ue(e),i=new Error(t);i.stack="",this.emit("pageerror",i)},sr=async function(e){if(0===e.executionContextId)return;const t=ur(this,qo,"f").executionContextById(e.executionContextId,ur(this,To,"f")),i=e.args.map((e=>be(t,e)));ur(this,Io,"m",nr).call(this,e.type,i,e.stackTrace)},ar=async function(t){let i;try{i=JSON.parse(t.payload)}catch{return}const{type:s,name:a,seq:n,args:o}=i;if("exposedFun"!==s||!ur(this,Ko,"f").has(a))return;let r=null;try{const t=ur(this,Ko,"f").get(a);e(t),r=function(e,t,i){return Ce((function(e,t,i){window[e].callbacks.get(t).resolve(i),window[e].callbacks.delete(t)}),e,t,i)}(a,n,await t(...o))}catch(e){r=We(e)?function(e,t,i,s){return Ce((function(e,t,i,s){const a=new Error(i);a.stack=s,window[e].callbacks.get(t).reject(a),window[e].callbacks.delete(t)}),e,t,i,s)}(a,n,e.message,e.stack):function(e,t,i){return Ce((function(e,t,i){window[e].callbacks.get(t).reject(i),window[e].callbacks.delete(t)}),e,t,i)}(a,n,e)}ur(this,To,"f").send("Runtime.evaluate",{expression:r,contextId:t.executionContextId}).catch(fe)},nr=function(e,t,i){if(!this.listenerCount("console"))return void t.forEach((e=>e.dispose()));const s=[];for(const e of t){const t=e._remoteObject;t.objectId?s.push(e.toString()):s.push(we(t))}const a=[];if(i)for(const e of i.callFrames)a.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});const n=new tt(e,s.join(" "),t,a);this.emit("console",n)},or=function(t){let i=null;new Set(["alert","confirm","prompt","beforeunload"]).has(t.type)&&(i=t.type),e(i,"Unknown javascript dialog type: "+t.type);const s=new Lt(ur(this,To,"f"),i,t.message,t.defaultPrompt);this.emit("dialog",s)},rr=async function(){await ur(this,To,"f").send("Emulation.setDefaultBackgroundColorOverride")},cr=async function(){await ur(this,To,"f").send("Emulation.setDefaultBackgroundColorOverride",{color:{r:0,g:0,b:0,a:0}})},hr=function(){return ur(this,Uo,"f")||fr(this,Uo,new Promise((e=>ur(this,To,"f").once(T.Disconnected,(()=>e(new Error("Target closed")))))),"f"),ur(this,Uo,"f")},dr=async function(e,t){const i=await ur(this,To,"f").send("Page.getNavigationHistory"),s=i.entries[i.currentIndex+e];return s?(await Promise.all([this.waitForNavigation(t),ur(this,To,"f").send("Page.navigateToHistoryEntry",{entryId:s.id})]))[0]:null},lr=async function(e,t={}){await ur(this,To,"f").send("Target.activateTarget",{targetId:ur(this,xo,"f")._targetId});let i=t.clip?function(e){const t=Math.round(e.x),i=Math.round(e.y);return{x:t,y:i,width:Math.round(e.width+e.x-t),height:Math.round(e.height+e.y-i),scale:1}}(t.clip):void 0;const s="boolean"!=typeof t.captureBeyondViewport||t.captureBeyondViewport,a="boolean"==typeof t.fromSurface?t.fromSurface:void 0;if(t.fullPage){const e=await ur(this,To,"f").send("Page.getLayoutMetrics"),{width:t,height:a}=e.cssContentSize||e.contentSize;if(i={x:0,y:0,width:t,height:a,scale:1},!s){const{isMobile:e=!1,deviceScaleFactor:i=1,isLandscape:s=!1}=ur(this,$o,"f")||{},n=s?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"};await ur(this,To,"f").send("Emulation.setDeviceMetricsOverride",{mobile:e,width:t,height:a,deviceScaleFactor:i,screenOrientation:n})}}const n=t.omitBackground&&("png"===e||"webp"===e);n&&await ur(this,Io,"m",cr).call(this);const o=await ur(this,To,"f").send("Page.captureScreenshot",{format:e,quality:t.quality,clip:i,captureBeyondViewport:s,fromSurface:a});n&&await ur(this,Io,"m",rr).call(this),t.fullPage&&ur(this,$o,"f")&&await this.setViewport(ur(this,$o,"f"));const r="base64"===t.encoding?o.data:Buffer.from(o.data,"base64");if(t.path)try{const e=(await Pe()).promises;await e.writeFile(t.path,r)}catch(e){if(e instanceof TypeError)throw new Error("Screenshots can only be written to a file path in a Node-like environment.");throw e}return r};const yr=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]),pr={px:1,in:96,cm:37.8,mm:3.78};function mr(t){if(void 0===t)return;let i;if(ke(t))i=t;else{if(!ge(t))throw new Error("page.pdf() Cannot handle parameter type: "+typeof t);{const s=t;let a=s.substring(s.length-2).toLowerCase(),n="";a in pr?n=s.substring(0,s.length-2):(a="px",n=s);const o=Number(n);e(!isNaN(o),"Failed to parse parameter value: "+s),i=o*pr[a]}}return i/96}var gr,kr,vr,br,Cr,Mr,_r,Er,Ir,Pr,Tr=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},xr=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Wr{constructor(e,t,i,s,a,n,o,r,c){gr.set(this,void 0),kr.set(this,void 0),vr.set(this,void 0),br.set(this,void 0),Cr.set(this,void 0),Mr.set(this,void 0),_r.set(this,void 0),Er.set(this,void 0),Ir.set(this,void 0),Pr.set(this,void 0),Tr(this,kr,t,"f"),Tr(this,Pr,s,"f"),Tr(this,vr,e,"f"),Tr(this,gr,i,"f"),this._targetId=e.targetId,Tr(this,br,a,"f"),Tr(this,Cr,n,"f"),Tr(this,Mr,null!=o?o:void 0,"f"),Tr(this,Ir,r,"f"),this._isPageTargetCallback=c,this._initializedPromise=new Promise((e=>this._initializedCallback=e)).then((async e=>{if(!e)return!1;const t=this.opener();if(!t||!xr(t,_r,"f")||"page"!==this.type())return!0;const i=await xr(t,_r,"f");if(!i.listenerCount("popup"))return!0;const s=await this.page();return i.emit("popup",s),!0})),this._isClosedPromise=new Promise((e=>this._closedCallback=e)),this._isInitialized=!this._isPageTargetCallback(xr(this,vr,"f"))||""!==xr(this,vr,"f").url,this._isInitialized&&this._initializedCallback(!0)}_session(){return xr(this,kr,"f")}createCDPSession(){return xr(this,br,"f").call(this)}_targetManager(){return xr(this,Pr,"f")}_getTargetInfo(){return xr(this,vr,"f")}async page(){var e;return this._isPageTargetCallback(xr(this,vr,"f"))&&!xr(this,_r,"f")&&Tr(this,_r,(xr(this,kr,"f")?Promise.resolve(xr(this,kr,"f")):xr(this,br,"f").call(this)).then((e=>{var t;return wr._create(e,this,xr(this,Cr,"f"),null!==(t=xr(this,Mr,"f"))&&void 0!==t?t:null,xr(this,Ir,"f"))})),"f"),null!==(e=await xr(this,_r,"f"))&&void 0!==e?e:null}async worker(){return"service_worker"!==xr(this,vr,"f").type&&"shared_worker"!==xr(this,vr,"f").type?null:(xr(this,Er,"f")||Tr(this,Er,(xr(this,kr,"f")?Promise.resolve(xr(this,kr,"f")):xr(this,br,"f").call(this)).then((e=>new Eo(e,xr(this,vr,"f").url,(()=>{}),(()=>{})))),"f"),xr(this,Er,"f"))}url(){return xr(this,vr,"f").url}type(){const e=xr(this,vr,"f").type;return"page"===e||"background_page"===e||"service_worker"===e||"shared_worker"===e||"browser"===e||"webview"===e?e:"other"}browser(){return xr(this,gr,"f").browser()}browserContext(){return xr(this,gr,"f")}opener(){const{openerId:e}=xr(this,vr,"f");if(e)return this.browser()._targets.get(e)}_targetInfoChanged(e){if(Tr(this,vr,e,"f"),!(this._isInitialized||this._isPageTargetCallback(xr(this,vr,"f"))&&""===xr(this,vr,"f").url))return this._isInitialized=!0,void this._initializedCallback(!0)}}gr=new WeakMap,kr=new WeakMap,vr=new WeakMap,br=new WeakMap,Cr=new WeakMap,Mr=new WeakMap,_r=new WeakMap,Er=new WeakMap,Ir=new WeakMap,Pr=new WeakMap;var Fr,Sr=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Nr=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Rr{constructor(){Fr.set(this,void 0),Sr(this,Fr,Promise.resolve(),"f")}postTask(e){const t=Nr(this,Fr,"f").then(e);return Sr(this,Fr,t.then((()=>{}),(()=>{})),"f"),t}}Fr=new WeakMap;var qr,Dr,Ar,Kr,Or,jr,$r,Lr,Br,Hr,Ur,zr,Vr,Gr,Jr,Xr,Qr,Yr,Zr,ec,tc,ic,sc,ac=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},nc=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class oc extends a{constructor(t,i,s){super(),qr.add(this),Dr.set(this,void 0),Ar.set(this,new Map),Kr.set(this,new Map),Or.set(this,new Map),jr.set(this,new Set),$r.set(this,void 0),Lr.set(this,void 0),Br.set(this,new WeakMap),Hr.set(this,new WeakMap),Ur.set(this,new WeakMap),zr.set(this,(()=>{})),Vr.set(this,new Promise((e=>{ac(this,zr,e,"f")}))),Gr.set(this,new Set),Qr.set(this,(e=>{nc(this,qr,"m",Xr).call(this,e),nc(this,Br,"f").delete(e)})),Yr.set(this,(async e=>{if(nc(this,Ar,"f").set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){if(nc(this,Kr,"f").has(e.targetInfo.targetId))return;const t=nc(this,Lr,"f").call(this,e.targetInfo,void 0);nc(this,Kr,"f").set(e.targetInfo.targetId,t)}"shared_worker"===e.targetInfo.type&&await nc(this,Dr,"f").createSession(e.targetInfo)})),Zr.set(this,(e=>{const t=nc(this,Ar,"f").get(e.targetId);if(nc(this,Ar,"f").delete(e.targetId),nc(this,qr,"m",ic).call(this,e.targetId),"service_worker"===(null==t?void 0:t.type)&&nc(this,Kr,"f").has(e.targetId)){const t=nc(this,Kr,"f").get(e.targetId);this.emit("targetGone",t),nc(this,Kr,"f").delete(e.targetId)}})),ec.set(this,(e=>{if(nc(this,Ar,"f").set(e.targetInfo.targetId,e.targetInfo),nc(this,jr,"f").has(e.targetInfo.targetId)||!nc(this,Kr,"f").has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const t=nc(this,Kr,"f").get(e.targetInfo.targetId);this.emit("targetChanged",{target:t,targetInfo:e.targetInfo})})),tc.set(this,(async(t,i)=>{const s=i.targetInfo,a=nc(this,Dr,"f").session(i.sessionId);if(!a)throw new Error(`Session ${i.sessionId} was not created.`);const n=async()=>{await a.send("Runtime.runIfWaitingForDebugger").catch(fe),await t.send("Target.detachFromTarget",{sessionId:a.id()}).catch(fe)};if("service_worker"===s.type&&nc(this,Dr,"f").isAutoAttached(s.targetId)){if(nc(this,qr,"m",ic).call(this,s.targetId),await n(),t instanceof x){const e=nc(this,Lr,"f").call(this,s);nc(this,Kr,"f").set(s.targetId,e),this.emit("targetAvailable",e)}return}if(nc(this,$r,"f")&&!nc(this,$r,"f").call(this,s))return nc(this,jr,"f").add(s.targetId),nc(this,qr,"m",ic).call(this,s.targetId),void await n();const o=nc(this,Kr,"f").has(s.targetId),r=o?nc(this,Kr,"f").get(s.targetId):nc(this,Lr,"f").call(this,s,a);nc(this,qr,"m",Jr).call(this,a),o?nc(this,Or,"f").set(a.id(),nc(this,Kr,"f").get(s.targetId)):(nc(this,Kr,"f").set(s.targetId,r),nc(this,Or,"f").set(a.id(),r));for(const i of nc(this,Br,"f").get(t)||[])t instanceof P||e(nc(this,Or,"f").has(t.id())),await i(r,t instanceof P?null:nc(this,Or,"f").get(t.id()));nc(this,Gr,"f").delete(r._targetId),this.emit("targetAvailable",r),0===nc(this,Gr,"f").size&&nc(this,zr,"f").call(this),await Promise.all([a.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0}),a.send("Runtime.runIfWaitingForDebugger")]).catch(fe)})),sc.set(this,((e,t)=>{const i=nc(this,Or,"f").get(t.sessionId);nc(this,Or,"f").delete(t.sessionId),i&&(nc(this,Kr,"f").delete(i._targetId),this.emit("targetGone",i))})),ac(this,Dr,t,"f"),ac(this,$r,s,"f"),ac(this,Lr,i,"f"),nc(this,Dr,"f").on("Target.targetCreated",nc(this,Yr,"f")),nc(this,Dr,"f").on("Target.targetDestroyed",nc(this,Zr,"f")),nc(this,Dr,"f").on("Target.targetInfoChanged",nc(this,ec,"f")),nc(this,Dr,"f").on("sessiondetached",nc(this,Qr,"f")),nc(this,qr,"m",Jr).call(this,nc(this,Dr,"f")),nc(this,Dr,"f").send("Target.setDiscoverTargets",{discover:!0})}async initialize(){ac(this,Gr,new Set,"f");for(const[e,t]of nc(this,Ar,"f").entries())nc(this,$r,"f")&&!nc(this,$r,"f").call(this,t)||nc(this,Gr,"f").add(e);await nc(this,Dr,"f").send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0}),await nc(this,Vr,"f")}dispose(){nc(this,Dr,"f").off("Target.targetCreated",nc(this,Yr,"f")),nc(this,Dr,"f").off("Target.targetDestroyed",nc(this,Zr,"f")),nc(this,Dr,"f").off("Target.targetInfoChanged",nc(this,ec,"f")),nc(this,Dr,"f").off("sessiondetached",nc(this,Qr,"f")),nc(this,qr,"m",Xr).call(this,nc(this,Dr,"f"))}getAvailableTargets(){return nc(this,Kr,"f")}addTargetInterceptor(e,t){const i=nc(this,Br,"f").get(e)||[];i.push(t),nc(this,Br,"f").set(e,i)}removeTargetInterceptor(e,t){const i=nc(this,Br,"f").get(e)||[];nc(this,Br,"f").set(e,i.filter((e=>e!==t)))}}Dr=new WeakMap,Ar=new WeakMap,Kr=new WeakMap,Or=new WeakMap,jr=new WeakMap,$r=new WeakMap,Lr=new WeakMap,Br=new WeakMap,Hr=new WeakMap,Ur=new WeakMap,zr=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,Qr=new WeakMap,Yr=new WeakMap,Zr=new WeakMap,ec=new WeakMap,tc=new WeakMap,sc=new WeakMap,qr=new WeakSet,Jr=function(t){const i=e=>nc(this,tc,"f").call(this,t,e);e(!nc(this,Hr,"f").has(t)),nc(this,Hr,"f").set(t,i),t.on("Target.attachedToTarget",i);const s=e=>nc(this,sc,"f").call(this,t,e);e(!nc(this,Ur,"f").has(t)),nc(this,Ur,"f").set(t,s),t.on("Target.detachedFromTarget",s)},Xr=function(e){nc(this,Hr,"f").has(e)&&(e.off("Target.attachedToTarget",nc(this,Hr,"f").get(e)),nc(this,Hr,"f").delete(e)),nc(this,Ur,"f").has(e)&&(e.off("Target.detachedFromTarget",nc(this,Ur,"f").get(e)),nc(this,Ur,"f").delete(e))},ic=function(e){nc(this,Gr,"f").delete(e),0===nc(this,Gr,"f").size&&nc(this,zr,"f").call(this)};var rc,cc,hc,dc,lc,fc,uc,wc,yc,pc,mc,gc,kc,vc,bc,Cc,Mc,_c,Ec=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Ic=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Pc extends a{constructor(t,i,s){super(),rc.add(this),cc.set(this,void 0),hc.set(this,new Map),dc.set(this,new Map),lc.set(this,new Map),fc.set(this,new Set),uc.set(this,void 0),wc.set(this,void 0),yc.set(this,new WeakMap),pc.set(this,new WeakMap),mc.set(this,(()=>{})),gc.set(this,new Promise((e=>{Ec(this,mc,e,"f")}))),kc.set(this,new Set),vc.set(this,(e=>{this.removeSessionListeners(e),Ic(this,yc,"f").delete(e),Ic(this,lc,"f").delete(e.id())})),bc.set(this,(async e=>{if(Ic(this,hc,"f").has(e.targetInfo.targetId))return;if(Ic(this,hc,"f").set(e.targetInfo.targetId,e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){const t=Ic(this,wc,"f").call(this,e.targetInfo,void 0);return Ic(this,dc,"f").set(e.targetInfo.targetId,t),void Ic(this,rc,"m",_c).call(this,t._targetId)}if(Ic(this,uc,"f")&&!Ic(this,uc,"f").call(this,e.targetInfo))return Ic(this,fc,"f").add(e.targetInfo.targetId),void Ic(this,rc,"m",_c).call(this,e.targetInfo.targetId);const t=Ic(this,wc,"f").call(this,e.targetInfo,void 0);Ic(this,dc,"f").set(e.targetInfo.targetId,t),this.emit("targetAvailable",t),Ic(this,rc,"m",_c).call(this,t._targetId)})),Cc.set(this,(e=>{Ic(this,hc,"f").delete(e.targetId),Ic(this,rc,"m",_c).call(this,e.targetId);const t=Ic(this,dc,"f").get(e.targetId);t&&(this.emit("targetGone",t),Ic(this,dc,"f").delete(e.targetId))})),Mc.set(this,(async(t,i)=>{const s=i.targetInfo,a=Ic(this,cc,"f").session(i.sessionId);if(!a)throw new Error(`Session ${i.sessionId} was not created.`);const n=Ic(this,dc,"f").get(s.targetId);e(n,`Target ${s.targetId} is missing`),this.setupAttachmentListeners(a),Ic(this,lc,"f").set(a.id(),Ic(this,dc,"f").get(s.targetId));for(const i of Ic(this,yc,"f").get(t)||[])t instanceof P||e(Ic(this,lc,"f").has(t.id())),await i(n,t instanceof P?null:Ic(this,lc,"f").get(t.id()))})),Ec(this,cc,t,"f"),Ec(this,uc,s,"f"),Ec(this,wc,i,"f"),Ic(this,cc,"f").on("Target.targetCreated",Ic(this,bc,"f")),Ic(this,cc,"f").on("Target.targetDestroyed",Ic(this,Cc,"f")),Ic(this,cc,"f").on("sessiondetached",Ic(this,vc,"f")),this.setupAttachmentListeners(Ic(this,cc,"f"))}addTargetInterceptor(e,t){const i=Ic(this,yc,"f").get(e)||[];i.push(t),Ic(this,yc,"f").set(e,i)}removeTargetInterceptor(e,t){const i=Ic(this,yc,"f").get(e)||[];Ic(this,yc,"f").set(e,i.filter((e=>e!==t)))}setupAttachmentListeners(t){const i=e=>Ic(this,Mc,"f").call(this,t,e);e(!Ic(this,pc,"f").has(t)),Ic(this,pc,"f").set(t,i),t.on("Target.attachedToTarget",i)}removeSessionListeners(e){Ic(this,pc,"f").has(e)&&(e.off("Target.attachedToTarget",Ic(this,pc,"f").get(e)),Ic(this,pc,"f").delete(e))}getAvailableTargets(){return Ic(this,dc,"f")}dispose(){Ic(this,cc,"f").off("Target.targetCreated",Ic(this,bc,"f")),Ic(this,cc,"f").off("Target.targetDestroyed",Ic(this,Cc,"f"))}async initialize(){await Ic(this,cc,"f").send("Target.setDiscoverTargets",{discover:!0}),Ec(this,kc,new Set(Ic(this,hc,"f").keys()),"f"),await Ic(this,gc,"f")}}cc=new WeakMap,hc=new WeakMap,dc=new WeakMap,lc=new WeakMap,fc=new WeakMap,uc=new WeakMap,wc=new WeakMap,yc=new WeakMap,pc=new WeakMap,mc=new WeakMap,gc=new WeakMap,kc=new WeakMap,vc=new WeakMap,bc=new WeakMap,Cc=new WeakMap,Mc=new WeakMap,rc=new WeakSet,_c=function(e){Ic(this,kc,"f").delete(e),0===Ic(this,kc,"f").size&&Ic(this,mc,"f").call(this)};var Tc,xc,Wc,Fc,Sc,Nc,Rc,qc,Dc,Ac,Kc,Oc,jc,$c,Lc,Bc,Hc,Uc,zc,Vc,Gc,Jc,Xc,Qc=self&&self.__classPrivateFieldSet||function(e,t,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,i):a?a.value=i:t.set(e,i),i},Yc=self&&self.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Zc=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);class eh extends a{constructor(e,t,i,s,a,n,o,r,c){super(),Tc.add(this),xc.set(this,void 0),Wc.set(this,void 0),Fc.set(this,void 0),Sc.set(this,void 0),Nc.set(this,void 0),Rc.set(this,void 0),qc.set(this,void 0),Dc.set(this,void 0),Ac.set(this,void 0),Kc.set(this,void 0),Oc.set(this,void 0),jc.set(this,(()=>{this.emit("disconnected")})),Lc.set(this,((e,t)=>{var i;const{browserContextId:s}=e,a=s&&Yc(this,Ac,"f").has(s)?Yc(this,Ac,"f").get(s):Yc(this,Dc,"f");if(!a)throw new Error("Missing browser context");return new Wr(e,t,a,Yc(this,Oc,"f"),(()=>Yc(this,Sc,"f").createSession(e)),Yc(this,xc,"f"),null!==(i=Yc(this,Wc,"f"))&&void 0!==i?i:null,Yc(this,Kc,"f"),Yc(this,qc,"f"))})),Bc.set(this,(async e=>{await e._initializedPromise&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))})),Hc.set(this,(async e=>{e._initializedCallback(!1),e._closedCallback(),await e._initializedPromise&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))})),Uc.set(this,(({target:e,targetInfo:t})=>{const i=e.url(),s=e._isInitialized;e._targetInfoChanged(t),s&&i!==e.url()&&(this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e))})),zc.set(this,(e=>{this.emit("targetdiscovered",e)})),e=e||"chrome",Qc(this,xc,s,"f"),Qc(this,Wc,a,"f"),Qc(this,Fc,n,"f"),Qc(this,Kc,new Rr,"f"),Qc(this,Sc,t,"f"),Qc(this,Nc,o||function(){},"f"),Qc(this,Rc,r||(()=>!0),"f"),Yc(this,Tc,"m",$c).call(this,c),Qc(this,Oc,"firefox"===e?new Pc(t,Yc(this,Lc,"f"),Yc(this,Rc,"f")):new oc(t,Yc(this,Lc,"f"),Yc(this,Rc,"f")),"f"),Qc(this,Dc,new th(Yc(this,Sc,"f"),this),"f"),Qc(this,Ac,new Map,"f");for(const e of i)Yc(this,Ac,"f").set(e,new th(Yc(this,Sc,"f"),this,e))}static async _create(e,t,i,s,a,n,o,r,c){const h=new eh(e,t,i,s,a,n,o,r,c);return await h._attach(),h}get _targets(){return Yc(this,Oc,"f").getAvailableTargets()}async _attach(){Yc(this,Sc,"f").on(I.Disconnected,Yc(this,jc,"f")),Yc(this,Oc,"f").on("targetAvailable",Yc(this,Bc,"f")),Yc(this,Oc,"f").on("targetGone",Yc(this,Hc,"f")),Yc(this,Oc,"f").on("targetChanged",Yc(this,Uc,"f")),Yc(this,Oc,"f").on("targetDiscovered",Yc(this,zc,"f")),await Yc(this,Oc,"f").initialize()}_detach(){Yc(this,Sc,"f").off(I.Disconnected,Yc(this,jc,"f")),Yc(this,Oc,"f").off("targetAvailable",Yc(this,Bc,"f")),Yc(this,Oc,"f").off("targetGone",Yc(this,Hc,"f")),Yc(this,Oc,"f").off("targetChanged",Yc(this,Uc,"f")),Yc(this,Oc,"f").off("targetDiscovered",Yc(this,zc,"f"))}process(){var e;return null!==(e=Yc(this,Fc,"f"))&&void 0!==e?e:null}_targetManager(){return Yc(this,Oc,"f")}_getIsPageTargetCallback(){return Yc(this,qc,"f")}async createIncognitoBrowserContext(e={}){const{proxyServer:t,proxyBypassList:i}=e,{browserContextId:s}=await Yc(this,Sc,"f").send("Target.createBrowserContext",{proxyServer:t,proxyBypassList:i&&i.join(",")}),a=new th(Yc(this,Sc,"f"),this,s);return Yc(this,Ac,"f").set(s,a),a}browserContexts(){return[Yc(this,Dc,"f"),...Array.from(Yc(this,Ac,"f").values())]}defaultBrowserContext(){return Yc(this,Dc,"f")}async _disposeContext(e){e&&(await Yc(this,Sc,"f").send("Target.disposeBrowserContext",{browserContextId:e}),Yc(this,Ac,"f").delete(e))}wsEndpoint(){return Yc(this,Sc,"f").url()}async newPage(){return Yc(this,Dc,"f").newPage()}async _createPageInContext(e){const{targetId:t}=await Yc(this,Sc,"f").send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),i=Yc(this,Oc,"f").getAvailableTargets().get(t);if(!i)throw new Error(`Missing target for page (id = ${t})`);if(!await i._initializedPromise)throw new Error(`Failed to create target for page (id = ${t})`);const s=await i.page();if(!s)throw new Error(`Failed to create a page for context (id = ${e})`);return s}targets(){return Array.from(Yc(this,Oc,"f").getAvailableTargets().values()).filter((e=>e._isInitialized))}target(){const e=this.targets().find((e=>"browser"===e.type()));if(!e)throw new Error("Browser target is not found");return e}async waitForTarget(e,t={}){const{timeout:i=3e4}=t;let s,a=!1;const n=new Promise((e=>s=e));this.on("targetcreated",o),this.on("targetchanged",o);try{return i?(this.targets().forEach(o),await Ee(n,"target",i)):await n}finally{this.off("targetcreated",o),this.off("targetchanged",o)}async function o(t){await e(t)&&!a&&(a=!0,s(t))}}async pages(){return(await Promise.all(this.browserContexts().map((e=>e.pages())))).reduce(((e,t)=>e.concat(t)),[])}async version(){return(await Yc(this,Tc,"m",Vc).call(this)).product}async userAgent(){return(await Yc(this,Tc,"m",Vc).call(this)).userAgent}async close(){await Yc(this,Nc,"f").call(null),this.disconnect()}disconnect(){Yc(this,Oc,"f").dispose(),Yc(this,Sc,"f").dispose()}isConnected(){return!Yc(this,Sc,"f")._closed}}xc=new WeakMap,Wc=new WeakMap,Fc=new WeakMap,Sc=new WeakMap,Nc=new WeakMap,Rc=new WeakMap,qc=new WeakMap,Dc=new WeakMap,Ac=new WeakMap,Kc=new WeakMap,Oc=new WeakMap,jc=new WeakMap,Lc=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,Uc=new WeakMap,zc=new WeakMap,Tc=new WeakSet,$c=function(e){Qc(this,qc,e||(e=>"page"===e.type||"background_page"===e.type||"webview"===e.type),"f")},Vc=function(){return Yc(this,Sc,"f").send("Browser.getVersion")};class th extends a{constructor(e,t,i){super(),Gc.set(this,void 0),Jc.set(this,void 0),Xc.set(this,void 0),Qc(this,Gc,e,"f"),Qc(this,Jc,t,"f"),Qc(this,Xc,i,"f")}targets(){return Yc(this,Jc,"f").targets().filter((e=>e.browserContext()===this))}waitForTarget(e,t={}){return Yc(this,Jc,"f").waitForTarget((t=>t.browserContext()===this&&e(t)),t)}async pages(){const e=await Promise.all(this.targets().filter((e=>{var t;return"page"===e.type()||"other"===e.type()&&(null===(t=Yc(this,Jc,"f")._getIsPageTargetCallback())||void 0===t?void 0:t(e._getTargetInfo()))})).map((e=>e.page())));return e.filter((e=>!!e))}isIncognito(){return!!Yc(this,Xc,"f")}async overridePermissions(e,t){const i=t.map((e=>{const t=Zc.get(e);if(!t)throw new Error("Unknown permission: "+e);return t}));await Yc(this,Gc,"f").send("Browser.grantPermissions",{origin:e,browserContextId:Yc(this,Xc,"f")||void 0,permissions:i})}async clearPermissionOverrides(){await Yc(this,Gc,"f").send("Browser.resetPermissions",{browserContextId:Yc(this,Xc,"f")||void 0})}newPage(){return Yc(this,Jc,"f")._createPageInContext(Yc(this,Xc,"f"))}browser(){return Yc(this,Jc,"f")}async close(){e(Yc(this,Xc,"f"),"Non-incognito profiles cannot be closed!"),await Yc(this,Jc,"f")._disposeContext(Yc(this,Xc,"f"))}}Gc=new WeakMap,Jc=new WeakMap,Xc=new WeakMap;class ih{#e;#t=new Set;constructor(e){this.#e=e}send(e){const t=JSON.parse(e);this.#t.add(t.id),this.#e.sendRawMessage(JSON.stringify(t))}close(){this.#e.disconnect()}set onmessage(e){this.#e.setOnMessage((t=>{if(!e)return;const i=t;return i.id&&!this.#t.has(i.id)||(this.#t.delete(i.id),!i.sessionId)?void 0:e(JSON.stringify({...i,sessionId:i.sessionId===this.#e.getSessionId()?void 0:i.sessionId}))}))}set onclose(e){const t=this.#e.getOnDisconnect();this.#e.setOnDisconnect((i=>{t&&t(i),e&&e()}))}}class sh extends P{async onMessage(e){const t=JSON.parse(e);t.sessionId&&!this._sessions.has(t.sessionId)||super.onMessage(e)}}var ah=Object.freeze({__proto__:null,Transport:ih,PuppeteerConnection:sh,getPuppeteerConnection:async function(e,t,i){const s=new ih(e),a=new sh("",s),n=eh._create("chrome",a,[],!1,void 0,void 0,void 0,(e=>("page"===e.type||"iframe"===e.type)&&(e.targetId===i||e.openerId===i||"iframe"===e.type))),[,o]=await Promise.all([a.createSession({targetId:i}),n]),r=(await o.pages()).find((e=>e.mainFrame()._id===t))||null;return{page:r,browser:o}}});export{ah as PuppeteerConnection};
