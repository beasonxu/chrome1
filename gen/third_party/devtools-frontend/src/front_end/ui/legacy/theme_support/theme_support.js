import*as e from"../../../core/common/common.js";var t={cssContent:".webkit-css-property{color:var(--webkit-css-property-color,var(--color-syntax-1))}.webkit-html-comment{color:var(--color-token-comment)}.webkit-html-tag{color:var(--color-token-tag)}.webkit-html-close-tag-name,.webkit-html-tag-name{color:var(--color-token-tag)}.webkit-html-pseudo-element{color:var(--color-token-pseudo-element)}.webkit-html-css-node,.webkit-html-js-node{color:var(--color-text-primary);white-space:pre-wrap}.webkit-html-text-node{color:var(--color-text-primary);unicode-bidi:-webkit-isolate}.webkit-html-entity-value{background-color:rgb(0 0 0 / 15%);unicode-bidi:-webkit-isolate}.webkit-html-doctype{color:rgb(192 192 192)}.webkit-html-attribute-name{color:var(--color-token-attribute);unicode-bidi:-webkit-isolate}.webkit-html-attribute-value{color:var(--color-token-attribute-value);unicode-bidi:-webkit-isolate;word-break:break-all}.devtools-link{color:var(--color-link);text-decoration:underline}.elements-disclosure .devtools-link{color:var(--color-link)}.devtools-link [is=ui-icon]{vertical-align:middle}.devtools-link [is=ui-icon].icon-mask{background-color:var(--color-link)}:focus .selected .devtools-link [is=ui-icon].icon-mask{background-color:var(--legacy-item-selection-bg-color)}.devtools-link:focus-visible{outline-width:unset}.devtools-link:not(.devtools-link-prevent-click){cursor:pointer}@media (forced-colors:active){.devtools-link:not(.devtools-link-prevent-click){forced-color-adjust:none;color:linktext}.devtools-link:focus-visible{background:Highlight;color:HighlightText}}"};let o;const n=new Map;class r extends EventTarget{setting;themeNameInternal="default";customSheets=new Set;computedRoot=e.Lazy.lazy((()=>window.getComputedStyle(document.documentElement)));constructor(e){super(),this.setting=e}static hasInstance(){return void 0!==o}static instance(e={forceNew:null,setting:null}){const{forceNew:t,setting:n}=e;if(!o||t){if(!n)throw new Error(`Unable to create theme support: setting must be provided: ${(new Error).stack}`);o=new r(n)}return o}getComputedValue(e,t=null){const o=t?window.getComputedStyle(t):this.computedRoot();if("symbol"==typeof o)throw new Error(`Computed value for property (${e}) could not be found on :root.`);let r=n.get(o);r||(r=new Map,n.set(o,r));let l=r.get(e);return l||(l=o.getPropertyValue(e).trim(),l&&r.set(e,l)),l}hasTheme(){return"default"!==this.themeNameInternal}themeName(){return this.themeNameInternal}injectHighlightStyleSheets(e){this.appendStyle(e,t)}appendStyle(e,{cssContent:t}){const o=document.createElement("style");o.textContent=t,e.appendChild(o)}injectCustomStyleSheets(e){for(const t of this.customSheets){const o=document.createElement("style");o.textContent=t,e.appendChild(o)}}addCustomStylesheet(e){this.customSheets.add(e)}applyTheme(e){if(window.matchMedia("(forced-colors: active)").matches)return;const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"default";this.themeNameInternal="systemPreferred"===this.setting.get()?t:this.setting.get();const o=e.documentElement.classList.contains("-theme-with-dark-background");e.documentElement.classList.toggle("-theme-with-dark-background","dark"===this.themeNameInternal);o!==e.documentElement.classList.contains("-theme-with-dark-background")&&(n.clear(),this.customSheets.clear(),this.dispatchEvent(new l))}}class l extends Event{static eventName="themechange";constructor(){super(l.eventName,{bubbles:!0,composed:!0})}}export{l as ThemeChangeEvent,r as ThemeSupport};
