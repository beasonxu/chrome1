import*as e from"../../../core/i18n/i18n.js";import*as t from"../../lit-html/lit-html.js";import*as o from"../helpers/helpers.js";import*as r from"../icon_button/icon_button.js";import*as i from"../../../core/common/common.js";import*as n from"../../../core/platform/platform.js";import*as s from"../input/input.js";import*as a from"../../../core/host/host.js";import*as c from"../../../core/sdk/sdk.js";import*as d from"../../legacy/legacy.js";import*as l from"../../../models/bindings/bindings.js";const h=new CSSStyleSheet;h.replaceSync(".highlight-chip-list{min-height:24px;display:flex;flex-wrap:wrap;justify-content:left;align-items:center;background-color:var(--color-background);color:var(--color-text-primary)}.highlight-chip{background:0 0;color:var(--color-text-primary);border:1px solid var(--color-background-elevation-2);height:15px;margin-right:5px;padding:1px;border-radius:4px;margin-bottom:1px;display:flex}.highlight-chip:hover{background-color:var(--color-background-elevation-1)}.delete-highlight-button{width:15px;height:15px;border:none;padding:0;cursor:pointer;background:0 0;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:0 2px}.delete-highlight-button:hover{background-color:var(--color-details-hairline)}.highlight-chip>.delete-highlight-button{visibility:hidden}.highlight-chip:hover>.delete-highlight-button{visibility:visible}.jump-to-highlight-button{cursor:pointer;padding:0 0 0 4px;border:none;background:0 0;display:flex;align-items:center}.jump-to-highlight-button:hover{color:var(--color-text-primary)}.delete-highlight-button devtools-icon{--icon-color:var(--color-text-primary)}.source-code{font-family:var(--source-code-font-family);font-size:var(--source-code-font-size);max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.value{color:var(--color-syntax-2)}.separator{white-space:pre;flex-shrink:0}\n/*# sourceURL=linearMemoryHighlightChipList.css */\n");const g={jumpToAddress:"Jump to highlighted memory",deleteHighlight:"Delete memory highlight"},u=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryHighlightChipList.ts",g),p=e.i18n.getLocalizedString.bind(void 0,u),{render:m,html:b}=t;class v extends Event{static eventName="deletememoryhighlight";data;constructor(e){super(v.eventName,{bubbles:!0,composed:!0}),this.data=e}}class f extends Event{static eventName="jumptohighlightedmemory";data;constructor(e){super(f.eventName),this.data=e}}class y extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-highlight-chip-list`;#e=this.attachShadow({mode:"open"});#t=[];connectedCallback(){this.#e.adoptedStyleSheets=[h]}set data(e){this.#t=e.highlightInfos,this.#o()}#o(){const e=[];for(const t of this.#t)e.push(this.#r(t));const t=b` <div class="highlight-chip-list"> ${e} </div> `;m(t,this.#e,{host:this})}#r(e){const t=e.name||"<anonymous>",o=e.type;return b` <div class="highlight-chip"> <button class="jump-to-highlight-button" title="${p(g.jumpToAddress)}" @click="${()=>this.#i(e.startAddress)}"> <span class="source-code"> <span class="value">${t}</span><span class="separator">: </span><span>${o}</span> </span> </button> <button class="delete-highlight-button" title="${p(g.deleteHighlight)}" @click="${()=>this.#n(e)}"> <${r.Icon.Icon.litTagName} .data="${{iconName:"close-icon",color:"black",width:"7px"}}"> </${r.Icon.Icon.litTagName}> </button> </div> `}#i(e){this.dispatchEvent(new f(e))}#n(e){this.dispatchEvent(new v(e))}}o.CustomElements.defineComponent("devtools-linear-memory-highlight-chip-list",y);var w=Object.freeze({__proto__:null,DeleteMemoryHighlightEvent:v,JumpToHighlightedMemoryEvent:f,LinearMemoryHighlightChipList:y});const x=new CSSStyleSheet;x.replaceSync(":host{flex:auto;display:flex}.view{width:100%;display:flex;flex:1;flex-direction:column;font-family:var(--monospace-font-family);font-size:var(--monospace-font-size);padding:9px 12px 9px 7px}devtools-linear-memory-inspector-viewer{justify-content:center}devtools-linear-memory-inspector-navigator+devtools-linear-memory-inspector-viewer{margin-top:12px}.value-interpreter{display:flex}\n/*# sourceURL=linearMemoryInspector.css */\n");const k=new CSSStyleSheet;k.replaceSync(".navigator{min-height:24px;display:flex;flex-wrap:nowrap;justify-content:space-between;overflow:hidden;align-items:center;background-color:var(--color-background);color:var(--color-text-primary)}.navigator-item{display:flex;white-space:nowrap;overflow:hidden}.address-input{text-align:center;outline:0;color:var(--color-text-primary);border:1px solid var(--color-background-elevation-2);background:0 0}.address-input.invalid{color:var(--color-accent-red)}.navigator-button{display:flex;width:20px;height:20px;background:0 0;overflow:hidden;border:none;padding:0;outline:0;justify-content:center;align-items:center;cursor:pointer}.navigator-button devtools-icon{height:14px;width:14px;min-height:14px;min-width:14px}.navigator-button:enabled:hover devtools-icon{--icon-color:var(--color-text-primary)}.navigator-button:enabled:focus devtools-icon{--icon-color:var(--color-text-secondary)}\n/*# sourceURL=linearMemoryNavigator.css */\n");const I={enterAddress:"Enter address",goBackInAddressHistory:"Go back in address history",goForwardInAddressHistory:"Go forward in address history",previousPage:"Previous page",nextPage:"Next page",refresh:"Refresh"},T=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryNavigator.ts",I),M=e.i18n.getLocalizedString.bind(void 0,T),{render:S,html:E}=t;class $ extends Event{static eventName="addressinputchanged";data;constructor(e,t){super($.eventName),this.data={address:e,mode:t}}}class A extends Event{static eventName="pagenavigation";data;constructor(e){super(A.eventName,{}),this.data=e}}class N extends Event{static eventName="historynavigation";data;constructor(e){super(N.eventName,{}),this.data=e}}class R extends Event{static eventName="refreshrequested";constructor(){super(R.eventName,{})}}class L extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-navigator`;#e=this.attachShadow({mode:"open"});#s="0";#a=void 0;#c=!0;#d=!1;#l=!1;connectedCallback(){this.#e.adoptedStyleSheets=[k]}set data(e){this.#s=e.address,this.#a=e.error,this.#c=e.valid,this.#d=e.canGoBackInHistory,this.#l=e.canGoForwardInHistory,this.#o();const t=this.#e.querySelector(".address-input");t&&("Submitted"===e.mode?t.blur():"InvalidSubmit"===e.mode&&t.select())}#o(){const e=E` <div class="navigator"> <div class="navigator-item"> ${this.#h({icon:"ic_undo_16x16_icon",title:M(I.goBackInAddressHistory),event:new N("Backward"),enabled:this.#d})} ${this.#h({icon:"ic_redo_16x16_icon",title:M(I.goForwardInAddressHistory),event:new N("Forward"),enabled:this.#l})} </div> <div class="navigator-item"> ${this.#h({icon:"ic_page_prev_16x16_icon",title:M(I.previousPage),event:new A("Backward"),enabled:!0})} ${this.#g()} ${this.#h({icon:"ic_page_next_16x16_icon",title:M(I.nextPage),event:new A("Forward"),enabled:!0})} </div> ${this.#h({icon:"refresh_12x12_icon",title:M(I.refresh),event:new R,enabled:!0})} </div> `;S(e,this.#e,{host:this})}#g(){const e={"address-input":!0,invalid:!this.#c};return E` <input class="${t.Directives.classMap(e)}" data-input="true" .value="${this.#s}" title="${this.#c?M(I.enterAddress):this.#a}" @change="${this.#u.bind(this,"Submitted")}" @input="${this.#u.bind(this,"Edit")}/">`}#u(e,t){const o=t.target;this.dispatchEvent(new $(o.value,e))}#h(e){const t=e.enabled?"var(--color-text-secondary)":"var(--color-background-highlight)";return E` <button class="navigator-button" ?disabled="${!e.enabled}" data-button="${e.event.type}" title="${e.title}" @click="${this.dispatchEvent.bind(this,e.event)}"> <${r.Icon.Icon.litTagName} .data="${{iconName:e.icon,color:t,width:"14px"}}"> </${r.Icon.Icon.litTagName}> </button>`}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-navigator",L);var C=Object.freeze({__proto__:null,AddressInputChangedEvent:$,PageNavigationEvent:A,HistoryNavigationEvent:N,RefreshRequestedEvent:R,LinearMemoryNavigator:L});const O=new CSSStyleSheet;O.replaceSync(":host{flex:auto;display:flex}.value-interpreter{--override-text-highlight-color:#80868b;border:var(--legacy-divider-border);background-color:var(--color-background-elevation-1);overflow:hidden;width:400px}.settings-toolbar{min-height:26px;display:flex;flex-wrap:nowrap;justify-content:space-between;padding-left:12px;padding-right:12px;align-items:center}.settings-toolbar-button{display:flex;justify-content:center;align-items:center;width:20px;height:20px;border:none;background-color:transparent;cursor:pointer}.settings-toolbar-button devtools-icon{height:14px;width:14px;min-height:14px;min-width:14px}.settings-toolbar-button.active devtools-icon{--icon-color:var(--color-primary)}.divider{display:block;height:1px;margin-bottom:12px;background-color:var(--color-details-hairline,#d0d0d0)}\n/*# sourceURL=linearMemoryValueInterpreter.css */\n");const j=new CSSStyleSheet;j.replaceSync('*{box-sizing:border-box;min-width:0;min-height:0}:root{height:100%;overflow:hidden;--legacy-accent-color:#1a73e8;--legacy-accent-fg-color:#1a73e8;--legacy-accent-color-hover:#3b86e8;--legacy-accent-fg-color-hover:#1567d3;--legacy-active-control-bg-color:#5a5a5a;--legacy-focus-bg-color:hsl(214deg 40% 92%);--legacy-focus-ring-inactive-shadow-color:#e0e0e0;--legacy-input-validation-error:#db1600;--legacy-toolbar-hover-bg-color:#eaeaea;--legacy-selection-fg-color:#fff;--legacy-selection-bg-color:var(--legacy-accent-color);--legacy-selection-inactive-fg-color:#5a5a5a;--legacy-selection-inactive-bg-color:#dadada;--legacy-tab-selected-fg-color:#333;--legacy-divider-border:1px solid var(--color-details-hairline);--legacy-focus-ring-inactive-shadow:0 0 0 1px var(--legacy-focus-ring-inactive-shadow-color);--legacy-focus-ring-active-shadow:0 0 0 1px var(--legacy-accent-color);--legacy-item-selection-bg-color:#cfe8fc;--legacy-item-selection-inactive-bg-color:#e0e0e0;--item-hover-color:rgb(56 121 217 / 10%);--monospace-font-size:10px;--monospace-font-family:monospace;--source-code-font-size:11px;--source-code-font-family:monospace;--override-force-white-icons-background:#fafafa}.-theme-with-dark-background{color-scheme:dark;--legacy-accent-color:#0e639c;--legacy-accent-fg-color:#ccc;--legacy-accent-fg-color-hover:#fff;--legacy-accent-color-hover:rgb(17 119 187);--legacy-active-control-bg-color:#cdcdcd;--legacy-focus-bg-color:hsl(214deg 19% 27%);--legacy-focus-ring-inactive-shadow-color:#5a5a5a;--legacy-toolbar-hover-bg-color:#202020;--legacy-selection-fg-color:#cdcdcd;--legacy-selection-inactive-fg-color:#cdcdcd;--legacy-selection-inactive-bg-color:hsl(0deg 0% 28%);--legacy-tab-selected-fg-color:#eaeaea;--legacy-focus-ring-inactive-shadow:0 0 0 1px var(--legacy-focus-ring-inactive-shadow-color);--legacy-item-selection-bg-color:hsl(207deg 88% 22%);--legacy-item-selection-inactive-bg-color:#454545}body{height:100%;width:100%;position:relative;overflow:hidden;margin:0;cursor:default;font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande",sans-serif;font-size:12px;tab-size:4;user-select:none;color:var(--color-text-primary);background:var(--color-background)}.platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.platform-mac{font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande",sans-serif}.platform-linux,.platform-mac{--override-text-color:rgb(48 57 66);color:var(--override-text-color)}.platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}:focus{outline-width:0}.platform-mac,:host-context(.platform-mac){--monospace-font-size:11px;--monospace-font-family:menlo,monospace;--source-code-font-size:11px;--source-code-font-family:menlo,monospace}.platform-windows,:host-context(.platform-windows){--monospace-font-size:12px;--monospace-font-family:consolas,lucida console,courier new,monospace;--source-code-font-size:12px;--source-code-font-family:consolas,lucida console,courier new,monospace}.platform-linux,:host-context(.platform-linux){--monospace-font-size:11px;--monospace-font-family:dejavu sans mono,monospace;--source-code-font-size:11px;--source-code-font-family:dejavu sans mono,monospace}.-theme-with-dark-background .platform-linux,.-theme-with-dark-background .platform-mac,:host-context(.-theme-with-dark-background) .platform-linux,:host-context(.-theme-with-dark-background) .platform-mac{--override-text-color:rgb(189 198 207)}.monospace{font-family:var(--monospace-font-family);font-size:var(--monospace-font-size)!important}.source-code{font-family:var(--source-code-font-family);font-size:var(--source-code-font-size)!important;white-space:pre-wrap}img{-webkit-user-drag:none}a img,iframe{border:none}.fill{position:absolute;top:0;left:0;right:0;bottom:0}iframe.fill{width:100%;height:100%}.widget{position:relative;flex:auto;contain:style}.hbox{display:flex;flex-direction:row!important;position:relative}.vbox{display:flex;flex-direction:column!important;position:relative}.view-container>.toolbar{border-bottom:1px solid var(--color-details-hairline)}.flex-auto{flex:auto}.flex-none{flex:none}.flex-centered{display:flex;align-items:center;justify-content:center}.overflow-auto{overflow:auto;background-color:var(--color-background)}iframe.widget{position:absolute;width:100%;height:100%;left:0;right:0;top:0;bottom:0}.hidden{display:none!important}.highlighted-search-result{--override-highlighted-search-result-background-color:rgb(255 255 0 / 80%);border-radius:1px;background-color:var(--override-highlighted-search-result-background-color);outline:1px solid var(--override-highlighted-search-result-background-color)}.-theme-with-dark-background .highlighted-search-result,:host-context(.-theme-with-dark-background) .highlighted-search-result{--override-highlighted-search-result-background-color:hsl(133deg 100% 30%);color:#333}.link{cursor:pointer;text-decoration:underline;color:var(--color-link)}button,input,select{font-family:inherit;font-size:inherit}input,select optgroup,select option{background-color:var(--color-background)}input{color:inherit}input::placeholder{--override-input-placeholder-color:rgb(0 0 0 / 54%);color:var(--override-input-placeholder-color)}.-theme-with-dark-background input::placeholder,:host-context(.-theme-with-dark-background) input::placeholder{--override-input-placeholder-color:rgb(230 230 230 / 54%)}:host-context(.-theme-with-dark-background) input[type=checkbox]:not(.-theme-preserve){accent-color:var(--color-checkbox-accent-color)}.harmony-input:not([type]),.harmony-input[type=number],.harmony-input[type=text]{padding:3px 6px;height:24px;border:none;box-shadow:var(--legacy-focus-ring-inactive-shadow)}.harmony-input:not([type]).error-input,.harmony-input:not([type]):invalid,.harmony-input[type=number].error-input,.harmony-input[type=number]:invalid,.harmony-input[type=text].error-input,.harmony-input[type=text]:invalid{box-shadow:0 0 0 1px var(--color-red)}.harmony-input:not([type]):not(.error-input):not(:invalid):hover,.harmony-input[type=number]:not(.error-input):not(:invalid):hover,.harmony-input[type=text]:not(.error-input):not(:invalid):hover{box-shadow:var(--legacy-focus-ring-inactive-shadow)}.harmony-input:not([type]):not(.error-input):not(:invalid):focus,.harmony-input[type=number]:not(.error-input):not(:invalid):focus,.harmony-input[type=text]:not(.error-input):not(:invalid):focus{box-shadow:var(--legacy-focus-ring-active-shadow)}.highlighted-search-result.current-search-result{--override-current-search-result-background-color:rgb(255 127 0 / 80%);border-radius:1px;padding:1px;margin:-1px;background-color:var(--override-current-search-result-background-color)}.dimmed{opacity:60%}.editing{box-shadow:var(--drop-shadow);background-color:var(--color-background);text-overflow:clip!important;padding-left:2px;margin-left:-2px;padding-right:2px;margin-right:-2px;margin-bottom:-1px;padding-bottom:1px;opacity:100%!important}.editing,.editing *{color:var(--color-text-primary)!important;text-decoration:none!important}.chrome-select{--override-chrome-select-border-color:rgb(0 0 0 / 20%);appearance:none;user-select:none;border:1px solid var(--override-chrome-select-border-color);border-radius:2px;color:var(--color-text-primary);font:inherit;margin:0;outline:0;padding-right:20px;padding-left:6px;background-image:var(--image-file-chromeSelect);background-color:var(--color-background-elevation-0);background-position:right center;background-repeat:no-repeat;min-height:24px;min-width:80px;background-size:15px}.chrome-select:disabled{opacity:38%}.-theme-with-dark-background .chrome-select,:host-context(.-theme-with-dark-background) .chrome-select{--override-chrome-select-border-color:rgb(230 230 230 / 20%);background-image:var(--image-file-chromeSelectDark)}.chrome-select:enabled:active,.chrome-select:enabled:focus,.chrome-select:enabled:hover{--override-select-box-shadow:0 0 0 2px var(--color-button-outline-focus);background-color:var(--color-background-elevation-1);box-shadow:var(--override-select-box-shadow)}.chrome-select:enabled:active{background-color:var(--color-background-elevation-2)}.chrome-select:enabled:focus{border-color:transparent}.-theme-with-dark-background .chrome-select:enabled:active,.-theme-with-dark-background .chrome-select:enabled:focus,.-theme-with-dark-background .chrome-select:enabled:hover,:host-context(.-theme-with-dark-background) .chrome-select:enabled:active,:host-context(.-theme-with-dark-background) .chrome-select:enabled:focus,:host-context(.-theme-with-dark-background) .chrome-select:enabled:hover{--override-select-box-shadow:0 0 0 2px var(--color-button-outline-focus)}.chrome-select-label{margin:0 22px;flex:none}.chrome-select-label p p{margin-top:0;color:var(--color-text-secondary)}.settings-select{margin:0}.chrome-select optgroup,.chrome-select option{background-color:var(--color-background-elevation-1);color:var(--color-text-primary)}.gray-info-message{text-align:center;font-style:italic;padding:6px;color:var(--color-text-secondary);white-space:nowrap}span[is=dt-icon-label]{flex:none}.full-widget-dimmed-banner a{color:inherit}.full-widget-dimmed-banner{color:var(--color-text-secondary);background-color:var(--color-background);display:flex;justify-content:center;align-items:center;text-align:center;padding:20px;position:absolute;top:0;right:0;bottom:0;left:0;font-size:13px;overflow:auto;z-index:500}[is=ui-icon]{display:inline-block;flex-shrink:0}.-theme-with-dark-background [is=ui-icon].icon-invert,:host-context(.-theme-with-dark-background) [is=ui-icon].icon-invert{filter:invert(80%) hue-rotate(180deg)}[is=ui-icon].icon-mask{--override-icon-mask-background-color:rgb(110 110 110);background-color:var(--override-icon-mask-background-color);-webkit-mask-position:var(--spritesheet-position)}.-theme-with-dark-background [is=ui-icon].icon-mask,:host-context(.-theme-with-dark-background) [is=ui-icon].icon-mask{--override-icon-mask-background-color:rgb(145 145 145)}[is=ui-icon]:not(.icon-mask){background-position:var(--spritesheet-position)}.spritesheet-smallicons:not(.icon-mask){background-image:var(--image-file-smallIcons)}.spritesheet-smallicons.icon-mask{-webkit-mask-image:var(--image-file-smallIcons)}.spritesheet-largeicons:not(.icon-mask){background-image:var(--image-file-largeIcons)}.spritesheet-largeicons.icon-mask{-webkit-mask-image:var(--image-file-largeIcons)}.spritesheet-mediumicons:not(.icon-mask){background-image:var(--image-file-mediumIcons)}.spritesheet-mediumicons.icon-mask{-webkit-mask-image:var(--image-file-mediumIcons)}.spritesheet-arrowicons{background-image:var(--image-file-popoverArrows)}.-theme-preserve,.force-white-icons [is=ui-icon].spritesheet-smallicons,:host-context(.force-white-icons) [is=ui-icon].spritesheet-smallicons,[is=ui-icon].force-white-icons.spritesheet-smallicons{-webkit-mask-image:var(--image-file-smallIcons);-webkit-mask-position:var(--spritesheet-position);background:var(--override-force-white-icons-background)!important}.-theme-preserve,.force-white-icons [is=ui-icon].spritesheet-largeicons,:host-context(.force-white-icons) [is=ui-icon].spritesheet-largeicons,[is=ui-icon].force-white-icons.spritesheet-largeicons{-webkit-mask-image:var(--image-file-largeIcons);-webkit-mask-position:var(--spritesheet-position);background:var(--override-force-white-icons-background)!important}.-theme-preserve,.force-white-icons [is=ui-icon].spritesheet-mediumicons,:host-context(.force-white-icons) [is=ui-icon].spritesheet-mediumicons,[is=ui-icon].force-white-icons.spritesheet-mediumicons{-webkit-mask-image:var(--image-file-mediumIcons);-webkit-mask-position:var(--spritesheet-position);background:var(--override-force-white-icons-background)!important}.mediumicon-file-sync.purple-dot{filter:hue-rotate(160deg)}.-theme-with-dark-background [is=ui-icon].icon-invert.mediumicon-file-sync.purple-dot,:host-context(.-theme-with-dark-background) [is=ui-icon].icon-invert.mediumicon-file-sync.purple-dot{filter:invert(80%) hue-rotate(350deg)}.expandable-inline-button{background-color:var(--color-background-elevation-2);color:var(--color-text-primary);cursor:pointer;border-radius:3px}.expandable-inline-button,.undisplayable-text{padding:1px 3px;margin:0 2px;font-size:11px;font-family:sans-serif;white-space:nowrap;display:inline-block}.expandable-inline-button::after,.undisplayable-text::after{content:attr(data-text)}.undisplayable-text{color:var(--color-text-disabled);font-style:italic}.expandable-inline-button:focus-visible,.expandable-inline-button:hover{background-color:var(--color-background-elevation-1)}.expandable-inline-button:focus-visible{background-color:var(--color-background-elevation-1)}::selection{--override-selection-background-color:rgb(141 199 248 / 60%);background-color:var(--override-selection-background-color)}.-theme-with-dark-background ::selection,:host-context(.-theme-with-dark-background) ::selection{background-color:rgb(93 93 93 / 60%)}.reload-warning{align-self:center;margin-left:10px}button.link{border:none;background:0 0;padding:3px}button.link:focus-visible{--override-link-focus-background-color:rgb(0 0 0 / 8%);background-color:var(--override-link-focus-background-color);border-radius:2px}.-theme-with-dark-background button.link:focus-visible,:host-context(.-theme-with-dark-background) button.link:focus-visible{--override-link-focus-background-color:rgb(230 230 230 / 8%)}@media (forced-colors:active){.chrome-select:disabled,.dimmed{opacity:100%}.-theme-preserve,.force-white-icons [is=ui-icon].spritesheet-largeicons,.force-white-icons [is=ui-icon].spritesheet-mediumicons,.force-white-icons [is=ui-icon].spritesheet-smallicons,:host-context(.force-white-icons) [is=ui-icon].spritesheet-largeicons,:host-context(.force-white-icons) [is=ui-icon].spritesheet-mediumicons,:host-context(.force-white-icons) [is=ui-icon].spritesheet-smallicons,[is=ui-icon].force-white-icons.spritesheet-largeicons,[is=ui-icon].force-white-icons.spritesheet-mediumicons,[is=ui-icon].force-white-icons.spritesheet-smallicons,[is=ui-icon].icon-mask{forced-color-adjust:none;background-color:ButtonText}.harmony-input:not([type]),.harmony-input[type=number],.harmony-input[type=text]{border:1px solid ButtonText}.harmony-input:not([type]):focus,.harmony-input[type=number]:focus,.harmony-input[type=text]:focus{border:1px solid Highlight}}input.custom-search-input::-webkit-search-cancel-button{appearance:none;cursor:pointer;width:16px;height:15px;margin-right:0;background-position:-32px 32px;background-image:var(--image-file-mediumIcons)}.spinner::before{display:block;width:var(--dimension,24px);height:var(--dimension,24px);border:var(--override-spinner-size,3px) solid var(--override-spinner-color,var(--color-text-secondary));border-radius:12px;clip:rect(0,var(--clip-size,15px),var(--clip-size,15px),0);content:"";position:absolute;animation:spinner-animation 1s linear infinite;box-sizing:border-box}@keyframes spinner-animation{from{transform:rotate(0)}to{transform:rotate(360deg)}}.adorner-container{display:inline-block}.adorner-container.hidden{display:none}.adorner-container devtools-adorner{margin-left:3px}:host-context(.-theme-with-dark-background) devtools-adorner{--override-adorner-background-color:rgb(var(--color-syntax-2-rgb) / 15%);--override-adorner-border-color:rgb(var(--color-syntax-2-rgb) / 50%);--override-adorner-focus-border-color:var(--color-syntax-2);--override-adorner-active-background-color:var(--color-syntax-8)}.panel{display:flex;overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0;z-index:0;background-color:var(--color-background)}.panel-sidebar{overflow-x:hidden;background-color:var(--color-background-elevation-1)}iframe.extension{flex:auto;width:100%;height:100%}iframe.panel.extension{display:block;height:100%}@media (forced-colors:active){:root{--legacy-accent-color:Highlight;--legacy-focus-ring-inactive-shadow-color:ButtonText}}\n/*# sourceURL=inspectorCommon.css */\n');const _=new CSSStyleSheet;_.replaceSync(":host{flex:auto;display:flex}.mode-type{color:var(--override-text-highlight-color)}.value-types{width:100%;display:grid;grid-template-columns:auto auto 1fr;gap:4px 24px;min-height:24px;overflow:hidden;padding:2px 12px;align-items:baseline;justify-content:start}.value-type-cell{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:flex;flex-direction:column;min-height:24px}.value-type-value-with-link{display:flex;align-items:center}.value-type-cell-no-mode{grid-column:1/3}.jump-to-button{display:flex;width:20px;height:20px;border:none;padding:0;outline:0;justify-content:center;align-items:center;cursor:pointer}.signed-divider{width:1px;height:15px;background-color:var(--color-details-hairline);margin:0 4px}.selectable-text{user-select:text}.selectable-text::selection{background-color:var(--legacy-item-selection-bg-color)}\n/*# sourceURL=valueInterpreterDisplay.css */\n");const P={notApplicable:"N/A"},H=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/ValueInterpreterDisplayUtils.ts",P),B=e.i18n.getLocalizedString.bind(void 0,H);function z(){return new Map(V)}const V=new Map([["Integer 8-bit","dec"],["Integer 16-bit","dec"],["Integer 32-bit","dec"],["Integer 64-bit","dec"],["Float 32-bit","dec"],["Float 64-bit","dec"],["Pointer 32-bit","hex"],["Pointer 64-bit","hex"]]),D=["dec","hex","oct","sci"];function U(t){return e.i18n.lockedString(t)}function F(e,t){switch(e){case"Integer 8-bit":case"Integer 16-bit":case"Integer 32-bit":case"Integer 64-bit":return"dec"===t||"hex"===t||"oct"===t;case"Float 32-bit":case"Float 64-bit":return"sci"===t||"dec"===t;case"Pointer 32-bit":case"Pointer 64-bit":return"hex"===t;default:return n.assertNever(e,`Unknown value type: ${e}`)}}function q(e){switch(e){case"Integer 8-bit":case"Integer 16-bit":case"Integer 32-bit":case"Integer 64-bit":case"Float 32-bit":case"Float 64-bit":return!0;default:return!1}}function G(e,t,o){if(!W(e))return console.error(`Requesting address of a non-pointer type: ${e}.\n`),NaN;try{const r=new DataView(t),i="Little Endian"===o;return"Pointer 32-bit"===e?r.getUint32(0,i):r.getBigUint64(0,i)}catch(e){return NaN}}function W(e){return"Pointer 32-bit"===e||"Pointer 64-bit"===e}function J(e){if(!e.mode)return console.error(`No known way of showing value for ${e.type}`),B(P.notApplicable);const t=new DataView(e.buffer),o="Little Endian"===e.endianness;let r;try{switch(e.type){case"Integer 8-bit":return r=e.signed?t.getInt8(0):t.getUint8(0),X(r,e.mode);case"Integer 16-bit":return r=e.signed?t.getInt16(0,o):t.getUint16(0,o),X(r,e.mode);case"Integer 32-bit":return r=e.signed?t.getInt32(0,o):t.getUint32(0,o),X(r,e.mode);case"Integer 64-bit":return r=e.signed?t.getBigInt64(0,o):t.getBigUint64(0,o),X(r,e.mode);case"Float 32-bit":return r=t.getFloat32(0,o),K(r,e.mode);case"Float 64-bit":return r=t.getFloat64(0,o),K(r,e.mode);case"Pointer 32-bit":return r=t.getUint32(0,o),X(r,"hex");case"Pointer 64-bit":return r=t.getBigUint64(0,o),X(r,"hex");default:return n.assertNever(e.type,`Unknown value type: ${e.type}`)}}catch(e){return B(P.notApplicable)}}function K(e,t){switch(t){case"dec":return e.toFixed(2).toString();case"sci":return e.toExponential(2).toString();default:throw new Error(`Unknown mode for floats: ${t}.`)}}function X(e,t){switch(t){case"dec":return e.toString();case"hex":return e<0?B(P.notApplicable):"0x"+e.toString(16).toUpperCase();case"oct":return e<0?B(P.notApplicable):e.toString(8);default:throw new Error(`Unknown mode for integers: ${t}.`)}}var Y=Object.freeze({__proto__:null,VALUE_INTEPRETER_MAX_NUM_BYTES:8,getDefaultValueTypeMapping:z,VALUE_TYPE_MODE_LIST:D,valueTypeToLocalizedString:U,isValidMode:F,isNumber:q,getPointerAddress:G,isPointer:W,format:J,formatFloat:K,formatInteger:X});const Q={unsignedValue:"`Unsigned` value",changeValueTypeMode:"Change mode",signedValue:"`Signed` value",jumpToPointer:"Jump to address",addressOutOfRange:"Address out of memory range"},Z=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/ValueInterpreterDisplay.ts",Q),ee=e.i18n.getLocalizedString.bind(void 0,Z),{render:te,html:oe}=t,re=Array.from(z().keys());class ie extends Event{static eventName="valuetypemodechanged";data;constructor(e,t){super(ie.eventName,{composed:!0}),this.data={type:e,mode:t}}}class ne extends Event{static eventName="jumptopointeraddress";data;constructor(e){super(ne.eventName,{composed:!0}),this.data=e}}class se extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-interpreter-display`;#e=this.attachShadow({mode:"open"});#p="Little Endian";#m=new ArrayBuffer(0);#b=new Set;#v=z();#f=0;constructor(){super(),this.#e.adoptedStyleSheets=[j]}connectedCallback(){this.#e.adoptedStyleSheets=[_]}set data(e){this.#m=e.buffer,this.#p=e.endianness,this.#b=e.valueTypes,this.#f=e.memoryLength,e.valueTypeModes&&e.valueTypeModes.forEach(((e,t)=>{F(t,e)&&this.#v.set(t,e)})),this.#o()}#o(){te(oe` <div class="value-types"> ${re.map((e=>this.#b.has(e)?this.#y(e):""))} </div> `,this.#e,{host:this})}#y(e){if(q(e))return this.#w(e);if(W(e))return this.#x(e);throw new Error(`No known way to format ${e}`)}#x(t){const o=this.#k({type:t,signed:!1}),i=G(t,this.#m,this.#p),n=Number.isNaN(i)||BigInt(i)>=BigInt(this.#f),s=ee(n?Q.addressOutOfRange:Q.jumpToPointer),a=n?"var(--color-text-secondary)":"var(--color-primary)";return oe` <span class="value-type-cell-no-mode value-type-cell selectable-text">${e.i18n.lockedString(t)}</span> <div class="value-type-cell"> <div class="value-type-value-with-link" data-value="true"> <span class="selectable-text">${o}</span> ${oe` <button class="jump-to-button" data-jump="true" title="${s}" ?disabled="${n}" @click="${this.#I.bind(this,Number(i))}"> <${r.Icon.Icon.litTagName} .data="${{iconName:"link_icon",color:a,width:"14px"}}"> </${r.Icon.Icon.litTagName}> </button>`} </div> </div> `}#I(e){this.dispatchEvent(new ne(e))}#w(t){return oe` <span class="value-type-cell selectable-text">${e.i18n.lockedString(t)}</span> <div> <select title="${ee(Q.changeValueTypeMode)}" data-mode-settings="true" class="chrome-select" style="border: none; background-color: transparent; cursor: pointer; color: var(--color-text-secondary);" @change="${this.#T.bind(this,t)}"> ${D.filter((e=>F(t,e))).map((o=>oe` <option value="${o}" .selected="${this.#v.get(t)===o}">${e.i18n.lockedString(o)} `))} </select> </div> ${this.#M(t)} `}#M(e){const t=this.#k({type:e,signed:!1}),o=this.#k({type:e,signed:!0}),r=this.#v.get(e),i=o!==t&&"hex"!==r&&"oct"!==r,n=oe`<span class="value-type-cell selectable-text" title="${ee(Q.unsignedValue)}" data-value="true">${t}</span>`;if(!i)return n;const s="Integer 32-bit"===e||"Integer 64-bit"===e,a=oe`<span class="selectable-text" data-value="true" title="${ee(Q.signedValue)}">${o}</span>`;return s?oe` <div class="value-type-cell"> ${n} ${a} </div> `:oe` <div class="value-type-cell" style="flex-direction: row;"> ${n} <span class="signed-divider"></span> ${a} </div> `}#T(e,t){t.preventDefault();const o=t.target.value;this.dispatchEvent(new ie(e,o))}#k(e){const t=this.#v.get(e.type);return J({buffer:this.#m,type:e.type,endianness:this.#p,signed:e.signed||!1,mode:t})}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-interpreter-display",se);var ae=Object.freeze({__proto__:null,ValueTypeModeChangedEvent:ie,JumpToPointerAddressEvent:ne,ValueInterpreterDisplay:se});const ce=new CSSStyleSheet;ce.replaceSync(":host{flex:auto;display:flex;min-height:20px}.settings{display:flex;flex-wrap:wrap;margin:0 12px 12px;column-gap:45px;row-gap:15px}.value-types-selection{display:flex;flex-direction:column}.group{font-weight:700;margin-bottom:11px}.type-label{white-space:nowrap}.group+.type-label{margin-top:5px}.type-label input{margin:0 6px 0 0;padding:0}.type-label+.type-label{margin-top:6px}\n/*# sourceURL=valueInterpreterSettings.css */\n");const{render:de,html:le}=t,he={otherGroup:"Other"},ge=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/ValueInterpreterSettings.ts",he),ue=e.i18n.getLocalizedString.bind(void 0,ge),pe=new Map([["Integer",["Integer 8-bit","Integer 16-bit","Integer 32-bit","Integer 64-bit"]],["Floating point",["Float 32-bit","Float 64-bit"]],["Other",["Pointer 32-bit","Pointer 64-bit"]]]);class me extends Event{static eventName="typetoggle";data;constructor(e,t){super(me.eventName),this.data={type:e,checked:t}}}class be extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-interpreter-settings`;#e=this.attachShadow({mode:"open"});#b=new Set;connectedCallback(){this.#e.adoptedStyleSheets=[s.checkboxStyles,ce]}set data(e){this.#b=e.valueTypes,this.#o()}#o(){de(le` <div class="settings"> ${[...pe.keys()].map((e=>le` <div class="value-types-selection"> <span class="group">${function(e){return"Other"===e?ue(he.otherGroup):e}(e)}</span> ${this.#S(e)} </div> `))} </div> `,this.#e,{host:this})}#S(e){const t=pe.get(e);if(!t)throw new Error(`Unknown group ${e}`);return le` ${t.map((e=>le` <label class="type-label" title="${U(e)}"> <input data-input="true" type="checkbox" .checked="${this.#b.has(e)}" @change="${t=>this.#E(e,t)}"> <span data-title="true">${U(e)}</span> </label> `))}`}#E(e,t){const o=t.target;this.dispatchEvent(new me(e,o.checked))}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-interpreter-settings",be);var ve=Object.freeze({__proto__:null,TypeToggleEvent:me,ValueInterpreterSettings:be});const fe={toggleValueTypeSettings:"Toggle value type settings",changeEndianness:"Change `Endianness`"},ye=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryValueInterpreter.ts",fe),we=e.i18n.getLocalizedString.bind(void 0,ye),{render:xe,html:ke}=t;class Ie extends Event{static eventName="endiannesschanged";data;constructor(e){super(Ie.eventName),this.data=e}}class Te extends Event{static eventName="valuetypetoggled";data;constructor(e,t){super(Te.eventName),this.data={type:e,checked:t}}}class Me extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-interpreter`;#e=this.attachShadow({mode:"open"});#p="Little Endian";#m=new ArrayBuffer(0);#b=new Set;#v=new Map;#f=0;#$=!1;connectedCallback(){this.#e.adoptedStyleSheets=[O]}set data(e){this.#p=e.endianness,this.#m=e.value,this.#b=e.valueTypes,this.#v=e.valueTypeModes||new Map,this.#f=e.memoryLength,this.#o()}#o(){xe(ke` <div class="value-interpreter"> <div class="settings-toolbar"> ${this.#A()} <button data-settings="true" class="settings-toolbar-button ${this.#$?"active":""}" title="${we(fe.toggleValueTypeSettings)}" @click="${this.#N}"> <${r.Icon.Icon.litTagName} .data="${{iconName:"settings_14x14_icon",color:"var(--color-text-secondary)",width:"14px"}}"> </${r.Icon.Icon.litTagName}> </button> </div> <span class="divider"></span> <div> ${this.#$?ke` <${be.litTagName} .data="${{valueTypes:this.#b}}" @typetoggle="${this.#E}"> </${be.litTagName}>`:ke` <${se.litTagName} .data="${{buffer:this.#m,valueTypes:this.#b,endianness:this.#p,valueTypeModes:this.#v,memoryLength:this.#f}}"> </${se.litTagName}>`} </div> </div> `,this.#e,{host:this})}#R(e){e.preventDefault();const t=e.target.value;this.dispatchEvent(new Ie(t))}#A(){const t=this.#R.bind(this);return ke` <label data-endianness-setting="true" title="${we(fe.changeEndianness)}"> <select class="chrome-select" style="border: none; background-color: transparent; cursor: pointer;" data-endianness="true" @change="${t}"> ${["Little Endian","Big Endian"].map((t=>ke`<option value="${t}" .selected="${this.#p===t}">${e.i18n.lockedString(t)}`))} </select> </label> `}#N(){this.#$=!this.#$,this.#o()}#E(e){this.dispatchEvent(new Te(e.data.type,e.data.checked))}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-interpreter",Me);var Se=Object.freeze({__proto__:null,EndiannessChangedEvent:Ie,ValueTypeToggledEvent:Te,LinearMemoryValueInterpreter:Me});const Ee=/^0x[a-fA-F0-9]+$/,$e=/^0$|[1-9]\d*$/;function Ae(e){const t=e.number.toString(16).padStart(e.pad,"0").toUpperCase();return e.prefix?"0x"+t:t}function Ne(e){return Ae({number:e,pad:8,prefix:!0})}function Re(e){const t=e.match(Ee),o=e.match($e);let r;return t&&t[0].length===e.length?r=parseInt(e,16):o&&o[0].length===e.length&&(r=parseInt(e,10)),r}var Le=Object.freeze({__proto__:null,HEXADECIMAL_REGEXP:Ee,DECIMAL_REGEXP:$e,toHexString:Ae,formatAddress:Ne,parseAddress:Re});const Ce=new CSSStyleSheet;Ce.replaceSync(":host{flex:auto;display:flex;min-height:20px}.view{overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;background:var(--color-background);outline:0}.row{display:flex;height:20px;align-items:center}.cell{text-align:center;border:1px solid transparent;border-radius:2px}.cell.selected{border-color:var(--color-syntax-3);color:var(--color-syntax-3);background-color:var(--legacy-item-selection-bg-color)}.highlight-area{background-color:var(--legacy-item-selection-bg-color)}.byte-cell{min-width:21px;color:var(--color-text-primary)}.byte-group-margin{margin-left:var(--byte-group-margin)}.text-cell{min-width:14px;color:var(--color-syntax-3)}.address{color:var(--color-text-disabled)}.address.selected{font-weight:700;color:var(--color-text-primary)}.divider{width:1px;height:inherit;background-color:var(--color-details-hairline);margin:0 4px}\n/*# sourceURL=linearMemoryViewer.css */\n");const{render:Oe,html:je}=t;class _e extends Event{static eventName="byteselected";data;constructor(e){super(_e.eventName),this.data=e}}class Pe extends Event{static eventName="resize";data;constructor(e){super(Pe.eventName),this.data=e}}class He extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-viewer`;#e=this.attachShadow({mode:"open"});#L=new ResizeObserver((()=>this.#C()));#O=!1;#j=new Uint8Array;#s=0;#_=0;#P;#H=1;#B=4;#z=!0;#V=void 0;set data(e){if(e.address<e.memoryOffset||e.address>e.memoryOffset+e.memory.length||e.address<0)throw new Error("Address is out of bounds.");if(e.memoryOffset<0)throw new Error("Memory offset has to be greater or equal to zero.");this.#j=e.memory,this.#s=e.address,this.#P=e.highlightInfo,this.#_=e.memoryOffset,this.#z=e.focus,this.#D()}connectedCallback(){o.SetCSSProperty.set(this,"--byte-group-margin","8px"),this.#e.adoptedStyleSheets=[Ce]}disconnectedCallback(){this.#O=!1,this.#L.disconnect()}#D(){this.#U(),this.#o(),this.#F(),this.#q()}#F(){if(this.#z){const e=this.#e.querySelector(".view");e&&e.focus()}}#C(){this.#D(),this.dispatchEvent(new Pe(this.#B*this.#H))}#U(){if(0===this.clientWidth||0===this.clientHeight||!this.shadowRoot)return this.#B=4,void(this.#H=1);const e=this.shadowRoot.querySelector(".byte-cell"),t=this.shadowRoot.querySelector(".text-cell"),o=this.shadowRoot.querySelector(".divider"),r=this.shadowRoot.querySelector(".row"),i=this.shadowRoot.querySelector(".address");if(!(e&&t&&o&&r&&i))return this.#B=4,void(this.#H=1);const n=4*(e.getBoundingClientRect().width+t.getBoundingClientRect().width)+8,s=o.getBoundingClientRect().width,a=e.getBoundingClientRect().left-i.getBoundingClientRect().left,c=this.clientWidth-1-a-s;if(c<n)return this.#B=4,void(this.#H=1);this.#B=4*Math.floor(c/n),this.#H=Math.floor(this.clientHeight/r.clientHeight)}#q(){this.#L&&!this.#O&&(this.#L.observe(this),this.#O=!0)}#o(){Oe(je` <div class="view" tabindex="0" @keydown="${this.#G}"> ${this.#W()} </div> `,this.#e,{host:this})}#G(e){const t=e;let o;"ArrowUp"===t.code?o=this.#s-this.#B:"ArrowDown"===t.code?o=this.#s+this.#B:"ArrowLeft"===t.code?o=this.#s-1:"ArrowRight"===t.code?o=this.#s+1:"PageUp"===t.code?o=this.#s-this.#B*this.#H:"PageDown"===t.code&&(o=this.#s+this.#B*this.#H),void 0!==o&&o!==this.#V&&(this.#V=o,this.dispatchEvent(new _e(o)))}#W(){const e=[];for(let t=0;t<this.#H;++t)e.push(this.#J(t));return je`${e}`}#J(e){const{startIndex:o,endIndex:r}={startIndex:e*this.#B,endIndex:(e+1)*this.#B},i={address:!0,selected:Math.floor((this.#s-this.#_)/this.#B)===e};return je` <div class="row"> <span class="${t.Directives.classMap(i)}">${Ae({number:o+this.#_,pad:8,prefix:!1})}</span> <span class="divider"></span> ${this.#K(o,r)} <span class="divider"></span> ${this.#X(o,r)} </div> `}#K(e,o){const r=[];for(let i=e;i<o;++i){const o=i+this.#_,n={cell:!0,"byte-cell":!0,"byte-group-margin":i!==e&&(i-e)%4==0,selected:i===this.#s-this.#_,"highlight-area":this.#Y(o)},s=i<this.#j.length,a=s?je`${Ae({number:this.#j[i],pad:2,prefix:!1})}`:"",c=s?this.#Q.bind(this,o):"";r.push(je`<span class="${t.Directives.classMap(n)}" @click="${c}">${a}</span>`)}return je`${r}`}#X(e,o){const r=[];for(let i=e;i<o;++i){const e=i+this.#_,o=this.#Y(e),n={cell:!0,"text-cell":!0,selected:this.#s-this.#_===i,"highlight-area":o},s=i<this.#j.length,a=s?je`${this.#Z(this.#j[i])}`:"",c=s?this.#Q.bind(this,i+this.#_):"";r.push(je`<span class="${t.Directives.classMap(n)}" @click="${c}">${a}</span>`)}return je`${r}`}#Z(e){return e>=20&&e<=127?String.fromCharCode(e):"."}#Q(e){this.dispatchEvent(new _e(e))}#Y(e){return void 0!==this.#P&&(this.#P.startAddress<=e&&e<this.#P.startAddress+this.#P.size)}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-viewer",He);var Be=Object.freeze({__proto__:null,ByteSelectedEvent:_e,ResizeEvent:Pe,LinearMemoryViewer:He});const{render:ze,html:Ve}=t,De={addressHasToBeANumberBetweenSAnd:"Address has to be a number between {PH1} and {PH2}"},Ue=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryInspector.ts",De),Fe=e.i18n.getLocalizedString.bind(void 0,Ue);class qe extends Event{static eventName="memoryrequest";data;constructor(e,t,o){super(qe.eventName),this.data={start:e,end:t,address:o}}}class Ge extends Event{static eventName="addresschanged";data;constructor(e){super(Ge.eventName),this.data=e}}class We extends Event{static eventName="settingschanged";data;constructor(e){super(We.eventName),this.data=e}}class Je{#s=0;#ee;constructor(e,t){if(e<0)throw new Error("Address should be a greater or equal to zero");this.#s=e,this.#ee=t}valid(){return!0}reveal(){this.#ee(this.#s)}}class Ke extends HTMLElement{static litTagName=t.literal`devtools-linear-memory-inspector-inspector`;#e=this.attachShadow({mode:"open"});#te=new i.SimpleHistoryManager.SimpleHistoryManager(10);#j=new Uint8Array;#_=0;#oe=0;#s=-1;#P;#re="Submitted";#ie=`${this.#s}`;#ne=4;#se=z();#b=new Set(this.#se.keys());#p="Little Endian";connectedCallback(){this.#e.adoptedStyleSheets=[x]}set data(e){if(e.address<e.memoryOffset||e.address>e.memoryOffset+e.memory.length||e.address<0)throw new Error("Address is out of bounds.");if(e.memoryOffset<0)throw new Error("Memory offset has to be greater or equal to zero.");if(e.highlightInfo){if(e.highlightInfo.size<0)throw new Error("Object size has to be greater than or equal to zero");if(e.highlightInfo.startAddress<0||e.highlightInfo.startAddress>=e.outerMemoryLength)throw new Error("Object start address is out of bounds.")}this.#j=e.memory,this.#_=e.memoryOffset,this.#oe=e.outerMemoryLength,this.#se=e.valueTypeModes||this.#se,this.#b=e.valueTypes||this.#b,this.#p=e.endianness||this.#p,this.#P=e.highlightInfo,this.#ae(e.address),this.#o()}#o(){const{start:e,end:t}=this.#ce(this.#s,this.#ne),o="Submitted"===this.#re?Ne(this.#s):this.#ie,r=this.#de(o),i=Fe(De.addressHasToBeANumberBetweenSAnd,{PH1:Ne(0),PH2:Ne(this.#oe)}),n=r?void 0:i,s=this.#te.canRollback(),a=this.#te.canRollover(),c=this.#P?[this.#P]:[];ze(Ve` <div class="view"> <${L.litTagName} .data="${{address:o,valid:r,mode:this.#re,error:n,canGoBackInHistory:s,canGoForwardInHistory:a}}" @refreshrequested="${this.#le}" @addressinputchanged="${this.#u}" @pagenavigation="${this.#he}" @historynavigation="${this.#ge}"></${L.litTagName}> <${y.litTagName} .data="${{highlightInfos:c}}" @jumptohighlightedmemory="${this.#ue}" @> </${y.litTagName}> <${He.litTagName} .data="${{memory:this.#j.slice(e-this.#_,t-this.#_),address:this.#s,memoryOffset:e,focus:"Submitted"===this.#re,highlightInfo:this.#P}}" @byteselected="${this.#pe}" @resize="${this.#C}"> </${He.litTagName}> </div> <div class="value-interpreter"> <${Me.litTagName} .data="${{value:this.#j.slice(this.#s-this.#_,this.#s+8).buffer,valueTypes:this.#b,valueTypeModes:this.#se,endianness:this.#p,memoryLength:this.#oe}}" @valuetypetoggled="${this.#me}" @valuetypemodechanged="${this.#be}" @endiannesschanged="${this.#ve}" @jumptopointeraddress="${this.#ue}"> </${Me.litTagName}> </div> `,this.#e,{host:this})}#ue(e){e.stopPropagation(),this.#re="Submitted";const t=Math.max(0,Math.min(e.data,this.#oe-1));this.#fe(t)}#le(){const{start:e,end:t}=this.#ce(this.#s,this.#ne);this.dispatchEvent(new qe(e,t,this.#s))}#pe(e){this.#re="Submitted";const t=Math.max(0,Math.min(e.data,this.#oe-1));this.#fe(t)}#ye(){return{valueTypes:this.#b,modes:this.#se,endianness:this.#p}}#ve(e){this.#p=e.data,this.dispatchEvent(new We(this.#ye())),this.#o()}#de(e){const t=Re(e);return void 0!==t&&t>=0&&t<this.#oe}#u(e){const{address:t,mode:o}=e.data,r=this.#de(t),i=Re(t);if(this.#ie=t,void 0!==i&&r)return this.#re=o,void this.#fe(i);this.#re="Submitted"!==o||r?"Edit":"InvalidSubmit",this.#o()}#me(e){const{type:t,checked:o}=e.data;o?this.#b.add(t):this.#b.delete(t),this.dispatchEvent(new We(this.#ye())),this.#o()}#be(e){e.stopImmediatePropagation();const{type:t,mode:o}=e.data;this.#se.set(t,o),this.dispatchEvent(new We(this.#ye())),this.#o()}#ge(e){return"Forward"===e.data?this.#te.rollover():this.#te.rollback()}#he(e){const t="Forward"===e.data?this.#s+this.#ne:this.#s-this.#ne,o=Math.max(0,Math.min(t,this.#oe-1));this.#fe(o)}#fe(e){e<0||e>=this.#oe?console.warn(`Specified address is out of bounds: ${e}`):(this.#ae(e),this.#D())}#ce(e,t){const o=Math.floor(e/t)*t;return{start:o,end:Math.min(o+t,this.#oe)}}#C(e){this.#ne=e.data,this.#D()}#D(){const{start:e,end:t}=this.#ce(this.#s,this.#ne);e<this.#_||t>this.#_+this.#j.length?this.dispatchEvent(new qe(e,t,this.#s)):this.#o()}#ae(e){if(this.#s===e)return;const t=new Je(e,(()=>this.#fe(e)));this.#te.push(t),this.#s=e,this.dispatchEvent(new Ge(this.#s))}}o.CustomElements.defineComponent("devtools-linear-memory-inspector-inspector",Ke);var Xe=Object.freeze({__proto__:null,MemoryRequestEvent:qe,AddressChangedEvent:Ge,SettingsChangedEvent:We,LinearMemoryInspector:Ke});const Ye={noOpenInspections:"No open inspections"},Qe=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryInspectorPane.ts",Ye),Ze=e.i18n.getLocalizedString.bind(void 0,Qe);let et,tt;class ot extends d.Widget.VBox{view;constructor(){super(),this.view=rt.instance()}static instance(e={forceNew:null}){const{forceNew:t}=e;return tt&&!t||(tt=new ot),tt}wasShown(){this.view.show(this.contentElement)}}class rt extends(i.ObjectWrapper.eventMixin(d.Widget.VBox)){#we;#xe;constructor(){super(!1);const e=document.createElement("div");e.textContent=Ze(Ye.noOpenInspections),e.style.display="flex",this.#we=new d.TabbedPane.TabbedPane,this.#we.setPlaceholderElement(e),this.#we.setCloseableTabs(!0),this.#we.setAllowTabReorder(!0,!0),this.#we.addEventListener(d.TabbedPane.Events.TabClosed,this.#ke,this),this.#we.show(this.contentElement),this.#xe=new Map}static instance(){return et||(et=new rt),et}getViewForTabId(e){const t=this.#xe.get(e);if(!t)throw new Error(`No linear memory inspector view for the given tab id: ${e}`);return t}create(e,t,o,r){const i=new it(o,r,e);this.#xe.set(e,i),this.#we.appendTab(e,t,i,void 0,!1,!0),this.#we.selectTab(e)}close(e){this.#we.closeTab(e,!1)}reveal(e,t){const o=this.getViewForTabId(e);void 0!==t&&o.updateAddress(t),this.refreshView(e),this.#we.selectTab(e)}refreshView(e){this.getViewForTabId(e).refreshData()}#ke(e){const{tabId:t}=e.data;this.#xe.delete(t),this.dispatchEventToListeners("ViewClosed",t)}}class it extends d.Widget.VBox{#Ie;#s;#Te;#Me;firstTimeOpen;constructor(e,t=0,o){if(super(!1),t<0||t>=e.length())throw new Error("Requested address is out of bounds.");this.#Ie=e,this.#s=t,this.#Te=o,this.#Me=new Ke,this.#Me.addEventListener(qe.eventName,(e=>{this.#Se(e)})),this.#Me.addEventListener(Ge.eventName,(e=>{this.updateAddress(e.data)})),this.#Me.addEventListener(We.eventName,(e=>{e.stopPropagation(),this.saveSettings(e.data)})),this.#Me.addEventListener(v.eventName,(e=>{ut.instance().removeHighlight(this.#Te,e.data),this.refreshData()})),this.contentElement.appendChild(this.#Me),this.firstTimeOpen=!0}wasShown(){this.refreshData()}saveSettings(e){ut.instance().saveSettings(e)}updateAddress(e){if(e<0||e>=this.#Ie.length())throw new Error("Requested address is out of bounds.");this.#s=e}refreshData(){ut.getMemoryForAddress(this.#Ie,this.#s).then((({memory:e,offset:t})=>{let o,r,i;if(this.firstTimeOpen){const e=ut.instance().loadSettings();o=e.valueTypes,r=e.modes,i=e.endianness,this.firstTimeOpen=!1}this.#Me.data={memory:e,address:this.#s,memoryOffset:t,outerMemoryLength:this.#Ie.length(),valueTypes:o,valueTypeModes:r,endianness:i,highlightInfo:this.#Ee()}}))}#Se(e){const{start:t,end:o,address:r}=e.data;if(r<t||r>=o)throw new Error("Requested address is out of bounds.");ut.getMemoryRange(this.#Ie,t,o).then((e=>{this.#Me.data={memory:e,address:r,memoryOffset:t,outerMemoryLength:this.#Ie.length(),highlightInfo:this.#Ee()}}))}#Ee(){const e=ut.instance().getHighlightInfo(this.#Te);if(void 0!==e){if(e.startAddress<0||e.startAddress>=this.#Ie.length())throw new Error("HighlightInfo start address is out of bounds.");if(e.size<=0)throw new Error("Highlight size must be a positive number.")}return e}}var nt=Object.freeze({__proto__:null,Wrapper:ot,LinearMemoryInspectorPaneImpl:rt});const st={couldNotOpenLinearMemory:"Could not open linear memory inspector: failed locating buffer."},at=e.i18n.registerUIStrings("ui/components/linear_memory_inspector/LinearMemoryInspectorController.ts",st),ct=e.i18n.getLocalizedString.bind(void 0,at),dt=["webassemblymemory","typedarray","dataview","arraybuffer"];let lt;class ht{#$e;constructor(e){this.#$e=e}length(){return this.#$e.byteLength()}async getRange(e,t){const o=Math.min(t,this.length());if(e<0||e>o)return console.error(`Requesting invalid range of memory: (${e}, ${t})`),new Uint8Array(0);const r=await this.#$e.bytes(e,o);return new Uint8Array(r)}}function gt(e){return e instanceof l.DebuggerLanguagePlugins.ValueNode?void 0!==e.inspectableAddress:e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject&&void 0!==e.linearMemoryAddress}class ut extends c.TargetManager.SDKModelObserver{#Ae=rt.instance();#Ne=new Map;#Re=new Map;#Le;constructor(){super(),c.TargetManager.TargetManager.instance().observeModels(c.RuntimeModel.RuntimeModel,this),c.TargetManager.TargetManager.instance().addModelListener(c.DebuggerModel.DebuggerModel,c.DebuggerModel.Events.GlobalObjectCleared,this.#Ce,this),this.#Ae.addEventListener("ViewClosed",this.#Oe.bind(this)),c.TargetManager.TargetManager.instance().addModelListener(c.DebuggerModel.DebuggerModel,c.DebuggerModel.Events.DebuggerPaused,this.#je,this);const e=z(),t={valueTypes:Array.from(e.keys()),valueTypeModes:Array.from(e),endianness:"Little Endian"};this.#Le=i.Settings.Settings.instance().createSetting("lmiInterpreterSettings",t)}static instance(){return lt||(lt=new ut,lt)}static async getMemoryForAddress(e,t){const o=Math.max(0,t-500),r=o+1e3;return{memory:await e.getRange(o,r),offset:o}}static async getMemoryRange(e,t,o){if(t<0||t>o||t>=e.length())throw new Error("Requested range is out of bounds.");const r=Math.max(o,t+1e3);return await e.getRange(t,r)}async evaluateExpression(e,t){const o=await e.evaluate({expression:t});if("error"in o)console.error(`Tried to evaluate the expression '${t}' but got an error: ${o.error}`);else{if(!("exceptionDetails"in o)||!o?.exceptionDetails?.text)return o.object;console.error(`Tried to evaluate the expression '${t}' but got an exception: ${o.exceptionDetails.text}`)}}saveSettings(e){const t=Array.from(e.valueTypes),o=[...e.modes];this.#Le.set({valueTypes:t,valueTypeModes:o,endianness:e.endianness})}loadSettings(){const e=this.#Le.get();return{valueTypes:new Set(e.valueTypes),modes:new Map(e.valueTypeModes),endianness:e.endianness}}getHighlightInfo(e){return this.#Re.get(e)}removeHighlight(e,t){this.getHighlightInfo(e)===t&&this.#Re.delete(e)}setHighlightInfo(e,t){this.#Re.set(e,t)}#_e(e){this.#Re.delete(e)}static async retrieveDWARFMemoryObjectAndAddress(e){if(e instanceof l.DebuggerLanguagePlugins.ExtensionRemoteObject){const t=e,o=t.linearMemoryAddress||0,r=t.callFrame,n=await e.debuggerModel().agent.invoke_evaluateOnCallFrame({callFrameId:r.id,expression:"memories[0]"}),s=n.getError();s&&(console.error(s),i.Console.Console.instance().error(ct(st.couldNotOpenLinearMemory)));return{obj:e.debuggerModel().runtimeModel().createRemoteObject(n.result),address:o}}if(!(e instanceof l.DebuggerLanguagePlugins.ValueNode))return;const t=e,o=t.inspectableAddress||0,r=t.callFrame,n=await e.debuggerModel().agent.invoke_evaluateOnCallFrame({callFrameId:r.id,expression:"memories[0]"}),s=n.getError();s&&(console.error(s),i.Console.Console.instance().error(ct(st.couldNotOpenLinearMemory)));const a=e.debuggerModel().runtimeModel();return{obj:e=a.createRemoteObject(n.result),address:o}}static extractObjectSize(e){let t=e.sourceType.typeInfo;const o=t.members.filter((e=>"*"===e.name));if(1===o.length){const r=o[0].typeId,i=e.sourceType.typeMap.get(r)?.typeInfo;if(void 0===i)throw new Error(`Cannot find the source type information for typeId ${r}.`);t=i}else if(o.length>1)throw new Error("The number of pointers in typeInfo.members should not be greater than one.");return t.size}static extractObjectTypeDescription(e){const t=e.description;if(!t)return"";const o=t.charAt(t.length-1),r=t.charAt(t.length-2);return"*"===o||"&"===o?" "===r?t.slice(0,t.length-2):t.slice(0,t.length-1):t}static extractObjectName(e,t){const o=e.description?.charAt(e.description.length-1);return"*"===o?"*"+t:t}async openInspectorView(e,t,o){const r=await ut.retrieveDWARFMemoryObjectAndAddress(e);let i=e,n=t;void 0!==r&&(n=r.address,i=r.obj),void 0!==n?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.DWARFInspectableAddress):"arraybuffer"===i.subtype?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.ArrayBuffer):"dataview"===i.subtype?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.DataView):"typedarray"===i.subtype?a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.TypedArray):(console.assert("webassemblymemory"===i.subtype),a.userMetrics.linearMemoryInspectorTarget(a.UserMetrics.LinearMemoryInspectorTarget.WebAssemblyMemory));const s=await async function(e){console.assert("object"===e.type),console.assert(void 0!==e.subtype&&dt.includes(e.subtype));const t=await e.runtimeModel().agent.invoke_callFunctionOn({objectId:e.objectId,functionDeclaration:"function() { return this instanceof ArrayBuffer || (typeof SharedArrayBuffer !== 'undefined' && this instanceof SharedArrayBuffer) ? this : this.buffer; }",silent:!0,objectGroup:"linear-memory-inspector"}),o=t.getError();if(o)throw new Error(`Remote object representing ArrayBuffer could not be retrieved: ${o}`);return e=e.runtimeModel().createRemoteObject(t.result),new c.RemoteObject.RemoteArrayBuffer(e)}(i),{internalProperties:l}=await s.object().getOwnProperties(!1),h=l?.find((({name:e})=>"[[ArrayBufferData]]"===e)),g=h?.value?.value;if(!g)throw new Error("Unable to find backing store id for array buffer");const u=l?.find((({name:e})=>"[[WebAssemblyMemory]]"===e)),p=u?.value,m=ut.extractHighlightInfo(e,o);if(m?this.setHighlightInfo(g,m):this.#_e(g),this.#Ne.has(g))return this.#Ae.reveal(g,n),void d.ViewManager.ViewManager.instance().showView("linear-memory-inspector");const b=String(p?p.description:s.object().description);this.#Ne.set(g,s.object());const v=new ht(s);this.#Ae.create(g,b,v,n),d.ViewManager.ViewManager.instance().showView("linear-memory-inspector")}static extractHighlightInfo(e,t){if(!(e instanceof l.DebuggerLanguagePlugins.ValueNode))return;let o;try{o={startAddress:e.inspectableAddress||0,size:ut.extractObjectSize(e),name:t?ut.extractObjectName(e,t):t,type:ut.extractObjectTypeDescription(e)}}catch(e){o=void 0}return o}modelRemoved(e){for(const[t,o]of this.#Ne)e===o.runtimeModel()&&(this.#Ne.delete(t),this.#_e(t),this.#Ae.close(t))}#je(e){const t=e.data;for(const[e,o]of this.#Ne)if(t.runtimeModel()===o.runtimeModel()){const o=t.debuggerPausedDetails()?.callFrames[0];o?this.updateHighlightedMemory(e,o).then((()=>this.#Ae.refreshView(e))):(this.#_e(e),this.#Ae.refreshView(e))}}#Ce(e){this.modelRemoved(e.data.runtimeModel())}#Oe({data:e}){const t=this.#Ne.get(e);t&&t.release(),this.#Ne.delete(e),this.#_e(e)}async updateHighlightedMemory(e,t){const o=this.getHighlightInfo(e),r=o?.name;if(!o||!r)return void this.#_e(e);const i=await this.evaluateExpression(t,r);if(!i)return void this.#_e(e);const n=ut.extractHighlightInfo(i,r);n&&this.#Pe(n,o)?this.setHighlightInfo(e,n):this.#_e(e)}#Pe(e,t){return e.type===t.type&&e.startAddress===t.startAddress}}var pt=Object.freeze({__proto__:null,ACCEPTED_MEMORY_TYPES:dt,RemoteArrayBufferWrapper:ht,isDWARFMemoryObject:gt,isMemoryObjectProperty:function(e){return!!("object"===e.type&&e.subtype&&dt.includes(e.subtype)||gt(e))},LinearMemoryInspectorController:ut}),mt=Object.freeze({__proto__:null});export{w as LinearMemoryHighlightChipList,Xe as LinearMemoryInspector,pt as LinearMemoryInspectorController,nt as LinearMemoryInspectorPane,Le as LinearMemoryInspectorUtils,C as LinearMemoryNavigator,Se as LinearMemoryValueInterpreter,Be as LinearMemoryViewer,mt as LinearMemoryViewerUtils,ae as ValueInterpreterDisplay,Y as ValueInterpreterDisplayUtils,ve as ValueInterpreterSettings};
