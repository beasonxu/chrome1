{"version":3,"file":"ResourceMapping_test.js","sourceRoot":"","sources":["../../../../../../../../../../../third_party/devtools-frontend/src/test/unittests/front_end/models/bindings/ResourceMapping_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../../front_end/core/common/common.js';\nimport type * as Platform from '../../../../../front_end/core/platform/platform.js';\nimport type * as SDKModule from '../../../../../front_end/core/sdk/sdk.js';\nimport type * as Protocol from '../../../../../front_end/generated/protocol.js';\nimport * as Bindings from '../../../../../front_end/models/bindings/bindings.js';\nimport * as Workspace from '../../../../../front_end/models/workspace/workspace.js';\nimport {createTarget} from '../../helpers/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../helpers/MockConnection.js';\n\nconst {assert} = chai;\n\ndescribeWithMockConnection('ResourceMapping', () => {\n  let SDK: typeof SDKModule;\n  before(async () => {\n    SDK = await import('../../../../../front_end/core/sdk/sdk.js');\n  });\n\n  let debuggerModel: SDKModule.DebuggerModel.DebuggerModel;\n  let resourceMapping: Bindings.ResourceMapping.ResourceMapping;\n  let uiSourceCode: Workspace.UISourceCode.UISourceCode;\n\n  // This test simulates the behavior of the ResourceMapping with the\n  // following document, which contains two inline <script>s, one with\n  // a `//# sourceURL` annotation and one without.\n  //\n  //  <!DOCTYPE html>\n  //  <html>\n  //  <head>\n  //  <meta charset=utf-8>\n  //  <script>\n  //  function foo() { console.log(\"foo\"); }\n  //  foo();\n  //  //# sourceURL=webpack:///src/foo.js\n  //  </script>\n  //  </head>\n  //  <body>\n  //  <script>console.log(\"bar\");</script>\n  //  </body>\n  //  </html>\n  //\n  const url = 'http://example.com/index.html' as Platform.DevToolsPath.UrlString;\n  const SCRIPTS = [\n    {\n      scriptId: '1' as Protocol.Runtime.ScriptId,\n      startLine: 4,\n      startColumn: 8,\n      endLine: 8,\n      endColumn: 0,\n      sourceURL: 'webpack:///src/foo.js' as Platform.DevToolsPath.UrlString,\n      hasSourceURLComment: true,\n    },\n    {\n      scriptId: '2' as Protocol.Runtime.ScriptId,\n      startLine: 11,\n      startColumn: 8,\n      endLine: 11,\n      endColumn: 27,\n      sourceURL: url,\n      hasSourceURLComment: false,\n    },\n  ];\n  const OTHER_SCRIPT_ID = '3' as Protocol.Runtime.ScriptId;\n\n  beforeEach(async () => {\n    const target = createTarget();\n    const targetManager = target.targetManager();\n    const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n    resourceMapping = Bindings.ResourceMapping.ResourceMapping.instance({\n      forceNew: true,\n      targetManager,\n      workspace,\n    });\n\n    // Inject the HTML document resource.\n    const frameId = 'main' as Protocol.Page.FrameId;\n    const mimeType = 'text/html';\n    const resourceTreeModel =\n        target.model(SDK.ResourceTreeModel.ResourceTreeModel) as SDKModule.ResourceTreeModel.ResourceTreeModel;\n    const frame = resourceTreeModel.frameAttached(frameId, null);\n    frame?.addResource(new SDK.Resource.Resource(\n        resourceTreeModel, null, url, url, frameId, null, Common.ResourceType.ResourceType.fromMimeType(mimeType),\n        mimeType, null, null));\n    uiSourceCode = workspace.uiSourceCodeForURL(url) as Workspace.UISourceCode.UISourceCode;\n    assert.isNotNull(uiSourceCode);\n\n    // Register the inline <script>s.\n    const hash = '';\n    const length = 0;\n    const embedderName = url;\n    const executionContextId = 1;\n    debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel) as SDKModule.DebuggerModel.DebuggerModel;\n    SCRIPTS.forEach(({scriptId, startLine, startColumn, endLine, endColumn, sourceURL, hasSourceURLComment}) => {\n      debuggerModel.parsedScriptSource(\n          scriptId, sourceURL, startLine, startColumn, endLine, endColumn, executionContextId, hash, undefined, false,\n          undefined, hasSourceURLComment, false, length, false, null, null, null, null, embedderName);\n    });\n    assert.lengthOf(debuggerModel.scripts(), SCRIPTS.length);\n  });\n\n  describe('uiLocationToJSLocations', () => {\n    it('does not map locations outside of <script> tags', () => {\n      assert.isEmpty(resourceMapping.uiLocationToJSLocations(uiSourceCode, 0, 0));\n      SCRIPTS.forEach(({startLine, startColumn, endLine, endColumn}) => {\n        assert.isEmpty(resourceMapping.uiLocationToJSLocations(uiSourceCode, startLine, startColumn - 1));\n        assert.isEmpty(resourceMapping.uiLocationToJSLocations(uiSourceCode, endLine, endColumn + 1));\n      });\n      assert.isEmpty(resourceMapping.uiLocationToJSLocations(uiSourceCode, 12, 1));\n    });\n\n    it('correctly maps inline <script> with a //# sourceURL annotation', () => {\n      const {scriptId, startLine, startColumn, endLine, endColumn} = SCRIPTS[0];\n\n      // Debugger locations in scripts with sourceURL annotations are relative to the beginning\n      // of the script, rather than relative to the start of the surrounding document.\n      assert.deepEqual(resourceMapping.uiLocationToJSLocations(uiSourceCode, startLine, startColumn), [\n        debuggerModel.createRawLocationByScriptId(scriptId, 0, 0),\n      ]);\n      assert.deepEqual(resourceMapping.uiLocationToJSLocations(uiSourceCode, startLine, startColumn + 3), [\n        // This location does not actually exist in the simulated document, but\n        // the ResourceMapping doesn't know (and shouldn't care) about that.\n        debuggerModel.createRawLocationByScriptId(scriptId, 0, 3),\n      ]);\n      assert.deepEqual(resourceMapping.uiLocationToJSLocations(uiSourceCode, startLine + 1, 5), [\n        debuggerModel.createRawLocationByScriptId(scriptId, 1, 5),\n      ]);\n      assert.deepEqual(resourceMapping.uiLocationToJSLocations(uiSourceCode, endLine, endColumn), [\n        debuggerModel.createRawLocationByScriptId(scriptId, endLine - startLine, endColumn),\n      ]);\n    });\n\n    it('correctly maps inline <script> without //# sourceURL annotation', () => {\n      const {scriptId, startLine, startColumn, endLine, endColumn} = SCRIPTS[1];\n\n      // Debugger locations in scripts without sourceURL annotations are relative to the\n      // beginning of the surrounding document, so this is basically a 1-1 mapping.\n      assert.strictEqual(endLine, startLine);\n      for (let column = startColumn; column <= endColumn; ++column) {\n        assert.deepEqual(resourceMapping.uiLocationToJSLocations(uiSourceCode, startLine, column), [\n          debuggerModel.createRawLocationByScriptId(scriptId, startLine, column),\n        ]);\n      }\n    });\n  });\n\n  describe('jsLocationToUILocation', () => {\n    it('does not map locations of unrelated scripts', () => {\n      assert.isNull(\n          resourceMapping.jsLocationToUILocation(debuggerModel.createRawLocationByScriptId(OTHER_SCRIPT_ID, 1, 1)));\n      SCRIPTS.forEach(({startLine, startColumn, endLine, endColumn}) => {\n        // Check that we also don't reverse map locations that overlap with the existing script locations.\n        assert.isNull(resourceMapping.jsLocationToUILocation(\n            debuggerModel.createRawLocationByScriptId(OTHER_SCRIPT_ID, startLine, startColumn)));\n        assert.isNull(resourceMapping.jsLocationToUILocation(\n            debuggerModel.createRawLocationByScriptId(OTHER_SCRIPT_ID, endLine, endColumn)));\n      });\n    });\n\n    it('correctly maps inline <script> with //# sourceURL annotation', () => {\n      const {scriptId, startLine, startColumn, endLine, endColumn} = SCRIPTS[0];\n\n      // Debugger locations in scripts with sourceURL annotations are relative to the beginning\n      // of the script, rather than relative to the start of the surrounding document.\n      assert.deepEqual(\n          resourceMapping.jsLocationToUILocation(debuggerModel.createRawLocationByScriptId(scriptId, 0, 0)),\n          new Workspace.UISourceCode.UILocation(uiSourceCode, startLine, startColumn));\n      assert.deepEqual(\n          resourceMapping.jsLocationToUILocation(debuggerModel.createRawLocationByScriptId(scriptId, 0, 55)),\n          // This location does not actually exist in the simulated document, but\n          // the ResourceMapping doesn't know (and shouldn't care) about that.\n          new Workspace.UISourceCode.UILocation(uiSourceCode, startLine, startColumn + 55));\n      assert.deepEqual(\n          resourceMapping.jsLocationToUILocation(debuggerModel.createRawLocationByScriptId(scriptId, 2, 0)),\n          new Workspace.UISourceCode.UILocation(uiSourceCode, startLine + 2, 0));\n      assert.deepEqual(\n          resourceMapping.jsLocationToUILocation(\n              debuggerModel.createRawLocationByScriptId(scriptId, endLine - startLine, endColumn)),\n          new Workspace.UISourceCode.UILocation(uiSourceCode, endLine, endColumn));\n    });\n\n    it('correctly maps inline <script> without //# sourceURL annotation', () => {\n      const {scriptId, startLine, startColumn, endLine, endColumn} = SCRIPTS[1];\n\n      // Debugger locations in scripts without sourceURL annotations are relative to the\n      // beginning of the surrounding document, so this is basically a 1-1 mapping.\n      assert.strictEqual(endLine, startLine);\n      for (let column = startColumn; column <= endColumn; ++column) {\n        assert.deepEqual(\n            resourceMapping.jsLocationToUILocation(\n                debuggerModel.createRawLocationByScriptId(scriptId, startLine, column)),\n            new Workspace.UISourceCode.UILocation(uiSourceCode, startLine, column));\n      }\n    });\n  });\n});\n"]}