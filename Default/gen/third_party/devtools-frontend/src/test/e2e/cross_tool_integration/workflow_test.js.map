{"version":3,"file":"workflow_test.js","sourceRoot":"","sources":["../../../../../../../../../third_party/devtools-frontend/src/test/e2e/cross_tool_integration/workflow_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {\n  assertNotNullOrUndefined,\n  click,\n  reloadDevTools,\n  waitFor,\n  waitForFunction,\n} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {\n  navigateToConsoleTab,\n  navigateToIssuesPanelViaInfoBar,\n  waitForConsoleMessageAndClickOnLink,\n} from '../helpers/console-helpers.js';\nimport {\n  clickOnContextMenuItemFromTab,\n  MOVE_TO_DRAWER_SELECTOR,\n  MOVE_TO_MAIN_PANEL_SELECTOR,\n  prepareForCrossToolScenario,\n  tabExistsInDrawer,\n  tabExistsInMainPanel,\n} from '../helpers/cross-tool-helper.js';\nimport {clickOnFirstLinkInStylesPanel, navigateToElementsTab} from '../helpers/elements-helpers.js';\nimport {LAYERS_TAB_SELECTOR} from '../helpers/layers-helpers.js';\nimport {MEMORY_TAB_ID, navigateToMemoryTab} from '../helpers/memory-helpers.js';\nimport {\n  navigateToPerformanceSidebarTab,\n  navigateToPerformanceTab,\n  startRecording,\n  stopRecording,\n} from '../helpers/performance-helpers.js';\nimport {openPanelViaMoreTools} from '../helpers/settings-helpers.js';\n\ndescribe('A user can navigate across', async function() {\n  // These tests move between panels, which takes time.\n  if (this.timeout() !== 0) {\n    this.timeout(10000);\n  }\n\n  beforeEach(async function() {\n    await prepareForCrossToolScenario();\n  });\n\n  it('Console -> Sources', async () => {\n    await navigateToConsoleTab();\n    await waitForConsoleMessageAndClickOnLink();\n    await waitFor('.panel[aria-label=\"sources\"]');\n  });\n\n  // Flaky on mac\n  it.skipOnPlatforms(['mac'], '[crbug.com/1322534]: Console -> Issues', async () => {\n    await navigateToConsoleTab();\n    await navigateToIssuesPanelViaInfoBar();\n\n    // Expand the first issue\n    await click('li.issue.parent');\n\n    // Expand the affected resources\n    await click('li.parent', {root: await waitFor('ol.affected-resources')});\n  });\n\n  it('Elements -> Sources', async () => {\n    await navigateToElementsTab();\n    await clickOnFirstLinkInStylesPanel();\n\n    await waitFor('.panel[aria-label=\"sources\"]');\n  });\n\n  it('Performance -> Sources', async () => {\n    await navigateToPerformanceTab();\n\n    await startRecording();\n    await stopRecording();\n\n    await navigateToPerformanceSidebarTab('Bottom-Up');\n\n    // Find the link pointing to default.html.\n    let link;\n    await waitForFunction(async () => {\n      link = await waitFor('.devtools-link');\n      const linkText = await link.evaluate(x => x.textContent);\n      return linkText?.startsWith('default.html');\n    });\n\n    assertNotNullOrUndefined(link);\n    await click(link);\n    await waitFor('.panel[aria-label=\"sources\"]');\n  });\n});\n\ndescribe('A user can move tabs', async function() {\n  this.timeout(10000);\n\n  it('Move Memory to drawer', async () => {\n    await navigateToMemoryTab();\n    await tabExistsInMainPanel(MEMORY_TAB_ID);\n    await clickOnContextMenuItemFromTab(MEMORY_TAB_ID, MOVE_TO_DRAWER_SELECTOR);\n    await tabExistsInDrawer(MEMORY_TAB_ID);\n  });\n\n  it('Move Animations to main panel', async () => {\n    const ANIMATIONS_TAB_ID = '#tab-animations';\n    await openPanelViaMoreTools('Animations');\n    await tabExistsInDrawer(ANIMATIONS_TAB_ID);\n    await clickOnContextMenuItemFromTab(ANIMATIONS_TAB_ID, MOVE_TO_MAIN_PANEL_SELECTOR);\n    await tabExistsInMainPanel(ANIMATIONS_TAB_ID);\n  });\n});\n\ndescribe('A user can open panels via the \"panel\" query param', async function() {\n  it('Layers is shown', async () => {\n    await reloadDevTools({queryParams: {panel: 'layers'}});\n    await tabExistsInMainPanel(LAYERS_TAB_SELECTOR);\n  });\n});\n"]}