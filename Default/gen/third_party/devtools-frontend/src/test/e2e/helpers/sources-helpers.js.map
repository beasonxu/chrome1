{"version":3,"file":"sources-helpers.js","sourceRoot":"","sources":["../../../../../../../../../third_party/devtools-frontend/src/test/e2e/helpers/sources-helpers.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nimport type * as puppeteer from 'puppeteer';\nimport {requireTestRunnerConfigSetting} from '../../conductor/test_runner_config.js';\n\nimport {\n  $,\n  $$,\n  assertNotNullOrUndefined,\n  click,\n  getBrowserAndPages,\n  getPendingEvents,\n  getTestServerPort,\n  goToResource,\n  pasteText,\n  platform,\n  pressKey,\n  reloadDevTools,\n  step,\n  timeout,\n  typeText,\n  waitFor,\n  waitForFunction,\n} from '../../shared/helper.js';\n\nexport const ACTIVE_LINE = '.CodeMirror-activeline > pre > span';\nexport const PAUSE_ON_EXCEPTION_BUTTON = '[aria-label=\"Pause on exceptions\"]';\nexport const PAUSE_BUTTON = '[aria-label=\"Pause script execution\"]';\nexport const RESUME_BUTTON = '[aria-label=\"Resume script execution\"]';\nexport const SOURCES_LINES_SELECTOR = '.CodeMirror-code > div';\nexport const PAUSE_INDICATOR_SELECTOR = '.paused-status';\nexport const CODE_LINE_SELECTOR = '.cm-lineNumbers .cm-gutterElement';\nexport const SCOPE_LOCAL_VALUES_SELECTOR = 'li[aria-label=\"Local\"] + ol';\nexport const SELECTED_THREAD_SELECTOR = 'div.thread-item.selected > div.thread-item-title';\nexport const STEP_INTO_BUTTON = '[aria-label=\"Step into next function call\"]';\nexport const STEP_OVER_BUTTON = '[aria-label=\"Step over next function call\"]';\nexport const STEP_OUT_BUTTON = '[aria-label=\"Step out of current function\"]';\nexport const TURNED_OFF_PAUSE_BUTTON_SELECTOR = 'button.toolbar-state-off';\nexport const TURNED_ON_PAUSE_BUTTON_SELECTOR = 'button.toolbar-state-on';\nexport const DEBUGGER_PAUSED_EVENT = 'DevTools.DebuggerPaused';\nconst WATCH_EXPRESSION_VALUE_SELECTOR = '.watch-expression-tree-item .object-value-string.value';\n\nexport async function toggleNavigatorSidebar(frontend: puppeteer.Page) {\n  const modifierKey = platform === 'mac' ? 'Meta' : 'Control';\n  await frontend.keyboard.down(modifierKey);\n  await frontend.keyboard.down('Shift');\n  await frontend.keyboard.press('y');\n  await frontend.keyboard.up('Shift');\n  await frontend.keyboard.up(modifierKey);\n}\n\nexport async function toggleDebuggerSidebar(frontend: puppeteer.Page) {\n  const modifierKey = platform === 'mac' ? 'Meta' : 'Control';\n  await frontend.keyboard.down(modifierKey);\n  await frontend.keyboard.down('Shift');\n  await frontend.keyboard.press('h');\n  await frontend.keyboard.up('Shift');\n  await frontend.keyboard.up(modifierKey);\n}\n\nexport async function getLineNumberElement(lineNumber: number|string) {\n  const visibleLines = await $$(CODE_LINE_SELECTOR);\n  for (let i = 0; i < visibleLines.length; i++) {\n    const lineValue = await visibleLines[i].evaluate(node => node.textContent);\n    if (lineValue === `${lineNumber}`) {\n      return visibleLines[i];\n    }\n  }\n  return null;\n}\n\nexport async function doubleClickSourceTreeItem(selector: string) {\n  const item = await waitFor(selector);\n  await click(item, {clickOptions: {clickCount: 2}, maxPixelsFromLeft: 40});\n}\n\nexport async function openSourcesPanel() {\n  // Locate the button for switching to the sources tab.\n  await click('#tab-sources');\n\n  // Wait for the navigation panel to show up\n  await waitFor('.navigator-file-tree-item');\n}\n\nexport async function openFileInSourcesPanel(testInput: string) {\n  await goToResource(`sources/${testInput}`);\n\n  await openSourcesPanel();\n}\n\nexport async function openRecorderSubPane() {\n  const root = await waitFor('.navigator-tabbed-pane');\n\n  await waitFor('[aria-label=\"More tabs\"]', root);\n  await click('[aria-label=\"More tabs\"]', {root});\n\n  await waitFor('[aria-label=\"Recordings\"]');\n\n  await click('[aria-label=\"Recordings\"]');\n  await waitFor('[aria-label=\"Add recording\"]');\n}\n\nexport async function createNewRecording(recordingName: string) {\n  const {frontend} = getBrowserAndPages();\n\n  await click('[aria-label=\"Add recording\"]');\n  await waitFor('[aria-label^=\"Recording\"]');\n\n  await typeText(recordingName);\n\n  await frontend.keyboard.press('Enter');\n}\n\nexport async function openSnippetsSubPane() {\n  const root = await waitFor('.navigator-tabbed-pane');\n\n  await waitFor('[aria-label=\"More tabs\"]', root);\n  await click('[aria-label=\"More tabs\"]', {root});\n\n  await waitFor('[aria-label=\"Snippets\"]');\n\n  await click('[aria-label=\"Snippets\"]');\n  await waitFor('[aria-label=\"New snippet\"]');\n}\n\n/**\n * Creates a new snippet, optionally pre-filling it with the provided content.\n * `snippetName` must not contain spaces or special characters, otherwise\n * `createNewSnippet` will time out.\n * DevTools uses the escaped snippet name for the ARIA label. `createNewSnippet`\n * doesn't mirror the escaping so it won't be able to wait for the snippet\n * entry in the navigation tree to appear.\n */\nexport async function createNewSnippet(snippetName: string, content?: string) {\n  const {frontend} = getBrowserAndPages();\n\n  await click('[aria-label=\"New snippet\"]');\n  await waitFor('[aria-label^=\"Script snippet\"]');\n\n  await typeText(snippetName);\n\n  await frontend.keyboard.press('Enter');\n  await waitFor(`[aria-label*=\"${snippetName}\"]`);\n\n  if (content) {\n    await pasteText(content);\n    await pressKey('s', {control: true});\n  }\n}\n\nexport async function openFileInEditor(sourceFile: string) {\n  await waitForSourceFiles(\n      SourceFileEvents.SourceFileLoaded, files => files.some(f => f.endsWith(sourceFile)),\n      // Open a particular file in the editor\n      () => doubleClickSourceTreeItem(`[aria-label=\"${sourceFile}, file\"]`));\n}\n\nexport async function openSourceCodeEditorForFile(sourceFile: string, testInput: string) {\n  await openFileInSourcesPanel(testInput);\n  await openFileInEditor(sourceFile);\n}\n\nexport async function getSelectedSource(): Promise<string> {\n  const sourceTabPane = await waitFor('#sources-panel-sources-view .tabbed-pane');\n  const sourceTabs = await waitFor('.tabbed-pane-header-tab.selected', sourceTabPane);\n  return sourceTabs.evaluate(node => node.getAttribute('aria-label')) as Promise<string>;\n}\n\nexport async function getOpenSources() {\n  const sourceTabPane = await waitFor('#sources-panel-sources-view .tabbed-pane');\n  const sourceTabs = await waitFor('.tabbed-pane-header-tabs', sourceTabPane);\n  const openSources =\n      await sourceTabs.$$eval('.tabbed-pane-header-tab', nodes => nodes.map(n => n.getAttribute('aria-label')));\n  return openSources;\n}\n\nexport async function waitForHighlightedLine(lineNumber: number) {\n  await waitForFunction(async () => {\n    const selectedLine = await waitFor('.cm-highlightedLine');\n    const currentlySelectedLineNumber = await selectedLine.evaluate(line => {\n      return [...line.parentElement?.childNodes || []].indexOf(line);\n    });\n    const lineNumbers = await waitFor('.cm-lineNumbers');\n    const text = await lineNumbers.evaluate(\n        (node, lineNumber) => node.childNodes[lineNumber].textContent, currentlySelectedLineNumber + 1);\n    return Number(text) === lineNumber;\n  });\n}\n\nexport async function getToolbarText() {\n  const toolbar = await waitFor('.sources-toolbar');\n  if (!toolbar) {\n    return [];\n  }\n  const textNodes = await $$('.toolbar-text', toolbar);\n  return Promise.all(textNodes.map(node => node.evaluate(node => node.textContent, node)));\n}\n\nexport async function addBreakpointForLine(frontend: puppeteer.Page, index: number|string) {\n  const breakpointLine = await getLineNumberElement(index);\n  assertNotNullOrUndefined(breakpointLine);\n\n  await waitForFunction(async () => !(await isBreakpointSet(index)));\n  await click(breakpointLine);\n\n  await waitForFunction(async () => await isBreakpointSet(index));\n}\n\nexport async function removeBreakpointForLine(frontend: puppeteer.Page, index: number|string) {\n  const breakpointLine = await getLineNumberElement(index);\n  assertNotNullOrUndefined(breakpointLine);\n\n  await waitForFunction(async () => await isBreakpointSet(index));\n  await click(breakpointLine);\n  await waitForFunction(async () => !(await isBreakpointSet(index)));\n}\n\nexport async function isBreakpointSet(lineNumber: number|string) {\n  const lineNumberElement = await getLineNumberElement(lineNumber);\n  const breakpointLineParentClasses = await lineNumberElement?.evaluate(n => n.className);\n  return breakpointLineParentClasses?.includes('cm-breakpoint');\n}\n\nexport async function checkBreakpointDidNotActivate() {\n  await step('check that the script did not pause', async () => {\n    // TODO(almuthanna): make sure this check happens at a point where the pause indicator appears if it was active\n    const pauseIndicators = await $$(PAUSE_INDICATOR_SELECTOR);\n    const breakpointIndicator = await Promise.all(pauseIndicators.map(elements => {\n      return elements.evaluate(el => el.className);\n    }));\n    assert.deepEqual(breakpointIndicator.length, 0, 'script had been paused');\n  });\n}\n\nexport async function getBreakpointDecorators(disabledOnly = false) {\n  const selector = `.cm-breakpoint${disabledOnly ? '-disabled' : ''}`;\n  const breakpointDecorators = await $$(selector);\n  return await Promise.all(\n      breakpointDecorators.map(breakpointDecorator => breakpointDecorator.evaluate(n => Number(n.textContent))));\n}\n\nexport async function getNonBreakableLines() {\n  const selector = '.cm-nonBreakableLine';\n  await waitFor(selector);\n  const unbreakableLines = await $$(selector);\n  return await Promise.all(\n      unbreakableLines.map(unbreakableLine => unbreakableLine.evaluate(n => Number(n.textContent))));\n}\n\nexport async function executionLineHighlighted() {\n  return await waitFor('.cm-executionLine');\n}\n\nexport async function getCallFrameNames() {\n  const selector = '.call-frame-item:not(.hidden) .call-frame-item-title';\n  await waitFor(selector);\n  const items = await $$(selector);\n  const promises = items.map(handle => handle.evaluate(el => el.textContent as string));\n  const results = [];\n  for (const promise of promises) {\n    results.push(await promise);\n  }\n  return results;\n}\n\nexport async function getCallFrameLocations() {\n  const selector = '.call-frame-item:not(.hidden) .call-frame-location';\n  await waitFor(selector);\n  const items = await $$(selector);\n  const promises = items.map(handle => handle.evaluate(el => el.textContent as string));\n  const results = [];\n  for (const promise of promises) {\n    results.push(await promise);\n  }\n  return results;\n}\n\nexport async function switchToCallFrame(index: number) {\n  const selector = `.call-frame-item[aria-posinset=\"${index}\"]`;\n  await click(selector);\n  await waitFor(selector + '[aria-selected=\"true\"]');\n}\n\nexport async function retrieveTopCallFrameScriptLocation(script: string, target: puppeteer.Page) {\n  // The script will run into a breakpoint, which means that it will not actually\n  // finish the evaluation, until we continue executing.\n  // Thus, we have to await it at a later point, while stepping through the code.\n  const scriptEvaluation = target.evaluate(script);\n\n  // Wait for the evaluation to be paused and shown in the UI\n  // and retrieve the top level call frame script location name\n  const scriptLocation = await retrieveTopCallFrameWithoutResuming();\n\n  // Resume the evaluation\n  await click(RESUME_BUTTON);\n\n  // Make sure to await the context evaluate before asserting\n  // Otherwise the Puppeteer process might crash on a failure assertion,\n  // as its execution context is destroyed\n  await scriptEvaluation;\n\n  return scriptLocation;\n}\n\nexport async function retrieveTopCallFrameWithoutResuming() {\n  // Wait for the evaluation to be paused and shown in the UI\n  await waitFor(PAUSE_INDICATOR_SELECTOR);\n\n  // Retrieve the top level call frame script location name\n  const locationHandle = await waitFor('.call-frame-location');\n  const scriptLocation = await locationHandle.evaluate(location => location.textContent);\n\n  return scriptLocation;\n}\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface Window {\n    /* eslint-disable @typescript-eslint/naming-convention */\n    __sourceFileEvents: Map<number, {files: string[], handler: (e: Event) => void}>;\n    /* eslint-enable @typescript-eslint/naming-convention */\n  }\n}\n\nexport const enum SourceFileEvents {\n  SourceFileLoaded = 'source-file-loaded',\n  AddedToSourceTree = 'source-tree-file-added',\n}\n\nlet nextEventHandlerId = 0;\nexport async function waitForSourceFiles<T>(\n    eventName: SourceFileEvents, waitCondition: (files: string[]) => boolean | Promise<boolean>,\n    action: () => T): Promise<T> {\n  const {frontend} = getBrowserAndPages();\n  const eventHandlerId = nextEventHandlerId++;\n\n  // Install new listener for the event\n  await frontend.evaluate((eventName, eventHandlerId) => {\n    if (!window.__sourceFileEvents) {\n      window.__sourceFileEvents = new Map();\n    }\n    const handler = (event: Event) => {\n      const {detail} = event as CustomEvent<string>;\n      if (!detail.endsWith('/__puppeteer_evaluation_script__')) {\n        window.__sourceFileEvents.get(eventHandlerId)?.files.push(detail);\n      }\n    };\n    window.__sourceFileEvents.set(eventHandlerId, {files: [], handler});\n    window.addEventListener(eventName, handler);\n  }, eventName, eventHandlerId);\n\n  const result = await action();\n\n  await waitForFunction(async () => {\n    const files =\n        await frontend.evaluate(eventHandlerId => window.__sourceFileEvents.get(eventHandlerId)?.files, eventHandlerId);\n    assertNotNullOrUndefined(files);\n    return await waitCondition(files);\n  });\n\n  await frontend.evaluate((eventName, eventHandlerId) => {\n    const handler = window.__sourceFileEvents.get(eventHandlerId);\n    if (!handler) {\n      throw new Error('handler unexpectandly unregistered');\n    }\n    window.__sourceFileEvents.delete(eventHandlerId);\n    window.removeEventListener(eventName, handler.handler);\n  }, eventName, eventHandlerId);\n\n  return result;\n}\n\nexport async function captureAddedSourceFiles(count: number, action: () => Promise<void>): Promise<string[]> {\n  let capturedFileNames!: string[];\n  await waitForSourceFiles(SourceFileEvents.AddedToSourceTree, files => {\n    capturedFileNames = files;\n    return files.length >= count;\n  }, action);\n  return capturedFileNames.map(f => new URL(`http://${f}`).pathname);\n}\n\nexport async function reloadPageAndWaitForSourceFile(target: puppeteer.Page, sourceFile: string) {\n  await waitForSourceFiles(\n      SourceFileEvents.SourceFileLoaded, files => files.some(f => f.endsWith(sourceFile)), () => target.reload());\n}\n\nexport function isEqualOrAbbreviation(abbreviated: string, full: string): boolean {\n  const split = abbreviated.split('…');\n  if (split.length === 1) {\n    return abbreviated === full;\n  }\n  assert.lengthOf(split, 2);\n  return full.startsWith(split[0]) && full.endsWith(split[1]);\n}\n\n// Helpers for navigating the file tree.\nexport type NestedFileSelector = {\n  rootSelector: string,\n  domainSelector: string,\n  folderSelector?: string, fileSelector: string,\n};\n\nexport function createSelectorsForWorkerFile(\n    workerName: string, folderName: string, fileName: string, workerIndex = 1): NestedFileSelector {\n  const rootSelector = new Array(workerIndex).fill(`[aria-label=\"${workerName}, worker\"]`).join(' ~ ');\n  const domainSelector = `${rootSelector} + ol > [aria-label=\"localhost:${getTestServerPort()}, domain\"]`;\n  const folderSelector = `${domainSelector} + ol > [aria-label^=\"${folderName}, \"]`;\n  const fileSelector = `${folderSelector} + ol > [aria-label=\"${fileName}, file\"]`;\n\n  return {\n    rootSelector,\n    domainSelector,\n    folderSelector,\n    fileSelector,\n  };\n}\n\nasync function isExpanded(sourceTreeItem: puppeteer.ElementHandle<Element>): Promise<boolean> {\n  return await sourceTreeItem.evaluate(element => {\n    return element.getAttribute('aria-expanded') === 'true';\n  });\n}\n\nexport async function expandSourceTreeItem(selector: string) {\n  // FIXME(crbug/1112692): Refactor test to remove the timeout.\n  await timeout(50);\n  const sourceTreeItem = await waitFor(selector);\n  if (!await isExpanded(sourceTreeItem)) {\n    // FIXME(crbug/1112692): Refactor test to remove the timeout.\n    await timeout(50);\n    await doubleClickSourceTreeItem(selector);\n  }\n}\n\nexport async function expandFileTree(selectors: NestedFileSelector) {\n  await expandSourceTreeItem(selectors.rootSelector);\n  await expandSourceTreeItem(selectors.domainSelector);\n  if (selectors.folderSelector) {\n    await expandSourceTreeItem(selectors.folderSelector);\n  }\n  // FIXME(crbug/1112692): Refactor test to remove the timeout.\n  await timeout(50);\n  return await waitFor(selectors.fileSelector);\n}\n\nexport async function readSourcesTreeView(): Promise<string[]> {\n  const items = await $$('.navigator-folder-tree-item,.navigator-file-tree-item');\n  const promises = items.map(handle => handle.evaluate(el => el.textContent as string));\n  const results = await Promise.all(promises);\n  return results.map(item => item.replace(/localhost:[0-9]+/, 'localhost:XXXX'));\n}\n\nasync function hasPausedEvents(frontend: puppeteer.Page): Promise<boolean> {\n  const events = await getPendingEvents(frontend, DEBUGGER_PAUSED_EVENT);\n  return Boolean(events && events.length);\n}\n\nexport async function stepThroughTheCode() {\n  const {frontend} = getBrowserAndPages();\n  await getPendingEvents(frontend, DEBUGGER_PAUSED_EVENT);\n  await frontend.keyboard.press('F9');\n  await waitForFunction(() => hasPausedEvents(frontend));\n  await waitFor(PAUSE_INDICATOR_SELECTOR);\n}\n\nexport async function stepIn() {\n  const {frontend} = getBrowserAndPages();\n  await getPendingEvents(frontend, DEBUGGER_PAUSED_EVENT);\n  await frontend.keyboard.press('F11');\n  await waitForFunction(() => hasPausedEvents(frontend));\n  await waitFor(PAUSE_INDICATOR_SELECTOR);\n}\n\nexport async function stepOut() {\n  const {frontend} = getBrowserAndPages();\n  await getPendingEvents(frontend, DEBUGGER_PAUSED_EVENT);\n  await frontend.keyboard.down('Shift');\n  await frontend.keyboard.press('F11');\n  await frontend.keyboard.up('Shift');\n  await waitForFunction(() => hasPausedEvents(frontend));\n\n  await waitFor(PAUSE_INDICATOR_SELECTOR);\n}\n\nexport async function openNestedWorkerFile(selectors: NestedFileSelector) {\n  await expandFileTree(selectors);\n  // FIXME(crbug/1112692): Refactor test to remove the timeout.\n  await timeout(50);\n  await click(selectors.fileSelector);\n}\n\nexport async function clickOnContextMenu(selector: string, label: string) {\n  // Find the selected node, right click.\n  const selectedNode = await waitFor(selector);\n  await click(selectedNode, {clickOptions: {button: 'right'}});\n\n  // Wait for the context menu option, and click it.\n  const labelSelector = `[aria-label=\"${label}\"]`;\n  await waitFor(labelSelector);\n  await click(labelSelector);\n}\n\nexport async function inspectMemory(variableName: string) {\n  await clickOnContextMenu(\n      `[data-object-property-name-for-test=\"${variableName}\"]`, 'Reveal in Memory Inspector panel');\n}\n\nexport async function typeIntoSourcesAndSave(text: string) {\n  const pane = await waitFor('.sources');\n  await pane.type(text);\n\n  await pressKey('s', {control: true});\n}\n\nexport async function getScopeNames() {\n  const scopeElements = await $$('.scope-chain-sidebar-pane-section-title');\n  const scopeNames = await Promise.all(scopeElements.map(nodes => nodes.evaluate(n => n.textContent)));\n  return scopeNames;\n}\n\nexport async function getValuesForScope(scope: string, expandCount: number, waitForNoOfValues: number) {\n  const scopeSelector = `[aria-label=\"${scope}\"]`;\n  await waitFor(scopeSelector);\n  for (let i = 0; i < expandCount; i++) {\n    const unexpandedSelector = `${scopeSelector} + ol li[aria-expanded=false]`;\n    await waitFor(unexpandedSelector);\n    await click(unexpandedSelector);\n  }\n  const valueSelector = `${scopeSelector} + ol .name-and-value`;\n  const valueSelectorElements = await waitForFunction(async () => {\n    const elements = await $$(valueSelector);\n    if (elements.length >= waitForNoOfValues) {\n      return elements;\n    }\n    return undefined;\n  });\n  const values = await Promise.all(valueSelectorElements.map(elem => elem.evaluate(n => n.textContent as string)));\n  return values;\n}\n\nexport async function getPausedMessages() {\n  const {frontend} = getBrowserAndPages();\n  const messageElement = await frontend.waitForSelector('.paused-message');\n  if (!messageElement) {\n    assert.fail('getPausedMessages: did not find .paused-message element.');\n  }\n  const statusMain = await waitFor('.status-main', messageElement);\n  const statusSub = await waitFor('.status-sub', messageElement);\n  return {\n    statusMain: await statusMain.evaluate(x => x.textContent),\n    statusSub: await statusSub.evaluate(x => x.textContent),\n  };\n}\n\nexport async function getWatchExpressionsValues() {\n  const {frontend} = getBrowserAndPages();\n  await waitForFunction(async () => {\n    const expandedOption = await $('[aria-label=\"Watch\"].expanded');\n    if (expandedOption) {\n      return true;\n    }\n    await click('[aria-label=\"Watch\"]');\n    // Wait for the click event to settle.\n    await timeout(100);\n    return expandedOption !== null;\n  });\n  await frontend.keyboard.press('ArrowRight');\n  const watchExpressionValue = await $(WATCH_EXPRESSION_VALUE_SELECTOR);\n  if (!watchExpressionValue) {\n    return null;\n  }\n  const values = await $$(WATCH_EXPRESSION_VALUE_SELECTOR) as puppeteer.ElementHandle<HTMLElement>[];\n  return await Promise.all(values.map(value => value.evaluate(element => element.innerText)));\n}\n\nexport async function runSnippet() {\n  const {frontend} = getBrowserAndPages();\n  const modifierKey = platform === 'mac' ? 'Meta' : 'Control';\n  await frontend.keyboard.down(modifierKey);\n  await frontend.keyboard.press('Enter');\n  await frontend.keyboard.up(modifierKey);\n}\n\nexport async function evaluateSelectedTextInConsole() {\n  const {frontend} = getBrowserAndPages();\n  const modifierKey = platform === 'mac' ? 'Meta' : 'Control';\n  await frontend.keyboard.down(modifierKey);\n  await frontend.keyboard.down('Shift');\n  await frontend.keyboard.press('E');\n  await frontend.keyboard.up(modifierKey);\n  await frontend.keyboard.up('Shift');\n}\n\nexport async function addSelectedTextToWatches() {\n  const {frontend} = getBrowserAndPages();\n  const modifierKey = platform === 'mac' ? 'Meta' : 'Control';\n  await frontend.keyboard.down(modifierKey);\n  await frontend.keyboard.down('Shift');\n  await frontend.keyboard.press('A');\n  await frontend.keyboard.up(modifierKey);\n  await frontend.keyboard.up('Shift');\n}\n\nexport async function refreshDevToolsAndRemoveBackendState(target: puppeteer.Page) {\n  // Navigate to a different site to make sure that back-end state will be removed.\n  await target.goto('about:blank');\n  await reloadDevTools({selectedPanel: {name: 'sources'}});\n}\n\nexport type LabelMapping = {\n  moduleOffset: number,\n  bytecode: number,\n  sourceLine: number,\n  labelLine: number,\n  labelColumn: number,\n};\n\nexport class WasmLocationLabels {\n  readonly #mappings: Map<string, LabelMapping[]>;\n  readonly #source: string;\n  readonly #wasm: string;\n  constructor(source: string, wasm: string, mappings: Map<string, LabelMapping[]>) {\n    this.#mappings = mappings;\n    this.#source = source;\n    this.#wasm = wasm;\n  }\n\n  static load(source: string, wasm: string): WasmLocationLabels {\n    const testSuitePath = requireTestRunnerConfigSetting<string>('test-suite-path');\n    const target = requireTestRunnerConfigSetting<string>('target');\n    const mapFileName = path.join('out', target, testSuitePath, 'resources', `${wasm}.map.json`);\n    const mapFile = JSON.parse(fs.readFileSync(mapFileName, {encoding: 'utf-8'})) as Array<{\n                      source: string,\n                      generatedLine: number,\n                      generatedColumn: number,\n                      bytecodeOffset: number,\n                      originalLine: number,\n                      originalColumn: number,\n                    }>;\n    const sourceFileName = path.join('out', target, testSuitePath, 'resources', source);\n    const sourceFile = fs.readFileSync(sourceFileName, {encoding: 'utf-8'});\n    const labels = new Map<string, number>();\n    for (const [index, line] of sourceFile.split('\\n').entries()) {\n      if (line.trim().startsWith(';;@')) {\n        const label = line.trim().substr(3).trim();\n        assert.isFalse(labels.has(label), `Label ${label} must be unique`);\n        labels.set(label, index + 1);\n      }\n    }\n    const mappings = new Map<string, LabelMapping[]>();\n    for (const m of mapFile) {\n      const entry = mappings.get(m.source) ?? [];\n      if (entry.length === 0) {\n        mappings.set(m.source, entry);\n      }\n      const labelLine = m.originalLine as number;\n      const labelColumn = m.originalColumn as number;\n      const sourceLine = labels.get(`${m.source}:${labelLine}:${labelColumn}`);\n      assertNotNullOrUndefined(sourceLine);\n      entry.push({moduleOffset: m.generatedColumn, bytecode: m.bytecodeOffset, sourceLine, labelLine, labelColumn});\n    }\n    return new WasmLocationLabels(source, wasm, mappings);\n  }\n\n  async checkLocationForLabel(label: string) {\n    const mappedLines = this.#mappings.get(label);\n    assertNotNullOrUndefined(mappedLines);\n\n    const pauseLocation = await retrieveTopCallFrameWithoutResuming();\n    const pausedLine = mappedLines.find(\n        line => pauseLocation === `${path.basename(this.#wasm)}:0x${line.moduleOffset.toString(16)}` ||\n            pauseLocation === `${path.basename(this.#source)}:${line.sourceLine}`);\n    assertNotNullOrUndefined(pausedLine);\n    return pausedLine;\n  }\n\n  async addBreakpointsForLabelInSource(label: string) {\n    const {frontend} = getBrowserAndPages();\n    const mappedLines = this.#mappings.get(label);\n    assertNotNullOrUndefined(mappedLines);\n    await openFileInEditor(path.basename(this.#source));\n    for (const line of mappedLines) {\n      await addBreakpointForLine(frontend, line.sourceLine);\n    }\n  }\n\n  async addBreakpointsForLabelInWasm(label: string) {\n    const {frontend} = getBrowserAndPages();\n    const mappedLines = this.#mappings.get(label);\n    assertNotNullOrUndefined(mappedLines);\n    await openFileInEditor(path.basename(this.#wasm));\n    const visibleLines = await $$(CODE_LINE_SELECTOR);\n    const lineNumbers = await Promise.all(visibleLines.map(line => line.evaluate(node => node.textContent)));\n    const lineNumberLabels = new Map(lineNumbers.map(label => [Number(label), label]));\n\n    for (const line of mappedLines) {\n      const lineNumberLabel = lineNumberLabels.get(line.moduleOffset);\n      assertNotNullOrUndefined(lineNumberLabel);\n      await addBreakpointForLine(frontend, lineNumberLabel);\n    }\n  }\n\n  async setBreakpointInSourceAndRun(label: string, script: string) {\n    const {target} = getBrowserAndPages();\n    await this.addBreakpointsForLabelInSource(label);\n\n    target.evaluate(script);\n    await this.checkLocationForLabel(label);\n  }\n\n  async setBreakpointInWasmAndRun(label: string, script: string) {\n    const {target} = getBrowserAndPages();\n    await this.addBreakpointsForLabelInWasm(label);\n\n    target.evaluate(script);\n    await this.checkLocationForLabel(label);\n  }\n\n  async continueAndCheckForLabel(label: string) {\n    await click(RESUME_BUTTON);\n    await this.checkLocationForLabel(label);\n  }\n\n  getMappingsForPlugin(): LabelMapping[] {\n    return Array.from(this.#mappings.values()).flat();\n  }\n}\n"]}